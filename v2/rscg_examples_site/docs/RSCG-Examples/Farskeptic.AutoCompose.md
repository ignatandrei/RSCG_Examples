---
sidebar_position: 1280
title: 128 - Farskeptic.AutoCompose
description: Generating decorators for classes that implements interfaces.
slug: /Farskeptic.AutoCompose
---
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import TOCInline from '@theme/TOCInline';
import SameCategory from '../Categories/_PrimitiveInterface.mdx';

# Farskeptic.AutoCompose  by farskeptic/jmagel


<TOCInline toc={toc}  />

## NuGet / site data
[![Nuget](https://img.shields.io/nuget/dt/Farskeptic.AutoCompose?label=Farskeptic.AutoCompose)](https://www.nuget.org/packages/Farskeptic.AutoCompose/)
[![GitHub last commit](https://img.shields.io/github/last-commit/farskeptic/AutoCompose?label=updated)](https://github.com/farskeptic/AutoCompose)
![GitHub Repo stars](https://img.shields.io/github/stars/farskeptic/AutoCompose?style=social)

## Details

### Info
:::info

Name: **Farskeptic.AutoCompose**

A .NET source generator that enables composition without having to implement pass-thru code.
            No runtime reflection.

Author: farskeptic/jmagel

NuGet: 
*https://www.nuget.org/packages/Farskeptic.AutoCompose/*   


You can find more details at https://github.com/farskeptic/AutoCompose

Source: https://github.com/farskeptic/AutoCompose

:::

### Original Readme
:::note

# AutoCompose

[![Nuget](https://img.shields.io/nuget/v/FarSkeptic.AutoCompose?style=flat-square)](https://www.nuget.org/packages/FarSkeptic.AutoCompose/)
[![Nuget Preview](https://img.shields.io/nuget/vpre/FarSkeptic.AutoCompose?style=flat-square&label=nuget%20preview)](https://www.nuget.org/packages/FarSkeptic.AutoCompose/)
[![License](https://img.shields.io/github/license/farskeptic/AutoCompose?style=flat-square)](https://github.com/farskeptic/AutoCompose/blob/main/LICENSE)
[![Downloads](https://img.shields.io/nuget/dt/FarSkeptic.AutoCompose?style=flat-square)](https://www.nuget.org/packages/FarSkeptic.AutoCompose/)
[![GitHub Sponsors](https://img.shields.io/github/sponsors/farskeptic)](https://github.com/sponsors/farskeptic)
[![GitHub](https://img.shields.io/badge/-source-181717.svg?logo=GitHub)](https://github.com/farskeptic/autocompose)

AutoCompose is a .NET source generator that allows the implementation of an interface via composition without having to implement pass-thru code.  There is no runtime reflection.
  - All unimplemented properties and methods on the interface are automatically generated as pass-thru logic.  
  - Any implemented properties or methods will NOT be generated by AutoCompose.
  - As you add or remove implementations, AutoCompose re-generates to compensate.


This allows object composition to be used as easily as inheritance.

# Getting Started

Given an interface named **ISample**:

Create a class implementing **ISample** via composition using AutoCompose by:
1. Implementing a partial class
1. Adding the instance of the interface as a member variable (e.g. _sample)
1. Injecting the variable in the constructor
1. Decorating the class with the AutoCompose attribute

```csharp
[AutoCompose(typeof(ISample), "_sample")]
public partial class Sample: ISample
{
    protected ISample _sample;

    // all non-implemented properties and methods are automatically generated as pass-thru logic
    public Sample(ISample sample) 
    {
        _sample = sample;
    }

    :
}
```

AutoCompose runs at compile time, and generates the source required to fully implement the interface.


# Composition as easily as Inheritance

When trying to decide between inheritance or composition, the amount of pass-thru code that must be coded and maintained often plays a role in the decision.

Example: When we need to override the implementation of a single method for an interface that contains 10 methods, the code burden of implementing and maintaing the 9 pass-thru methods often causes developers to choose inheritance over composition, regardless of other considerations.

**With AutoCompose, this issue goes away.  The developer is free to choose inheritance or composition for purely architectural reasons, without having to worry about implementation or maintenance difficulties.**

# When should I use AutoCompose?

Any time you want to use composition, and have at least one property or method that would be implemented as pass-thru code, AutoCompose can take that burden away from you.

# Known Limitations

1. AutoCompose currently works for interfaces only.  It DOES NOT work (yet) for abstract classes.
1. AutoCompose may not work if your code has multiple definitions of an interface with the same name.  AutoCompose (currently) just picks the first matching symbol, and so does not discriminate the target-interface based purely on namespaces.
1. If your code contains extremely deep namespaces and would generate source code files with very long names, then there can be filename-length conflicts with the windows file system.




:::

### About
:::note

Generating decorators for classes that implements interfaces.


:::

## How to use

### Example (source csproj, source files)

<Tabs>

<TabItem value="csproj" label="CSharp Project">

This is the CSharp Project that references **Farskeptic.AutoCompose**
```xml showLineNumbers {11}
<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <OutputType>Exe</OutputType>
    <TargetFramework>net8.0</TargetFramework>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Include="Farskeptic.AutoCompose" Version="1.0.1" />
  </ItemGroup>
	<PropertyGroup>
		<EmitCompilerGeneratedFiles>true</EmitCompilerGeneratedFiles>
		<CompilerGeneratedFilesOutputPath>$(BaseIntermediateOutputPath)\GX</CompilerGeneratedFilesOutputPath>
	</PropertyGroup>
</Project>

```

</TabItem>

  <TabItem value="D:\gth\RSCG_Examples\v2\rscg_examples\Farskeptic.AutoCompose\src\Decorator\Program.cs" label="Program.cs" >

  This is the use of **Farskeptic.AutoCompose** in *Program.cs*

```csharp showLineNumbers 
using Decorator;

ICoffee c = new Coffee();
c = new CoffeeWithLogging(c);
await c.Prepare();
var ingredients = c.GetIngredients();
```
  </TabItem>

  <TabItem value="D:\gth\RSCG_Examples\v2\rscg_examples\Farskeptic.AutoCompose\src\Decorator\Coffee.cs" label="Coffee.cs" >

  This is the use of **Farskeptic.AutoCompose** in *Coffee.cs*

```csharp showLineNumbers 
namespace Decorator;

internal class Coffee : ICoffee
{
    public string? Name { get; set; }
    public async Task<bool> Prepare()
    {
        Console.WriteLine("start prepare coffee");
        await Task.Delay(1000);
        Console.WriteLine("finish prepare coffee");
        return true;
    }
    public string[] GetIngredients() => new[] { "water", "coffee" };

}


```
  </TabItem>

  <TabItem value="D:\gth\RSCG_Examples\v2\rscg_examples\Farskeptic.AutoCompose\src\Decorator\ICoffee.cs" label="ICoffee.cs" >

  This is the use of **Farskeptic.AutoCompose** in *ICoffee.cs*

```csharp showLineNumbers 
namespace Decorator;
internal interface ICoffee
{
    Task<bool> Prepare();

    string[] GetIngredients();
}

```
  </TabItem>

  <TabItem value="D:\gth\RSCG_Examples\v2\rscg_examples\Farskeptic.AutoCompose\src\Decorator\CoffeeWithLogging.cs" label="CoffeeWithLogging.cs" >

  This is the use of **Farskeptic.AutoCompose** in *CoffeeWithLogging.cs*

```csharp showLineNumbers 

using AutoCompose.Generator.Attributes;

namespace Decorator;

[AutoCompose(typeof(ICoffee), nameof(_cof))]
internal partial class CoffeeWithLogging : ICoffee
{
    protected ICoffee _cof;

    public CoffeeWithLogging(ICoffee cof)
    {
        this._cof = cof;
    }
    public string[] GetIngredients()
    {
        Console.WriteLine("CoffeeWithLogging.GetIngredients");
        return this._cof.GetIngredients();
    }
}
```
  </TabItem>

</Tabs>

### Generated Files

Those are taken from $(BaseIntermediateOutputPath)\GX

<Tabs>


<TabItem value="D:\gth\RSCG_Examples\v2\rscg_examples\Farskeptic.AutoCompose\src\Decorator\obj\GX\AutoCompose.Generator\AutoCompose.Generator.AutoCompose.AutoComposeSourceGenerator\Decorator.CoffeeWithLogging.g.cs" label="Decorator.CoffeeWithLogging.g.cs" >


```csharp showLineNumbers 
// <auto-generated> 
// WARNING: THIS CODE IS AUTO-GENERATED AT COMPILE-TIME.  ANY CHANGES WILL BE OVERWRITTEN ON NEXT COMPILE.
// </auto-generated> 



namespace Decorator
{
    internal partial class CoffeeWithLogging
    {


        public virtual Task<bool> Prepare()
        {
            return _cof.Prepare();
        }


    }
}

```

  </TabItem>


</Tabs>

## Useful

### Download Example (.NET  C#)

:::tip

[Download Example project Farskeptic.AutoCompose ](/sources/Farskeptic.AutoCompose.zip)

:::


### Share Farskeptic.AutoCompose 

<ul>
  <li><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FFarskeptic.AutoCompose&quote=Farskeptic.AutoCompose" title="Share on Facebook" target="_blank">Share on Facebook</a></li>
  <li><a href="https://twitter.com/intent/tweet?source=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FFarskeptic.AutoCompose&text=Farskeptic.AutoCompose:%20https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FFarskeptic.AutoCompose" target="_blank" title="Tweet">Share in Twitter</a></li>
  <li><a href="http://www.reddit.com/submit?url=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FFarskeptic.AutoCompose&title=Farskeptic.AutoCompose" target="_blank" title="Submit to Reddit">Share on Reddit</a></li>
  <li><a href="http://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FFarskeptic.AutoCompose&title=Farskeptic.AutoCompose&summary=&source=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FFarskeptic.AutoCompose" target="_blank" title="Share on LinkedIn">Share on Linkedin</a></li>
</ul>

https://ignatandrei.github.io/RSCG_Examples/v2/docs/Farskeptic.AutoCompose

aaa
<SameCategory />

