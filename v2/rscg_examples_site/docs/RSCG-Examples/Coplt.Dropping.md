---
sidebar_position: 1550
title: 155 - Coplt.Dropping
description: Generating disposable
slug: /Coplt.Dropping
---
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import TOCInline from '@theme/TOCInline';

# Coplt.Dropping  by 2A5F


<TOCInline toc={toc}  />

## NuGet / site data
[![Nuget](https://img.shields.io/nuget/dt/Coplt.Dropping?label=Coplt.Dropping)](https://www.nuget.org/packages/Coplt.Dropping/)
[![GitHub last commit](https://img.shields.io/github/last-commit/2A5F/Coplt.Dropping?label=updated)](https://github.com/2A5F/Coplt.Dropping)
![GitHub Repo stars](https://img.shields.io/github/stars/2A5F/Coplt.Dropping?style=social)

## Details

### Info
:::info

Name: **Coplt.Dropping**

Auto gen dispose pattern

Author: 2A5F

NuGet: 
*https://www.nuget.org/packages/Coplt.Dropping/*   


You can find more details at https://github.com/2A5F/Coplt.Dropping

Source: https://github.com/2A5F/Coplt.Dropping

:::

### Original Readme
:::note

# Coplt.Dropping

[![Nuget](https://img.shields.io/nuget/v/Coplt.Dropping)](https://www.nuget.org/packages/Coplt.Dropping/)
![MIT](https://img.shields.io/github/license/2A5F/Coplt.Dropping)

Auto gen dispose pattern

- Auto handle `Dispose(bool dispoing)` pattern
- Auto handle destructor/finalizer
- Allow multiple drops
- Specify the drop order `[Drop(Order = X)]`
- The first argument of `Drop` target method can be `bool disposing`
- Mark Drop directly on fields and properties (requires target type have `Dispose` method)
- Dose not supported `AsyncDispose`, too complicated, it is recommended to implement it manually
- `Drop` can mark on static methods, will pass `this` on first argument, if have `bool disposing` will be the second argument

## Example

- Basic usage
    
    ```cs
    [Dropping]
    public partial class Foo1
    {
        [Drop]
        public void Drop()
        {
            Console.WriteLine(1);
        }
    }
    ```
    
    Generate output:

    <details>
      <summary>Foo1.dropping.g.cs</summary>
    
    
    </details>
    <br/>
  


:::

### About
:::note

Generating disposable


:::

## How to use

### Example (source csproj, source files)

<Tabs>

<TabItem value="csproj" label="CSharp Project">

This is the CSharp Project that references **Coplt.Dropping**
```xml showLineNumbers {14}
<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <OutputType>Exe</OutputType>
    <TargetFramework>net8.0</TargetFramework>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
  </PropertyGroup>
	 <PropertyGroup>
        <EmitCompilerGeneratedFiles>true</EmitCompilerGeneratedFiles>
        <CompilerGeneratedFilesOutputPath>$(BaseIntermediateOutputPath)\GX</CompilerGeneratedFilesOutputPath>
    </PropertyGroup>
	 <ItemGroup>
	   <PackageReference Include="Coplt.Dropping" Version="0.5.1" OutputItemType="Analyzer" />
	   
	 </ItemGroup>

</Project>

```

</TabItem>

  <TabItem value="D:\gth\RSCG_Examples\v2\rscg_examples\Coplt.Dropping\src\IDisp\Program.cs" label="Program.cs" >

  This is the use of **Coplt.Dropping** in *Program.cs*

```csharp showLineNumbers 
using IDisposableGeneratorDemo;
//https://github.com/benutomo-dev/RoslynComponents
using (var db = new DALDB())
{
    Console.WriteLine("before releasing");
}
Console.WriteLine("after releasing");
```
  </TabItem>

  <TabItem value="D:\gth\RSCG_Examples\v2\rscg_examples\Coplt.Dropping\src\IDisp\DALDB.cs" label="DALDB.cs" >

  This is the use of **Coplt.Dropping** in *DALDB.cs*

```csharp showLineNumbers 
using Coplt.Dropping;

namespace IDisposableGeneratorDemo;

[Dropping]
partial class DALDB :IDisposable
{
    private ConnectionDB cn;
    private ConnectionDB cn1;

    public DALDB()
    {
        cn = new ConnectionDB();
        cn1=new ConnectionDB();
    }
    [Drop]
    public void Drop()
    {
        cn.Dispose();
        cn1.Dispose();
    }
}

```
  </TabItem>

  <TabItem value="D:\gth\RSCG_Examples\v2\rscg_examples\Coplt.Dropping\src\IDisp\ConnectionDB.cs" label="ConnectionDB.cs" >

  This is the use of **Coplt.Dropping** in *ConnectionDB.cs*

```csharp showLineNumbers 
namespace IDisposableGeneratorDemo;

class ConnectionDB : IDisposable
{
    public void Dispose()
    {
        Console.WriteLine("disposing connectiondb");
    }
}

```
  </TabItem>

</Tabs>

### Generated Files

Those are taken from $(BaseIntermediateOutputPath)\GX

<Tabs>


<TabItem value="D:\gth\RSCG_Examples\v2\rscg_examples\Coplt.Dropping\src\IDisp\obj\GX\Coplt.Dropping.Analyzers\Coplt.Dropping.Analyzers.Generators.DroppingGenerator\IDisposableGeneratorDemo.DALDB.dropping.g.cs" label="IDisposableGeneratorDemo.DALDB.dropping.g.cs" >


```csharp showLineNumbers 
// <auto-generated/>

#nullable enable

using Coplt.Dropping;

namespace IDisposableGeneratorDemo {

internal partial class DALDB : global::System.IDisposable
{

    protected virtual void Dispose(bool disposing)
    {
        if (disposing) Drop();
    }

    public void Dispose()
    {
        Dispose(true);
        GC.SuppressFinalize(this);
    }

    ~DALDB()
    {
        Dispose(false);
    }

}

} // namespace IDisposableGeneratorDemo

```

  </TabItem>


</Tabs>

## Useful

### Download Example (.NET  C# )

:::tip

[Download Example project Coplt.Dropping ](/sources/Coplt.Dropping.zip)

:::


### Share Coplt.Dropping 

<ul>
  <li><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FCoplt.Dropping&quote=Coplt.Dropping" title="Share on Facebook" target="_blank">Share on Facebook</a></li>
  <li><a href="https://twitter.com/intent/tweet?source=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FCoplt.Dropping&text=Coplt.Dropping:%20https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FCoplt.Dropping" target="_blank" title="Tweet">Share in Twitter</a></li>
  <li><a href="http://www.reddit.com/submit?url=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FCoplt.Dropping&title=Coplt.Dropping" target="_blank" title="Submit to Reddit">Share on Reddit</a></li>
  <li><a href="http://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FCoplt.Dropping&title=Coplt.Dropping&summary=&source=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FCoplt.Dropping" target="_blank" title="Share on LinkedIn">Share on Linkedin</a></li>
</ul>

https://ignatandrei.github.io/RSCG_Examples/v2/docs/Coplt.Dropping

### In the same category (Disposer) - 4 other generators


#### [BenutomoAutomaticDisposeImplSourceGenerator](/docs/BenutomoAutomaticDisposeImplSourceGenerator)


#### [DisposableHelpers](/docs/DisposableHelpers)


#### [Disposer](/docs/Disposer)


#### [IDisposableGenerator](/docs/IDisposableGenerator)

