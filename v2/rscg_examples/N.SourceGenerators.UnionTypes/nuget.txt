Discriminated union type source generator