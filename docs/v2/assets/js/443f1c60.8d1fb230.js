"use strict";(self.webpackChunkrscg_examples=self.webpackChunkrscg_examples||[]).push([[7318],{8461:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>u,contentTitle:()=>l,default:()=>g,frontMatter:()=>s,metadata:()=>m,toc:()=>d});var n=a(7462),r=(a(7294),a(4137)),o=a(3992),i=a(425),p=a(8839);const s={sidebar_position:670,title:"67 - MapTo",description:"AutoGenerate Mapping",slug:"/MapTo"},l="MapTo  by Mohammedreza Taikandi",m={unversionedId:"RSCG-Examples/MapTo",id:"RSCG-Examples/MapTo",title:"67 - MapTo",description:"AutoGenerate Mapping",source:"@site/docs/RSCG-Examples/MapTo.md",sourceDirName:"RSCG-Examples",slug:"/MapTo",permalink:"/RSCG_Examples/v2/docs/MapTo",draft:!1,tags:[],version:"current",sidebarPosition:670,frontMatter:{sidebar_position:670,title:"67 - MapTo",description:"AutoGenerate Mapping",slug:"/MapTo"},sidebar:"tutorialSidebar",previous:{title:"66 - BuilderGenerator",permalink:"/RSCG_Examples/v2/docs/BuilderGenerator"},next:{title:"68 - JsonPolymorphicGenerator",permalink:"/RSCG_Examples/v2/docs/JsonPolymorphicGenerator"}},u={},d=[{value:"Details",id:"details",level:2},{value:"Info",id:"info",level:3},{value:"Original Readme",id:"original-readme",level:3},{value:"About",id:"about",level:3},{value:"How to use",id:"how-to-use",level:2},{value:"Example ( source csproj, source files )",id:"example--source-csproj-source-files-",level:3},{value:"Generated Files",id:"generated-files",level:3},{value:"Usefull",id:"usefull",level:2},{value:"Download Example (.NET  C# )",id:"download-example-net--c-",level:3},{value:"Share MapTo",id:"share-mapto",level:3},{value:"In the same category (Mapper)",id:"in-the-same-category-mapper",level:2},{value:"AutoDTO",id:"autodto",level:3},{value:"mapperly",id:"mapperly",level:3},{value:"NextGenMapper",id:"nextgenmapper",level:3}],c={toc:d},h="wrapper";function g(e){let{components:t,...s}=e;return(0,r.kt)(h,(0,n.Z)({},c,s,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"mapto--by-mohammedreza-taikandi"},"MapTo  by Mohammedreza Taikandi"),(0,r.kt)(p.Z,{toc:d,mdxType:"TOCInline"}),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://www.nuget.org/packages/MapTo/"},(0,r.kt)("img",{parentName:"a",src:"https://img.shields.io/nuget/dt/MapTo?label=MapTo",alt:"Nuget"})),"\n",(0,r.kt)("a",{parentName:"p",href:"https://github.com/mrtaikandi/MapTo"},(0,r.kt)("img",{parentName:"a",src:"https://img.shields.io/github/last-commit/mrtaikandi/MapTo?label=updated",alt:"GitHub last commit"})),"\n",(0,r.kt)("img",{parentName:"p",src:"https://img.shields.io/github/stars/mrtaikandi/MapTo?style=social",alt:"GitHub Repo stars"})),(0,r.kt)("h2",{id:"details"},"Details"),(0,r.kt)("h3",{id:"info"},"Info"),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Name: ",(0,r.kt)("strong",{parentName:"p"},"MapTo")),(0,r.kt)("p",{parentName:"admonition"},"An object to object mapping generator using Roslyn source generator."),(0,r.kt)("p",{parentName:"admonition"},"Author: Mohammedreza Taikandi"),(0,r.kt)("p",{parentName:"admonition"},"NuGet:\n",(0,r.kt)("em",{parentName:"p"},(0,r.kt)("a",{parentName:"em",href:"https://www.nuget.org/packages/MapTo/"},"https://www.nuget.org/packages/MapTo/")),"   "),(0,r.kt)("p",{parentName:"admonition"},"You can find more details at ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/mrtaikandi/MapTo"},"https://github.com/mrtaikandi/MapTo")),(0,r.kt)("p",{parentName:"admonition"},"Source : ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/mrtaikandi/MapTo"},"https://github.com/mrtaikandi/MapTo"))),(0,r.kt)("h3",{id:"original-readme"},"Original Readme"),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("h1",{parentName:"admonition",id:"mapto"},"MapTo"),(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("a",{parentName:"p",href:"https://www.nuget.org/packages/MapTo/"},(0,r.kt)("img",{parentName:"a",src:"https://img.shields.io/nuget/v/mapto?logo=nuget",alt:"Nuget"})),"\n",(0,r.kt)("img",{parentName:"p",src:"https://github.com/mrtaikandi/MapTo/workflows/Publish%20Packages/badge.svg",alt:"Publish Packages"})),(0,r.kt)("p",{parentName:"admonition"},"A convention based object to object mapper using ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/dotnet/roslyn/blob/master/docs/features/source-generators.md"},"Roslyn source generator"),"."),(0,r.kt)("p",{parentName:"admonition"},"MapTo is a library that programmatically generates the necessary code to map one object to another during compile-time. It eliminates the need to use reflection to map objects and makes it much faster in runtime. It provides compile-time safety checks and ease of use by leveraging extension methods."),(0,r.kt)("h2",{parentName:"admonition",id:"installation"},"Installation"),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre"},"dotnet add package MapTo --prerelease\n")),(0,r.kt)("h2",{parentName:"admonition",id:"usage"},"Usage"),(0,r.kt)("p",{parentName:"admonition"},"Unlike other libraries that require a separate class to define the mappings, ",(0,r.kt)("inlineCode",{parentName:"p"},"MapTo")," uses attributes to define and instruct it on generating the mappings. To start, declare the target class and annotate it with the ",(0,r.kt)("inlineCode",{parentName:"p"},"MapFrom")," attribute to specify the source class."),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-c#"},"using MapTo;\n\nnamespace App.ViewModels;\n\n[MapFrom(typeof(App.Data.Models.User))]\npublic class UserViewModel \n{\n    public string FirstName { get; init; }\n\n    public string LastName { get; init; }\n    \n    [IgnoreProperty]\n    public string FullName { get; set; }\n}\n")),(0,r.kt)("p",{parentName:"admonition"},"To get an instance of ",(0,r.kt)("inlineCode",{parentName:"p"},"UserViewModel")," from the ",(0,r.kt)("inlineCode",{parentName:"p"},"User")," class, you can use the generated extension method:"),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-c#"},'var user = new User(id: 10) { FirstName = "John", LastName = "Doe" };\n\nvar vm = user.MapToUserViewModel(); // A generated extension method for User class.\n')),(0,r.kt)("p",{parentName:"admonition"},"Sometimes, the target class (UserViewModel in this case) might have read-only properties that need to be set during the mapping. To do that, you can define the properties without setters and declare the target class as partial. Changing the class to partial will allow the ",(0,r.kt)("inlineCode",{parentName:"p"},"MapTo")," generator to create the necessary constructor to initialize the read-only properties."),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-c#"},"[MapFrom(typeof(App.Data.Models.User))]\npublic partial class UserViewModel \n{\n    public int Id { get; }\n    \n    public string FirstName { get; init; }\n\n    public string LastName { get; init; }\n    \n    [IgnoreProperty]\n    public string FullName { get; set; }\n}\n")),(0,r.kt)("h2",{parentName:"admonition",id:"available-attributes"},"Available Attributes"),(0,r.kt)("h3",{parentName:"admonition",id:"mapfrom"},"MapFrom"),(0,r.kt)("p",{parentName:"admonition"},"As mentioned above, this attribute is used to specify the source class. It also can be used to specify custom methods to run on before or after the mapping process."),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-c#"},"[MapFrom(typeof(App.Data.Models.User), BeforeMap = nameof(RunBeforeMap), AfterMap = nameof(RunAfterMap))]\npublic partial class UserViewModel\n{\n    public int Id { get; }\n\n    ...\n    \n    // The BeforeMap method can also return a `User` type. If so, \n    // the returned value will be used as the source object.\n    // Or it can return `null` to skip the mapping process and return `null` to \n    // the extension method's caller.\n    private static void RunBeforeMap(User? source) { /* ... */ }\n    \n    private static void RunAfterMap(UserViewModel target) { /* ... */ }\n}\n")),(0,r.kt)("h3",{parentName:"admonition",id:"ignoreproperty"},"IgnoreProperty"),(0,r.kt)("p",{parentName:"admonition"},"By default, MapTo will include all properties with the same name (case-sensitive), whether read-only or not, in the mapping unless annotating them with the ",(0,r.kt)("inlineCode",{parentName:"p"},"IgnoreProperty")," attribute."),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-c#"},"[IgnoreProperty]\npublic string FullName { get; set; }\n")),(0,r.kt)("h3",{parentName:"admonition",id:"mapproperty"},"MapProperty"),(0,r.kt)("p",{parentName:"admonition"},"This attribute gives you more control over how the annotated property should get mapped. For instance, if the annotated property should use a property in the source class with a different name."),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-c#"},'[MapProperty(From = "Id")]\npublic int Key { get; set; }\n')),(0,r.kt)("h3",{parentName:"admonition",id:"propertytypeconverter"},"PropertyTypeConverter"),(0,r.kt)("p",{parentName:"admonition"},"A compilation error gets raised by default if the source and destination properties types are not implicitly convertible, but to convert the incompatible source type to the desired destination type, ",(0,r.kt)("inlineCode",{parentName:"p"},"PropertyTypeConverterAttribute")," can be used."),(0,r.kt)("p",{parentName:"admonition"},"This attribute will accept a static method in the target class or another class to convert the source type to the destination type. The method must have the following signature:"),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-c#"},"public static TDestination Convert(TSource source)\n\n// or\n\npublic static TDestination Convert(TSource source, object[]? parameters)\n")),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-c#"},'[MapFrom(typeof(User))]\npublic partial class UserViewModel\n{\n    public DateTimeOffset RegisteredAt { get; set; }\n    \n    [IgnoreProperty]\n    public ProfileViewModel Profile { get; set; }\n    \n    [MapProperty(From = nameof(User.Id))]    \n    [PropertyTypeConverter(nameof(IntToHexConverter))]\n    public string Key { get; }\n\n    private static string IntToHexConverter(int source) => $"{source:X}"; // The converter method.\n}\n'))),(0,r.kt)("h3",{id:"about"},"About"),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"AutoGenerate Mapping")),(0,r.kt)("h2",{id:"how-to-use"},"How to use"),(0,r.kt)("h3",{id:"example--source-csproj-source-files-"},"Example ( source csproj, source files )"),(0,r.kt)(o.Z,{mdxType:"Tabs"},(0,r.kt)(i.Z,{value:"csproj",label:"CSharp Project",mdxType:"TabItem"},(0,r.kt)("p",null,"This is the CSharp Project that references ",(0,r.kt)("strong",{parentName:"p"},"MapTo")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml",metastring:"showLineNumbers {16}",showLineNumbers:!0,"{16}":!0},'<Project Sdk="Microsoft.NET.Sdk">\n\n  <PropertyGroup>\n    <OutputType>Exe</OutputType>\n    <TargetFramework>net7.0</TargetFramework>\n    <ImplicitUsings>enable</ImplicitUsings>\n    <Nullable>enable</Nullable>\n  </PropertyGroup>\n\n    <PropertyGroup>\n        <EmitCompilerGeneratedFiles>true</EmitCompilerGeneratedFiles>\n        <CompilerGeneratedFilesOutputPath>$(BaseIntermediateOutputPath)\\GX</CompilerGeneratedFilesOutputPath>\n    </PropertyGroup>\n\n    <ItemGroup>\n      <PackageReference Include="MapTo" Version="0.9.1" />\n    </ItemGroup>\n\n</Project>\n\n'))),(0,r.kt)(i.Z,{value:"C:\\gth\\RSCG_Examples\\v2\\rscg_examples\\MapTo\\src\\mapperDemo\\Program.cs",label:"Program.cs",mdxType:"TabItem"},(0,r.kt)("p",null,"  This is the use of ",(0,r.kt)("strong",{parentName:"p"},"MapTo")," in ",(0,r.kt)("em",{parentName:"p"},"Program.cs")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp",metastring:"showLineNumbers",showLineNumbers:!0},'// See https://aka.ms/new-console-template for more information\nusing mapperlyDemo;\nvar p=new Person();\np.FirstName = "Andrei";\np.LastName = "Ignat";\nPersonDTO dto = p.MapToPersonDTO();\nConsole.WriteLine(dto.FullName);\n\n'))),(0,r.kt)(i.Z,{value:"C:\\gth\\RSCG_Examples\\v2\\rscg_examples\\MapTo\\src\\mapperDemo\\Person.cs",label:"Person.cs",mdxType:"TabItem"},(0,r.kt)("p",null,"  This is the use of ",(0,r.kt)("strong",{parentName:"p"},"MapTo")," in ",(0,r.kt)("em",{parentName:"p"},"Person.cs")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp",metastring:"showLineNumbers",showLineNumbers:!0},"\npublic class Person\n{\n    public int ID { get; set; }\n    public string? FirstName { get; set; }\n    public string? LastName { get; set; }\n}\n\n\n"))),(0,r.kt)(i.Z,{value:"C:\\gth\\RSCG_Examples\\v2\\rscg_examples\\MapTo\\src\\mapperDemo\\PersonDTO.cs",label:"PersonDTO.cs",mdxType:"TabItem"},(0,r.kt)("p",null,"  This is the use of ",(0,r.kt)("strong",{parentName:"p"},"MapTo")," in ",(0,r.kt)("em",{parentName:"p"},"PersonDTO.cs")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp",metastring:"showLineNumbers",showLineNumbers:!0},'using MapTo;\n\nnamespace mapperlyDemo;\n[MapFrom(typeof(Person))]\npublic class PersonDTO\n{\n    public int ID { get; set; }\n    public string? FirstName { get; set; }\n    public string? LastName { get; set; }\n\n    [IgnoreProperty]\n    public string FullName { \n        get\n        {\n            return FirstName + " " + LastName;\n        }\n    }\n}\n\n')))),(0,r.kt)("h3",{id:"generated-files"},"Generated Files"),(0,r.kt)("p",null,"Those are taken from $(BaseIntermediateOutputPath)\\GX"),(0,r.kt)(o.Z,{mdxType:"Tabs"},(0,r.kt)(i.Z,{value:"C:\\gth\\RSCG_Examples\\v2\\rscg_examples\\MapTo\\src\\mapperDemo\\obj\\GX\\MapTo\\MapTo.MapToGenerator\\mapperlyDemo.PersonDTO.g.cs",label:"mapperlyDemo.PersonDTO.g.cs",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp",metastring:"showLineNumbers",showLineNumbers:!0},'// <auto-generated />\n#nullable enable\n\nnamespace mapperlyDemo;\n\n[global::System.CodeDom.Compiler.GeneratedCodeAttribute("MapTo", "0.9.1.51471")]\npublic static class PersonMapToExtensions\n{\n    [return: global::System.Diagnostics.CodeAnalysis.NotNullIfNotNull("person")]\n    public static global::mapperlyDemo.PersonDTO? MapToPersonDTO(this Person? person)\n    {\n        if (ReferenceEquals(person, null))\n        {\n            return null;\n        }\n\n        return new PersonDTO\n        {\n            ID = person.ID,\n            FirstName = person.FirstName,\n            LastName = person.LastName\n        };\n    }\n}\n\n')))),(0,r.kt)("h2",{id:"usefull"},"Usefull"),(0,r.kt)("h3",{id:"download-example-net--c-"},"Download Example (.NET  C# )"),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("a",{target:"_blank",href:a(3019).Z},"Download Example project MapTo "))),(0,r.kt)("h3",{id:"share-mapto"},"Share MapTo"),(0,r.kt)("ul",null,(0,r.kt)("li",null,(0,r.kt)("a",{href:"https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FMapTo&quote=MapTo",title:"Share on Facebook",target:"_blank"},"Share on Facebook")),(0,r.kt)("li",null,(0,r.kt)("a",{href:"https://twitter.com/intent/tweet?source=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FMapTo&text=MapTo:%20https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FMapTo",target:"_blank",title:"Tweet"},"Share in Twitter")),(0,r.kt)("li",null,(0,r.kt)("a",{href:"http://www.reddit.com/submit?url=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FMapTo&title=MapTo",target:"_blank",title:"Submit to Reddit"},"Share on Reddit")),(0,r.kt)("li",null,(0,r.kt)("a",{href:"http://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FMapTo&title=MapTo&summary=&source=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FMapTo",target:"_blank",title:"Share on LinkedIn"},"Share on Linkedin"))),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://ignatandrei.github.io/RSCG_Examples/v2/docs/MapTo"},"https://ignatandrei.github.io/RSCG_Examples/v2/docs/MapTo")),(0,r.kt)("h2",{id:"in-the-same-category-mapper"},"In the same category (Mapper)"),(0,r.kt)("h3",{id:"autodto"},(0,r.kt)("a",{parentName:"h3",href:"/docs/AutoDTO"},"AutoDTO")),(0,r.kt)("h3",{id:"mapperly"},(0,r.kt)("a",{parentName:"h3",href:"/docs/mapperly"},"mapperly")),(0,r.kt)("h3",{id:"nextgenmapper"},(0,r.kt)("a",{parentName:"h3",href:"/docs/NextGenMapper"},"NextGenMapper")))}g.isMDXComponent=!0},3019:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/files/MapTo-984ecfb97d8331e18b04be1f54ff042b.zip"}}]);