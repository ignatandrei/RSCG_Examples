"use strict";(self.webpackChunkrscg_examples=self.webpackChunkrscg_examples||[]).push([[7564],{17960:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>m,contentTitle:()=>c,default:()=>h,frontMatter:()=>s,metadata:()=>p,toc:()=>d});var a=n(87462),o=(n(67294),n(3905)),r=n(73992),i=n(18679),l=n(68839);const s={sidebar_position:1020,title:"102 - Blazorators",description:"Generate javascript interop code for Blazor WASM projects.",slug:"/Blazorators"},c="Blazorators  by David Pine",p={unversionedId:"RSCG-Examples/Blazorators",id:"RSCG-Examples/Blazorators",title:"102 - Blazorators",description:"Generate javascript interop code for Blazor WASM projects.",source:"@site/docs/RSCG-Examples/Blazorators.md",sourceDirName:"RSCG-Examples",slug:"/Blazorators",permalink:"/RSCG_Examples/v2/docs/Blazorators",draft:!1,tags:[],version:"current",sidebarPosition:1020,frontMatter:{sidebar_position:1020,title:"102 - Blazorators",description:"Generate javascript interop code for Blazor WASM projects.",slug:"/Blazorators"},sidebar:"tutorialSidebar",previous:{title:"101 - Chorn.EmbeddedResourceAccessGenerator",permalink:"/RSCG_Examples/v2/docs/Chorn.EmbeddedResourceAccessGenerator"},next:{title:"103 - HangfireRecurringJob",permalink:"/RSCG_Examples/v2/docs/HangfireRecurringJob"}},m={},d=[{value:"NuGet / site data",id:"nuget--site-data",level:2},{value:"Details",id:"details",level:2},{value:"Info",id:"info",level:3},{value:"Original Readme",id:"original-readme",level:3},{value:"About",id:"about",level:3},{value:"How to use",id:"how-to-use",level:2},{value:"Example (source csproj, source files)",id:"example-source-csproj-source-files",level:3},{value:"Generated Files",id:"generated-files",level:3},{value:"Useful",id:"useful",level:2},{value:"Download Example (.NET  C# )",id:"download-example-net--c-",level:3},{value:"Share Blazorators",id:"share-blazorators",level:3},{value:"In the same category (Blazor) - 1 other generators",id:"in-the-same-category-blazor---1-other-generators",level:3},{value:"GoLive.Generator.BlazorInterop",id:"golivegeneratorblazorinterop",level:4}],u={toc:d},g="wrapper";function h(e){let{components:t,...s}=e;return(0,o.kt)(g,(0,a.Z)({},u,s,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"blazorators--by-david-pine"},"Blazorators  by David Pine"),(0,o.kt)(l.Z,{toc:d,mdxType:"TOCInline"}),(0,o.kt)("h2",{id:"nuget--site-data"},"NuGet / site data"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://www.nuget.org/packages/Blazor.SourceGenerators/"},(0,o.kt)("img",{parentName:"a",src:"https://img.shields.io/nuget/dt/Blazor.SourceGenerators?label=Blazor.SourceGenerators",alt:"Nuget"})),"\n",(0,o.kt)("a",{parentName:"p",href:"https://github.com/IEvangelist/blazorators/"},(0,o.kt)("img",{parentName:"a",src:"https://img.shields.io/github/last-commit/IEvangelist/blazorators?label=updated",alt:"GitHub last commit"})),"\n",(0,o.kt)("img",{parentName:"p",src:"https://img.shields.io/github/stars/IEvangelist/blazorators?style=social",alt:"GitHub Repo stars"})),(0,o.kt)("h2",{id:"details"},"Details"),(0,o.kt)("h3",{id:"info"},"Info"),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"Name: ",(0,o.kt)("strong",{parentName:"p"},"Blazorators")),(0,o.kt)("p",{parentName:"admonition"},"The source generator used to generate extension methods on the IJSInProcessRuntime type for WebAssembly JavaScript interop."),(0,o.kt)("p",{parentName:"admonition"},"Author: David Pine"),(0,o.kt)("p",{parentName:"admonition"},"NuGet:\n",(0,o.kt)("em",{parentName:"p"},(0,o.kt)("a",{parentName:"em",href:"https://www.nuget.org/packages/Blazor.SourceGenerators/"},"https://www.nuget.org/packages/Blazor.SourceGenerators/")),"   "),(0,o.kt)("p",{parentName:"admonition"},"You can find more details at ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/IEvangelist/blazorators/"},"https://github.com/IEvangelist/blazorators/")),(0,o.kt)("p",{parentName:"admonition"},"Source: ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/IEvangelist/blazorators/"},"https://github.com/IEvangelist/blazorators/"))),(0,o.kt)("h3",{id:"original-readme"},"Original Readme"),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("img",{src:"https://raw.githubusercontent.com/IEvangelist/blazorators/main/logo.png",align:"right"}),"# Blazorators: Blazor C# Source Generators",(0,o.kt)("blockquote",{parentName:"admonition"},(0,o.kt)("p",{parentName:"blockquote"},"Thank you for perusing my Blazor C# Source Generator repository. I'd really appreciate a \u2b50 if you find this interesting.")),(0,o.kt)("p",{parentName:"admonition"},(0,o.kt)("a",{parentName:"p",href:"https://github.com/IEvangelist/blazorators/actions/workflows/build-validation.yml"},(0,o.kt)("img",{parentName:"a",src:"https://github.com/IEvangelist/blazorators/actions/workflows/build-validation.yml/badge.svg",alt:"build"}))),(0,o.kt)("p",{parentName:"admonition"},(0,o.kt)("a",{parentName:"p",href:"#contributors-"},(0,o.kt)("img",{parentName:"a",src:"https://img.shields.io/badge/all_contributors-10-orange.svg?style=flat-square",alt:"All Contributors"}))),(0,o.kt)("p",{parentName:"admonition"},"A C# source generator that creates fully functioning Blazor JavaScript interop code, targeting either the ",(0,o.kt)("inlineCode",{parentName:"p"},"IJSInProcessRuntime")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"IJSRuntime")," types. This library provides several NuGet packages:"),(0,o.kt)("p",{parentName:"admonition"},(0,o.kt)("strong",{parentName:"p"},"Core libraries")),(0,o.kt)("table",{parentName:"admonition"},(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"NuGet package"),(0,o.kt)("th",{parentName:"tr",align:null},"NuGet version"),(0,o.kt)("th",{parentName:"tr",align:null},"Description"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"https://www.nuget.org/packages/Blazor.SourceGenerators"},(0,o.kt)("inlineCode",{parentName:"a"},"Blazor.SourceGenerators"))),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"https://www.nuget.org/packages/Blazor.SourceGenerators"},(0,o.kt)("img",{parentName:"a",src:"https://img.shields.io/nuget/v/Blazor.SourceGenerators.svg?style=flat",alt:"NuGet"}))),(0,o.kt)("td",{parentName:"tr",align:null},"Core source generator library.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"https://www.nuget.org/packages/Blazor.Serialization"},(0,o.kt)("inlineCode",{parentName:"a"},"Blazor.Serialization"))),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"https://www.nuget.org/packages/Blazor.Serialization"},(0,o.kt)("img",{parentName:"a",src:"https://img.shields.io/nuget/v/Blazor.Serialization.svg?style=flat",alt:"NuGet"}))),(0,o.kt)("td",{parentName:"tr",align:null},"Common serialization library, required in some scenarios when using generics.")))),(0,o.kt)("p",{parentName:"admonition"},(0,o.kt)("strong",{parentName:"p"},"WebAssembly libraries")),(0,o.kt)("table",{parentName:"admonition"},(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"NuGet package"),(0,o.kt)("th",{parentName:"tr",align:null},"NuGet version"),(0,o.kt)("th",{parentName:"tr",align:null},"Description"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"https://www.nuget.org/packages/Blazor.LocalStorage.WebAssembly"},(0,o.kt)("inlineCode",{parentName:"a"},"Blazor.LocalStorage.WebAssembly"))),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"https://www.nuget.org/packages/Blazor.LocalStorage.WebAssembly"},(0,o.kt)("img",{parentName:"a",src:"https://img.shields.io/nuget/v/Blazor.LocalStorage.WebAssembly.svg?style=flat",alt:"NuGet"}))),(0,o.kt)("td",{parentName:"tr",align:null},"Blazor WebAssembly class library exposing DI-ready ",(0,o.kt)("inlineCode",{parentName:"td"},"IStorageService")," type for the ",(0,o.kt)("inlineCode",{parentName:"td"},"localStorage")," implementation (relies on ",(0,o.kt)("inlineCode",{parentName:"td"},"IJSInProcessRuntime"),").")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"https://www.nuget.org/packages/Blazor.SessionStorage.WebAssembly"},(0,o.kt)("inlineCode",{parentName:"a"},"Blazor.SessionStorage.WebAssembly"))),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"https://www.nuget.org/packages/Blazor.SessionStorage.WebAssembly"},(0,o.kt)("img",{parentName:"a",src:"https://img.shields.io/nuget/v/Blazor.SessionStorage.WebAssembly.svg?style=flat",alt:"NuGet"}))),(0,o.kt)("td",{parentName:"tr",align:null},"Blazor WebAssembly class library exposing DI-ready ",(0,o.kt)("inlineCode",{parentName:"td"},"IStorageService")," type for the ",(0,o.kt)("inlineCode",{parentName:"td"},"sessionStorage")," implementation (relies on ",(0,o.kt)("inlineCode",{parentName:"td"},"IJSInProcessRuntime"),").")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"https://www.nuget.org/packages/Blazor.Geolocation.WebAssembly"},(0,o.kt)("inlineCode",{parentName:"a"},"Blazor.Geolocation.WebAssembly"))),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"https://www.nuget.org/packages/Blazor.Geolocation.WebAssembly"},(0,o.kt)("img",{parentName:"a",src:"https://img.shields.io/nuget/v/Blazor.Geolocation.WebAssembly.svg?style=flat",alt:"NuGet"}))),(0,o.kt)("td",{parentName:"tr",align:null},"Razor class library exposing DI-ready ",(0,o.kt)("inlineCode",{parentName:"td"},"IGeolocationService")," type (and dependent callback types) for the ",(0,o.kt)("inlineCode",{parentName:"td"},"geolocation")," implementation (relies on ",(0,o.kt)("inlineCode",{parentName:"td"},"IJSInProcessRuntime"),").")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"https://www.nuget.org/packages/Blazor.SpeechSynthesis.WebAssembly"},(0,o.kt)("inlineCode",{parentName:"a"},"Blazor.SpeechSynthesis.WebAssembly"))),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"https://www.nuget.org/packages/Blazor.SpeechSynthesis.WebAssembly"},(0,o.kt)("img",{parentName:"a",src:"https://img.shields.io/nuget/v/Blazor.SpeechSynthesis.WebAssembly.svg?style=flat",alt:"NuGet"}))),(0,o.kt)("td",{parentName:"tr",align:null},"Razor class library exposing DI-ready ",(0,o.kt)("inlineCode",{parentName:"td"},"ISpeechSynthesisService")," type for the ",(0,o.kt)("inlineCode",{parentName:"td"},"speechSynthesis")," implementation (relies on ",(0,o.kt)("inlineCode",{parentName:"td"},"IJSInProcessRuntime"),").")))),(0,o.kt)("blockquote",{parentName:"admonition"},(0,o.kt)("p",{parentName:"blockquote"},"Targets the ",(0,o.kt)("inlineCode",{parentName:"p"},"IJSInProcessRuntime")," type.")),(0,o.kt)("p",{parentName:"admonition"},(0,o.kt)("strong",{parentName:"p"},"Server libraries")),(0,o.kt)("table",{parentName:"admonition"},(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"NuGet package"),(0,o.kt)("th",{parentName:"tr",align:null},"NuGet version"),(0,o.kt)("th",{parentName:"tr",align:null},"Description"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"https://www.nuget.org/packages/Blazor.LocalStorage"},(0,o.kt)("inlineCode",{parentName:"a"},"Blazor.LocalStorage"))),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"https://www.nuget.org/packages/Blazor.LocalStorage"},(0,o.kt)("img",{parentName:"a",src:"https://img.shields.io/nuget/v/Blazor.LocalStorage.svg?style=flat",alt:"NuGet"}))),(0,o.kt)("td",{parentName:"tr",align:null},"Blazor Server class library exposing DI-ready ",(0,o.kt)("inlineCode",{parentName:"td"},"IStorageService")," type for the ",(0,o.kt)("inlineCode",{parentName:"td"},"localStorage")," implementation (relies on ",(0,o.kt)("inlineCode",{parentName:"td"},"IJSRuntime"),")")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"https://www.nuget.org/packages/Blazor.SessionStorage"},(0,o.kt)("inlineCode",{parentName:"a"},"Blazor.SessionStorage"))),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"https://www.nuget.org/packages/Blazor.SessionStorage"},(0,o.kt)("img",{parentName:"a",src:"https://img.shields.io/nuget/v/Blazor.SessionStorage.svg?style=flat",alt:"NuGet"}))),(0,o.kt)("td",{parentName:"tr",align:null},"Blazor Server class library exposing DI-ready ",(0,o.kt)("inlineCode",{parentName:"td"},"IStorageService")," type for the ",(0,o.kt)("inlineCode",{parentName:"td"},"sessionStorage")," implementation (relies on ",(0,o.kt)("inlineCode",{parentName:"td"},"IJSRuntime"),")")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"https://www.nuget.org/packages/Blazor.Geolocation"},(0,o.kt)("inlineCode",{parentName:"a"},"Blazor.Geolocation"))),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"https://www.nuget.org/packages/Blazor.Geolocation"},(0,o.kt)("img",{parentName:"a",src:"https://img.shields.io/nuget/v/Blazor.Geolocation.svg?style=flat",alt:"NuGet"}))),(0,o.kt)("td",{parentName:"tr",align:null},"Razor class library exposing DI-ready ",(0,o.kt)("inlineCode",{parentName:"td"},"IGeolocationService")," type (and dependent callback types) for the ",(0,o.kt)("inlineCode",{parentName:"td"},"geolocation")," implementation (relies on ",(0,o.kt)("inlineCode",{parentName:"td"},"IJSRuntime"),").")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"https://www.nuget.org/packages/Blazor.SpeechSynthesis"},(0,o.kt)("inlineCode",{parentName:"a"},"Blazor.SpeechSynthesis"))),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"https://www.nuget.org/packages/Blazor.SpeechSynthesis"},(0,o.kt)("img",{parentName:"a",src:"https://img.shields.io/nuget/v/Blazor.SpeechSynthesis.svg?style=flat",alt:"NuGet"}))),(0,o.kt)("td",{parentName:"tr",align:null},"Razor class library exposing DI-ready ",(0,o.kt)("inlineCode",{parentName:"td"},"ISpeechSynthesisService")," type for the ",(0,o.kt)("inlineCode",{parentName:"td"},"speechSynthesis")," implementation (relies on ",(0,o.kt)("inlineCode",{parentName:"td"},"IJSRuntime"),").")))),(0,o.kt)("blockquote",{parentName:"admonition"},(0,o.kt)("p",{parentName:"blockquote"},"Targets the ",(0,o.kt)("inlineCode",{parentName:"p"},"IJSRuntime")," type.")),(0,o.kt)("blockquote",{parentName:"admonition"},(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("strong",{parentName:"p"},"Note"),(0,o.kt)("br",null),"\nThe reason that I generate two separate packages, one with an async API and another with the synchronous version is due to the explicit usage of ",(0,o.kt)("inlineCode",{parentName:"p"},"IJSInProcessRuntime")," when using Blazor WebAssembly. This decision allows the APIs to be separate, and easily consumable from their repsective consuming Blazor apps, either Blazor server or Blazor WebAssembly. I might change it later to make this a consumer configuration, in that each consuming library will have to explicitly define a preprocessor directive to specify ",(0,o.kt)("inlineCode",{parentName:"p"},"IS_WEB_ASSEMBLY")," defined.")),(0,o.kt)("h2",{parentName:"admonition",id:"using-the-blazorsourcegenerators-package-"},"Using the ",(0,o.kt)("inlineCode",{parentName:"h2"},"Blazor.SourceGenerators")," package \ud83d\udce6"),(0,o.kt)("p",{parentName:"admonition"},"As an example, the official ",(0,o.kt)("a",{parentName:"p",href:"https://www.nuget.org/packages/Blazor.LocalStorage.WebAssembly"},(0,o.kt)("inlineCode",{parentName:"a"},"Blazor.LocalStorage.WebAssembly"))," package consumes the ",(0,o.kt)("a",{parentName:"p",href:"https://www.nuget.org/packages/Blazor.SourceGenerators"},(0,o.kt)("inlineCode",{parentName:"a"},"Blazor.SourceGenerators"))," package. It exposes extension methods specific to Blazor WebAssembly and the ",(0,o.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/docs/Web/API/Window/localStorage"},(0,o.kt)("inlineCode",{parentName:"a"},"localStorage"))," Web API."),(0,o.kt)("p",{parentName:"admonition"},"Consider the ",(0,o.kt)("em",{parentName:"p"},"IStorageService.cs")," C# file:"),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre",className:"language-csharp"},'// Copyright (c) David Pine. All rights reserved.\n// Licensed under the MIT License.\n\nnamespace Microsoft.JSInterop;\n\n[JSAutoGenericInterop(\n    TypeName = "Storage",\n    Implementation = "window.localStorage",\n    Url = "https://developer.mozilla.org/docs/Web/API/Window/localStorage",\n    GenericMethodDescriptors = new[]\n    {\n        "getItem",\n        "setItem:value"\n    })]\npublic partial interface IStorageService\n{\n}\n')),(0,o.kt)("p",{parentName:"admonition"},"This code designates itself into the ",(0,o.kt)("inlineCode",{parentName:"p"},"Microsoft.JSInterop")," namespace, making the source generated implementation available to anyone consumer who uses types from this namespace. It uses the ",(0,o.kt)("inlineCode",{parentName:"p"},"JSAutoGenericInterop")," to specify:"),(0,o.kt)("ul",{parentName:"admonition"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},'TypeName = "Storage"'),": sets the type to ",(0,o.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/docs/Web/API/Storage"},(0,o.kt)("inlineCode",{parentName:"a"},"Storage")),"."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},'Implementation = "window.localStorage"'),": expresses how to locate the implementation of the specified type from the globally scoped ",(0,o.kt)("inlineCode",{parentName:"li"},"window")," object, this is the ",(0,o.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/docs/Web/API/Window/localStorage"},(0,o.kt)("inlineCode",{parentName:"a"},"localStorage"))," implementation."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Url"),": sets the URL for the implementation."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"GenericMethodDescriptors"),": Defines the methods that should support generics as part of their source-generation. The ",(0,o.kt)("inlineCode",{parentName:"li"},"localStorage.getItem")," is specified to return a generic ",(0,o.kt)("inlineCode",{parentName:"li"},"TResult")," type, and the ",(0,o.kt)("inlineCode",{parentName:"li"},"localStorage.setItem")," has its parameter with a name of ",(0,o.kt)("inlineCode",{parentName:"li"},"value")," specified as a generic ",(0,o.kt)("inlineCode",{parentName:"li"},"TArg")," type.")),(0,o.kt)("blockquote",{parentName:"admonition"},(0,o.kt)("p",{parentName:"blockquote"},"The generic method descriptors syntax is:\n",(0,o.kt)("inlineCode",{parentName:"p"},'"methodName"')," for generic return type and ",(0,o.kt)("inlineCode",{parentName:"p"},'"methodName:parameterName"')," for generic parameter type.")),(0,o.kt)("p",{parentName:"admonition"},"The file needs to define an interface and it needs to be ",(0,o.kt)("inlineCode",{parentName:"p"},"partial"),", for example; ",(0,o.kt)("inlineCode",{parentName:"p"},"public partial interface"),". Decorating the class with the ",(0,o.kt)("inlineCode",{parentName:"p"},"JSAutoInterop")," (or `JSAutoGenericInterop) attribute will source generate the following C# code, as shown in the source generated ",(0,o.kt)("em",{parentName:"p"},"IStorageServiceService.g.cs"),":"),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre",className:"language-csharp"},'using Blazor.Serialization.Extensions;\nusing System.Text.Json;\n\n#nullable enable\nnamespace Microsoft.JSInterop;\n\n/// <summary>\n/// Source generated interface definition of the <c>Storage</c> type.\n/// </summary>\npublic partial interface IStorageServiceService\n{\n    /// <summary>\n    /// Source generated implementation of <c>window.localStorage.length</c>.\n    /// <a href="https://developer.mozilla.org/docs/Web/API/Storage/length"></a>\n    /// </summary>\n    double Length\n    {\n        get;\n    }\n\n    /// <summary>\n    /// Source generated implementation of <c>window.localStorage.clear</c>.\n    /// <a href="https://developer.mozilla.org/docs/Web/API/Storage/clear"></a>\n    /// </summary>\n    void Clear();\n\n    /// <summary>\n    /// Source generated implementation of <c>window.localStorage.getItem</c>.\n    /// <a href="https://developer.mozilla.org/docs/Web/API/Storage/getItem"></a>\n    /// </summary>\n    TValue? GetItem<TValue>(string key, JsonSerializerOptions? options = null);\n\n    /// <summary>\n    /// Source generated implementation of <c>window.localStorage.key</c>.\n    /// <a href="https://developer.mozilla.org/docs/Web/API/Storage/key"></a>\n    /// </summary>\n    string? Key(double index);\n\n    /// <summary>\n    /// Source generated implementation of <c>window.localStorage.removeItem</c>.\n    /// <a href="https://developer.mozilla.org/docs/Web/API/Storage/removeItem"></a>\n    /// </summary>\n    void RemoveItem(string key);\n\n    /// <summary>\n    /// Source generated implementation of <c>window.localStorage.setItem</c>.\n    /// <a href="https://developer.mozilla.org/docs/Web/API/Storage/setItem"></a>\n    /// </summary>\n    void SetItem<TValue>(string key, TValue value, JsonSerializerOptions? options = null);\n}\n')),(0,o.kt)("p",{parentName:"admonition"},"These internal extension methods rely on the ",(0,o.kt)("inlineCode",{parentName:"p"},"IJSInProcessRuntime")," to perform JavaScript interop. From the given ",(0,o.kt)("inlineCode",{parentName:"p"},"TypeName")," and corresponding ",(0,o.kt)("inlineCode",{parentName:"p"},"Implementation"),", the following code is also generated:"),(0,o.kt)("ul",{parentName:"admonition"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"IStorageService.g.cs"),": The interface for the corresponding ",(0,o.kt)("inlineCode",{parentName:"li"},"Storage")," Web API surface area."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"LocalStorgeService.g.cs"),": The ",(0,o.kt)("inlineCode",{parentName:"li"},"internal")," implementation of the ",(0,o.kt)("inlineCode",{parentName:"li"},"IStorageService")," interface."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"LocalStorageServiceCollectionExtensions.g.cs"),": Extension methods to add the ",(0,o.kt)("inlineCode",{parentName:"li"},"IStorageService")," service to the dependency injection ",(0,o.kt)("inlineCode",{parentName:"li"},"IServiceCollection"),".")),(0,o.kt)("p",{parentName:"admonition"},"Here is the source generated ",(0,o.kt)("inlineCode",{parentName:"p"},"LocalStorageService")," implementation:"),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre",className:"language-csharp"},'// Copyright (c) David Pine. All rights reserved.\n// Licensed under the MIT License:\n// https://github.com/IEvangelist/blazorators/blob/main/LICENSE\n// Auto-generated by blazorators.\n\n#nullable enable\n\nusing Blazor.Serialization.Extensions;\nusing Microsoft.JSInterop;\nusing System.Text.Json;\n\nnamespace Microsoft.JSInterop;\n\n/// <inheritdoc />\ninternal sealed class LocalStorageService : IStorageService\n{\n    private readonly IJSInProcessRuntime _javaScript = null;\n\n    /// <inheritdoc cref="P:Microsoft.JSInterop.IStorageService.Length" />\n    double IStorageService.Length => _javaScript.Invoke<double>("eval", new object[1]\n    {\n        "window.localStorage.length"\n    });\n\n    public LocalStorageService(IJSInProcessRuntime javaScript)\n    {\n        _javaScript = javaScript;\n    }\n\n    /// <inheritdoc cref="M:Microsoft.JSInterop.IStorageService.Clear" />\n    void IStorageService.Clear()\n    {\n        _javaScript.InvokeVoid("window.localStorage.clear");\n    }\n\n    /// <inheritdoc cref="M:Microsoft.JSInterop.IStorageService.GetItem``1(System.String,System.Text.Json.JsonSerializerOptions)" />\n    TValue? IStorageService.GetItem<TValue>(string key, JsonSerializerOptions? options)\n    {\n        return _javaScript.Invoke<string>("window.localStorage.getItem", new object[1]\n        {\n            key\n        }).FromJson<TValue>(options);\n    }\n\n    /// <inheritdoc cref="M:Microsoft.JSInterop.IStorageService.Key(System.Double)" />\n    string? IStorageService.Key(double index)\n    {\n        return _javaScript.Invoke<string>("window.localStorage.key", new object[1]\n        {\n            index\n        });\n    }\n\n    /// <inheritdoc cref="M:Microsoft.JSInterop.IStorageService.RemoveItem(System.String)" />\n    void IStorageService.RemoveItem(string key)\n    {\n        _javaScript.InvokeVoid("window.localStorage.removeItem", key);\n    }\n\n    /// <inheritdoc cref="M:Microsoft.JSInterop.IStorageService.SetItem``1(System.String,``0,System.Text.Json.JsonSerializerOptions)" />\n    void IStorageService.SetItem<TValue>(string key, TValue value, JsonSerializerOptions? options)\n    {\n        _javaScript.InvokeVoid("window.localStorage.setItem", key, value.ToJson<TValue>(options));\n    }\n}\n')),(0,o.kt)("p",{parentName:"admonition"},"Finally, here is the source generated service collection extension methods:"),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre",className:"language-csharp"},'using Microsoft.JSInterop;\n\nnamespace Microsoft.Extensions.DependencyInjection;\n\n/// <summary></summary>\npublic static class LocalStorageServiceCollectionExtensions\n{\n    /// <summary>\n    /// Adds the <see cref="IStorageService" /> service to the service collection.\n    /// </summary>\n    public static IServiceCollection AddLocalStorageServices(\n        this IServiceCollection services) =>\n        services.AddSingleton<IJSInProcessRuntime>(serviceProvider =>\n            (IJSInProcessRuntime)serviceProvider.GetRequiredService<IJSRuntime>())\n            .AddSingleton<IStorageService, LocalStorageService>();\n}\n')),(0,o.kt)("p",{parentName:"admonition"},"Putting this all together, the ",(0,o.kt)("inlineCode",{parentName:"p"},"Blazor.LocalStorage.WebAssembly")," NuGet package is actually less than 15 lines of code, and it generates full DI-ready services with JavaScript interop."),(0,o.kt)("p",{parentName:"admonition"},"The ",(0,o.kt)("inlineCode",{parentName:"p"},"Blazor.LocalStorage")," package, generates extensions on the ",(0,o.kt)("inlineCode",{parentName:"p"},"IJSRuntime")," type."),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre",className:"language-csharp"},'// Copyright (c) David Pine. All rights reserved.\n// Licensed under the MIT License.\n\nnamespace Microsoft.JSInterop;\n\n[JSAutoInterop(\n    TypeName = "Storage",\n    Implementation = "window.localStorage",\n    HostingModel = BlazorHostingModel.Server,\n    OnlyGeneratePureJS = true,\n    Url = "https://developer.mozilla.org/docs/Web/API/Window/localStorage")]\npublic partial interface IStorageServiceService\n{\n}\n')),(0,o.kt)("p",{parentName:"admonition"},"Generates the following:"),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre",className:"language-csharp"},'// Copyright (c) David Pine. All rights reserved.\n// Licensed under the MIT License:\n// https://github.com/IEvangelist/blazorators/blob/main/LICENSE\n// Auto-generated by blazorators.\n\nusing System.Threading.Tasks;\n\n#nullable enable\nnamespace Microsoft.JSInterop;\n\npublic partial interface IStorageServiceService\n{\n    /// <summary>\n    /// Source generated implementation of <c>window.localStorage.length</c>.\n    /// <a href="https://developer.mozilla.org/docs/Web/API/Storage/length"></a>\n    /// </summary>\n    ValueTask<double> Length\n    {\n        get;\n    }\n\n    /// <summary>\n    /// Source generated implementation of <c>window.localStorage.clear</c>.\n    /// <a href="https://developer.mozilla.org/docs/Web/API/Storage/clear"></a>\n    /// </summary>\n    ValueTask ClearAsync();\n\n    /// <summary>\n    /// Source generated implementation of <c>window.localStorage.getItem</c>.\n    /// <a href="https://developer.mozilla.org/docs/Web/API/Storage/getItem"></a>\n    /// </summary>\n    ValueTask<string?> GetItemAsync(string key);\n\n    /// <summary>\n    /// Source generated implementation of <c>window.localStorage.key</c>.\n    /// <a href="https://developer.mozilla.org/docs/Web/API/Storage/key"></a>\n    /// </summary>\n    ValueTask<string?> KeyAsync(double index);\n\n    /// <summary>\n    /// Source generated implementation of <c>window.localStorage.removeItem</c>.\n    /// <a href="https://developer.mozilla.org/docs/Web/API/Storage/removeItem"></a>\n    /// </summary>\n    ValueTask RemoveItemAsync(string key);\n\n    /// <summary>\n    /// Source generated implementation of <c>window.localStorage.setItem</c>.\n    /// <a href="https://developer.mozilla.org/docs/Web/API/Storage/setItem"></a>\n    /// </summary>\n    ValueTask SetItemAsync(string key, string value);\n}\n')),(0,o.kt)("p",{parentName:"admonition"},"Notice, that since the generic method descriptors are not added generics are not supported. This is not yet implemented as I've been focusing on WebAssembly scenarios."),(0,o.kt)("h2",{parentName:"admonition",id:"design-goals-"},"Design goals \ud83c\udfaf"),(0,o.kt)("p",{parentName:"admonition"},"I was hoping to use the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/microsoft/TypeScript/blob/315b807489b8ff3a892179488fb0c00398d9b2c3/lib/lib.dom.d.ts"},"TypeScript lib.dom.d.ts")," bits as input. This input would be read, parsed, and cached within the generator. The generator code would be capable of generating extension methods on the ",(0,o.kt)("inlineCode",{parentName:"p"},"IJSRuntime"),". Additionally, the generator will create object graphs from the well know web APIs."),(0,o.kt)("p",{parentName:"admonition"},"Using the ",(0,o.kt)("em",{parentName:"p"},"lib.dom.d.ts")," file, we could hypothetically parse various TypeScript type definitions. These definitions could then be converted to C# counterparts. While I realize that not all TypeScript is mappable to C#, there is a bit of room for interpretation."),(0,o.kt)("p",{parentName:"admonition"},"Consider the following type definition:"),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"/**\nAn object can programmatically obtain the position of the device.\nIt gives Web content access to the location of the device. This allows\na Web site or app to offer customized results based on the user's location.\n*/\ninterface Geolocation {\n\n    clearWatch(watchId: number): void;\n\n    getCurrentPosition(\n        successCallback: PositionCallback,\n        errorCallback?: PositionErrorCallback | null,\n        options?: PositionOptions): void;\n    \n    watchPosition(\n        successCallback: PositionCallback,\n        errorCallback?: PositionErrorCallback | null,\n        options?: PositionOptions): number;\n}\n")),(0,o.kt)("blockquote",{parentName:"admonition"},(0,o.kt)("p",{parentName:"blockquote"},"This is from the TypeScript repo, ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/microsoft/TypeScript/blob/315b807489b8ff3a892179488fb0c00398d9b2c3/lib/lib.dom.d.ts#L5497-L5502"},"lib.dom.d.ts file lines 5,498-5,502"),".")),(0,o.kt)("h3",{parentName:"admonition",id:"example-consumption-of-source-generator-\ufe0f"},"Example consumption of source generator \u2714\ufe0f"),(0,o.kt)("p",{parentName:"admonition"},"Ideally, I would like to be able to define a C# class such as this:"),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre",className:"language-csharp"},'// Copyright (c) David Pine. All rights reserved.\n// Licensed under the MIT License.\n\nnamespace Microsoft.JSInterop;\n\n[JSAutoInterop(\n    TypeName = "Geolocation",\n    Implementation = "window.navigator.geolocation",\n    Url = "https://developer.mozilla.org/docs/Web/API/Geolocation")]\npublic partial interface IGeolocationService\n{\n}\n')),(0,o.kt)("p",{parentName:"admonition"},"The source generator will expose the ",(0,o.kt)("inlineCode",{parentName:"p"},"JSAutoInteropAttribute"),", and consuming libraries will decorate their classes with it. The generator code will see this class, and use the ",(0,o.kt)("inlineCode",{parentName:"p"},"TypeName")," from the attribute to find the corresponding type to implement.\nWith the type name, the generator will generate the corresponding methods, and return types. The method implementations will be extensions of the ",(0,o.kt)("inlineCode",{parentName:"p"},"IJSRuntime"),"."),(0,o.kt)("p",{parentName:"admonition"},"The following is an example resulting source generated ",(0,o.kt)("inlineCode",{parentName:"p"},"IGeolocationService")," object:"),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre",className:"language-csharp"},'namespace Microsoft.JSInterop;\n\npublic partial interface IGeolocationService\n{\n    /// <summary>\n    /// Source generated implementation of <c>window.navigator.geolocation.clearWatch</c>.\n    /// <a href="https://developer.mozilla.org/docs/Web/API/Geolocation/clearWatch"></a>\n    /// </summary>\n    void ClearWatch(double watchId);\n\n    /// <summary>\n    /// Source generated implementation of <c>window.navigator.geolocation.getCurrentPosition</c>.\n    /// <a href="https://developer.mozilla.org/docs/Web/API/Geolocation/getCurrentPosition"></a>\n    /// </summary>\n    /// <param name="component">The calling Razor (or Blazor) component.</param>\n    /// <param name="onSuccessCallbackMethodName">Expects the name of a <c>"JSInvokableAttribute"</c> C# method with the following <c>System.Action{GeolocationPosition}"</c>.</param>\n    /// <param name="onErrorCallbackMethodName">Expects the name of a <c>"JSInvokableAttribute"</c> C# method with the following <c>System.Action{GeolocationPositionError}"</c>.</param>\n    /// <param name="options">The <c>PositionOptions</c> value.</param>\n    void GetCurrentPosition<TComponent>(\n        TComponent component,\n        string onSuccessCallbackMethodName,\n        string? onErrorCallbackMethodName = null,\n        PositionOptions? options = null)\n        where TComponent : class;\n\n    /// <summary>\n    /// Source generated implementation of <c>window.navigator.geolocation.watchPosition</c>.\n    /// <a href="https://developer.mozilla.org/docs/Web/API/Geolocation/watchPosition"></a>\n    /// </summary>\n    /// <param name="component">The calling Razor (or Blazor) component.</param>\n    /// <param name="onSuccessCallbackMethodName">Expects the name of a <c>"JSInvokableAttribute"</c> C# method with the following <c>System.Action{GeolocationPosition}"</c>.</param>\n    /// <param name="onErrorCallbackMethodName">Expects the name of a <c>"JSInvokableAttribute"</c> C# method with the following <c>System.Action{GeolocationPositionError}"</c>.</param>\n    /// <param name="options">The <c>PositionOptions</c> value.</param>\n    double WatchPosition<TComponent>(\n        TComponent component, \n        string onSuccessCallbackMethodName, \n        string? onErrorCallbackMethodName = null, \n        PositionOptions? options = null) \n        where TComponent : class;\n}\n\n')),(0,o.kt)("p",{parentName:"admonition"},"The generator will also produce the corresponding APIs object types. For example, the Geolocation API defines the following:"),(0,o.kt)("ul",{parentName:"admonition"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"GeolocationService")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"PositionOptions")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"GeolocationCoordinates")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"GeolocationPosition")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"GeolocationPositionError"))),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre",className:"language-csharp"},'namespace Microsoft.JSInterop;\n\n/// <inheritdoc />\ninternal sealed class GeolocationService : IGeolocationService\n{\n    private readonly IJSInProcessRuntime _javaScript = null;\n\n    public GeolocationService(IJSInProcessRuntime javaScript)\n    {\n        _javaScript = javaScript;\n    }\n\n    /// <inheritdoc cref="M:Microsoft.JSInterop.IGeolocationService.ClearWatch(System.Double)" />\n    void IGeolocationService.ClearWatch(double watchId)\n    {\n        _javaScript.InvokeVoid("window.navigator.geolocation.clearWatch", watchId);\n    }\n\n    /// <inheritdoc cref="M:Microsoft.JSInterop.IGeolocationService.GetCurrentPosition``1(``0,System.String,System.String,Microsoft.JSInterop.PositionOptions)" />\n    void IGeolocationService.GetCurrentPosition<TComponent>(\n        TComponent component, \n        string onSuccessCallbackMethodName, \n        string? onErrorCallbackMethodName, \n        PositionOptions? options)\n    {\n        _javaScript.InvokeVoid("blazorators.getCurrentPosition", DotNetObjectReference.Create<TComponent>(component), onSuccessCallbackMethodName, onErrorCallbackMethodName, options);\n    }\n\n    /// <inheritdoc cref="M:Microsoft.JSInterop.IGeolocationService.WatchPosition``1(``0,System.String,System.String,Microsoft.JSInterop.PositionOptions)" />\n    double IGeolocationService.WatchPosition<TComponent>(\n        TComponent component, \n        string onSuccessCallbackMethodName, \n        string? onErrorCallbackMethodName, \n        PositionOptions? options)\n    {\n        return _javaScript.Invoke<double>("blazorators.watchPosition", new object[4]\n        {\n            DotNetObjectReference.Create<TComponent>(component),\n            onSuccessCallbackMethodName,\n            onErrorCallbackMethodName,\n            options\n        });\n    }\n}\n')),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre",className:"language-csharp"},'using System.Text.Json.Serialization;\n\nnamespace Microsoft.JSInterop;\n\n/// <summary>\n/// Source-generated object representing an ideally immutable <c>GeolocationPosition</c> value.\n/// </summary>\npublic class GeolocationPosition\n{\n    /// <summary>\n    /// Source-generated property representing the <c>GeolocationPosition.coords</c> value.\n    /// </summary>\n    [JsonPropertyName("coords")]\n    public GeolocationCoordinates Coords\n    {\n        get;\n        set;\n    }\n\n    /// <summary>\n    /// Source-generated property representing the <c>GeolocationPosition.timestamp</c> value.\n    /// </summary>\n    [JsonPropertyName("timestamp")]\n    public long Timestamp\n    {\n        get;\n        set;\n    }\n\n    /// <summary>\n    /// Source-generated property representing the <c>GeolocationPosition.timestamp</c> value, \n    /// converted as a <see cref="T:System.DateTime" /> in UTC.\n    /// </summary>\n    [JsonIgnore]\n    public DateTime TimestampAsUtcDateTime => Timestamp.ToDateTimeFromUnix();\n}\n\n/// <summary>\n/// Source-generated object representing an ideally immutable <c>GeolocationCoordinates</c> value.\n/// </summary>\npublic class GeolocationCoordinates\n{\n    /// <summary>\n    /// Source-generated property representing the <c>GeolocationCoordinates.accuracy</c> value.\n    /// </summary>\n    [JsonPropertyName("accuracy")]\n    public double Accuracy\n    {\n        get;\n        set;\n    }\n\n    /// <summary>\n    /// Source-generated property representing the <c>GeolocationCoordinates.altitude</c> value.\n    /// </summary>\n    [JsonPropertyName("altitude")]\n    public double? Altitude\n    {\n        get;\n        set;\n    }\n\n    /// <summary>\n    /// Source-generated property representing the <c>GeolocationCoordinates.altitudeAccuracy</c> value.\n    /// </summary>\n    [JsonPropertyName("altitudeAccuracy")]\n    public double? AltitudeAccuracy\n    {\n        get;\n        set;\n    }\n\n    /// <summary>\n    /// Source-generated property representing the <c>GeolocationCoordinates.heading</c> value.\n    /// </summary>\n    [JsonPropertyName("heading")]\n    public double? Heading\n    {\n        get;\n        set;\n    }\n\n    /// <summary>\n    /// Source-generated property representing the <c>GeolocationCoordinates.latitude</c> value.\n    /// </summary>\n    [JsonPropertyName("latitude")]\n    public double Latitude\n    {\n        get;\n        set;\n    }\n\n    /// <summary>\n    /// Source-generated property representing the <c>GeolocationCoordinates.longitude</c> value.\n    /// </summary>\n    [JsonPropertyName("longitude")]\n    public double Longitude\n    {\n        get;\n        set;\n    }\n\n    /// <summary>\n    /// Source-generated property representing the <c>GeolocationCoordinates.speed</c> value.\n    /// </summary>\n    [JsonPropertyName("speed")]\n    public double? Speed\n    {\n        get;\n        set;\n    }\n}\n\n/// <summary>\n/// Source-generated object representing an ideally immutable <c>GeolocationPositionError</c> value.\n/// </summary>\npublic class GeolocationPositionError\n{\n    /// <summary>\n    /// Source-generated property representing the <c>GeolocationPositionError.code</c> value.\n    /// </summary>\n    [JsonPropertyName("code")]\n    public double Code\n    {\n        get;\n        set;\n    }\n\n    /// <summary>\n    /// Source-generated property representing the <c>GeolocationPositionError.message</c> value.\n    /// </summary>\n    [JsonPropertyName("message")]\n    public string Message\n    {\n        get;\n        set;\n    }\n\n    /// <summary>\n    /// Source-generated property representing the <c>GeolocationPositionError.PERMISSION_DENIED</c> value.\n    /// </summary>\n    [JsonPropertyName("PERMISSION_DENIED")]\n    public double PERMISSION_DENIED\n    {\n        get;\n        set;\n    }\n\n    /// <summary>\n    /// Source-generated property representing the <c>GeolocationPositionError.POSITION_UNAVAILABLE</c> value.\n    /// </summary>\n    [JsonPropertyName("POSITION_UNAVAILABLE")]\n    public double POSITION_UNAVAILABLE\n    {\n        get;\n        set;\n    }\n\n    /// <summary>\n    /// Source-generated property representing the <c>GeolocationPositionError.TIMEOUT</c> value.\n    /// </summary>\n    [JsonPropertyName("TIMEOUT")]\n    public double TIMEOUT\n    {\n        get;\n        set;\n    }\n}\n\n// Additional models omitted for brevity...\n')),(0,o.kt)("p",{parentName:"admonition"},"In addition to this ",(0,o.kt)("inlineCode",{parentName:"p"},"GeolocationExtensions")," class being generated, the generator will also generate a bit of JavaScript. Some methods cannot be directly invoked as they define callbacks. The approach the generator takes is to delegate callback methods on a given ",(0,o.kt)("inlineCode",{parentName:"p"},"T")," instance, with the ",(0,o.kt)("inlineCode",{parentName:"p"},"JSInvokable")," attribute. Our generator should also warn when the corresponding ",(0,o.kt)("inlineCode",{parentName:"p"},"T")," instance doesn't define a matching method name that is also ",(0,o.kt)("inlineCode",{parentName:"p"},"JSInvokable"),"."),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},'const getCurrentLocation =\n    (dotnetObj, successMethodName, errorMethodName, options) =>\n    {\n        if (navigator && navigator.geolocation) {\n            navigator.geolocation.getCurrentPosition(\n                (position) => {\n                    dotnetObj.invokeMethodAsync(\n                        successMethodName, position);\n                },\n                (error) => {\n                    dotnetObj.invokeMethodAsync(\n                        errorMethodName, error);\n                },\n                options);\n        }\n    };\n\n// Other implementations omitted for brevity...\n// But we\'d also define a "watchPosition" wrapper.\n// The "clearWatch" is a straight pass-thru, no wrapper needed.\n\nwindow.blazorator = {\n    getCurrentLocation,\n    watchPosition\n};\n')),(0,o.kt)("p",{parentName:"admonition"},"The resulting JavaScript will have to be exposed to consuming projects. Additionally, consuming projects will need to adhere to extension method consumption semantics. When calling generated extension methods that require .NET object references of type ",(0,o.kt)("inlineCode",{parentName:"p"},"T"),", the callback names should be marked with ",(0,o.kt)("inlineCode",{parentName:"p"},"JSInvokable")," and the ",(0,o.kt)("inlineCode",{parentName:"p"},"nameof")," operator should be used to ensure names are accurate. Consider the following example consuming Blazor component:"),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre",className:"language-csharp"},"using Microsoft.AspNetCore.Components;\nusing Microsoft.JSInterop;\nusing Microsoft.JSInterop.Extensions;\n\nnamespace Example.Components;\n\n// This is the other half of ConsumingComponent.razor\npublic sealed partial class ConsumingComponent\n{\n    [Inject]\n    public IJSRuntime JavaScript { get; set; }\n\n    protected override async Task OnAfterRenderAsync(bool firstRender)\n    {\n        if (firstRender)\n        {\n            await JavaScript.GetCurrentPositionAsync(\n                this,\n                nameof(OnCoordinatesPermitted),\n                nameof(OnErrorRequestingCoordinates));\n        }\n    }\n\n    [JSInvokable]\n    public async Task OnCoordinatesPermitted(\n        GeolocationPosition position)\n    {\n        // TODO: consume/handle position.\n\n        await InvokeAsync(StateHasChanged);\n    }\n\n    [JSInvokable]\n    public async Task OnErrorRequestingCoordinates(\n        GeolocationPositionError error)\n    {\n        // TODO: consume/handle error.\n\n        await InvokeAsync(StateHasChanged);\n    }\n}\n")),(0,o.kt)("h2",{parentName:"admonition",id:"pseudocode-and-logical-flow-\ufe0f"},"Pseudocode and logical flow \u27a1\ufe0f"),(0,o.kt)("ol",{parentName:"admonition"},(0,o.kt)("li",{parentName:"ol"},"Consumer decorates a ",(0,o.kt)("inlineCode",{parentName:"li"},"static partial class")," with the ",(0,o.kt)("inlineCode",{parentName:"li"},"JSAutoInteropAttribute"),"."),(0,o.kt)("li",{parentName:"ol"},"Source generator is called:",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"JavaScriptInteropGenerator.Initialize")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"JavaScriptInteropGenerator.Execute")))),(0,o.kt)("li",{parentName:"ol"},"The generator determines the ",(0,o.kt)("inlineCode",{parentName:"li"},"TypeName")," from the attribute of the contextual class.",(0,o.kt)("ol",{parentName:"li"},(0,o.kt)("li",{parentName:"ol"},"The ",(0,o.kt)("inlineCode",{parentName:"li"},"TypeName")," is used to look up the corresponding TypeScript type definition."),(0,o.kt)("li",{parentName:"ol"},"If found, and a valid API - attempt source generation.")))),(0,o.kt)("h2",{parentName:"admonition",id:"future-work"},"Future work"),(0,o.kt)("ul",{parentName:"admonition"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/docs/Web/API/CredentialsContainer"},"https://developer.mozilla.org/docs/Web/API/CredentialsContainer")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/docs/Web/API/WakeLock"},"https://developer.mozilla.org/docs/Web/API/WakeLock")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/docs/Web/API/Navigator/hid"},"https://developer.mozilla.org/docs/Web/API/Navigator/hid")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/docs/Web/API/Web_Crypto_API"},"https://developer.mozilla.org/docs/Web/API/Web_Crypto_API"))),(0,o.kt)("h2",{parentName:"admonition",id:"known-limitations-\ufe0f"},"Known limitations \u26a0\ufe0f"),(0,o.kt)("p",{parentName:"admonition"},"At the time of writing, only pure JavaScript interop is supported. It is a stretch goal to add the following (currently missing) features:"),(0,o.kt)("ul",{parentName:"admonition"},(0,o.kt)("li",{parentName:"ul"},"Source generate corresponding (and supporting) JavaScript files.",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"We'd need to accept a desired output path from the consumer, ",(0,o.kt)("inlineCode",{parentName:"li"},"JavaScriptOutputPath"),"."),(0,o.kt)("li",{parentName:"ul"},"We would need to append all JavaScript into a single builder, and emit it collectively."))),(0,o.kt)("li",{parentName:"ul"},"Allow for declarative and custom type mappings, for example; suppose the consumer wants the API to use generics instead of ",(0,o.kt)("inlineCode",{parentName:"li"},"string"),".",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"We'd need to expose a ",(0,o.kt)("inlineCode",{parentName:"li"},"TypeConverter")," parameter and allow for consumers to implement their own."),(0,o.kt)("li",{parentName:"ul"},"We'd provide a default one for standard JSON serialization, ",(0,o.kt)("inlineCode",{parentName:"li"},"StringTypeConverter")," (maybe make this the default).")))),(0,o.kt)("h2",{parentName:"admonition",id:"references-and-resources-"},"References and resources \ud83d\udcd1"),(0,o.kt)("ul",{parentName:"admonition"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/docs/Web/API"},"MDN Web Docs: Web APIs")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/microsoft/TypeScript-DOM-lib-generator"},"TypeScript DOM lib generator")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://docs.microsoft.com/aspnet/core/blazor/javascript-interoperability/call-javascript-from-dotnet"},"ASP.NET Core Docs: Blazor JavaScript interop")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/jaredpar/channel9-source-generators"},"Jared Parsons - GitHub Channel 9 Source Generators")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://docs.microsoft.com/dotnet/csharp/roslyn-sdk/source-generators-overview"},".NET Docs: C# Source Generators")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/dotnet/roslyn/blob/main/docs/features/source-generators.cookbook.md"},"Source Generators Cookbook")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/dotnet/roslyn/blob/main/docs/features/source-generators.md"},"Source Generators: Design Document"))),(0,o.kt)("h2",{parentName:"admonition",id:"contributors-"},"Contributors \u2728"),(0,o.kt)("p",{parentName:"admonition"},"Thanks goes to these wonderful people (",(0,o.kt)("a",{parentName:"p",href:"https://allcontributors.org/docs/en/emoji-key"},"emoji key"),"):"),(0,o.kt)("table",null,(0,o.kt)("tbody",null,(0,o.kt)("tr",null,(0,o.kt)("td",{align:"center",valign:"top",width:"14.28%"},(0,o.kt)("a",{href:"https://www.cnblogs.com/weihanli"},(0,o.kt)("img",{src:"https://avatars.githubusercontent.com/u/7604648?v=4?s=100",width:"100px;",alt:"Weihan Li"}),(0,o.kt)("br",null),(0,o.kt)("sub",null,(0,o.kt)("b",null,"Weihan Li"))),(0,o.kt)("br",null),(0,o.kt)("a",{href:"https://github.com/IEvangelist/blazorators/commits?author=WeihanLi",title:"Code"},"\ud83d\udcbb")),(0,o.kt)("td",{align:"center",valign:"top",width:"14.28%"},(0,o.kt)("a",{href:"https://www.microsoft.com"},(0,o.kt)("img",{src:"https://avatars.githubusercontent.com/u/7679720?v=4?s=100",width:"100px;",alt:"David Pine"}),(0,o.kt)("br",null),(0,o.kt)("sub",null,(0,o.kt)("b",null,"David Pine"))),(0,o.kt)("br",null),(0,o.kt)("a",{href:"https://github.com/IEvangelist/blazorators/commits?author=IEvangelist",title:"Code"},"\ud83d\udcbb")," ",(0,o.kt)("a",{href:"#design-IEvangelist",title:"Design"},"\ud83c\udfa8")," ",(0,o.kt)("a",{href:"https://github.com/IEvangelist/blazorators/pulls?q=is%3Apr+reviewed-by%3AIEvangelist",title:"Reviewed Pull Requests"},"\ud83d\udc40")," ",(0,o.kt)("a",{href:"#ideas-IEvangelist",title:"Ideas, Planning, & Feedback"},"\ud83e\udd14")," ",(0,o.kt)("a",{href:"https://github.com/IEvangelist/blazorators/commits?author=IEvangelist",title:"Tests"},"\u26a0\ufe0f")),(0,o.kt)("td",{align:"center",valign:"top",width:"14.28%"},(0,o.kt)("a",{href:"https://nimbleapps.cloud"},(0,o.kt)("img",{src:"https://avatars.githubusercontent.com/u/1657085?v=4?s=100",width:"100px;",alt:"Robert McLaws"}),(0,o.kt)("br",null),(0,o.kt)("sub",null,(0,o.kt)("b",null,"Robert McLaws"))),(0,o.kt)("br",null),(0,o.kt)("a",{href:"https://github.com/IEvangelist/blazorators/commits?author=robertmclaws",title:"Code"},"\ud83d\udcbb")," ",(0,o.kt)("a",{href:"https://github.com/IEvangelist/blazorators/issues?q=author%3Arobertmclaws",title:"Bug reports"},"\ud83d\udc1b")," ",(0,o.kt)("a",{href:"#ideas-robertmclaws",title:"Ideas, Planning, & Feedback"},"\ud83e\udd14")),(0,o.kt)("td",{align:"center",valign:"top",width:"14.28%"},(0,o.kt)("a",{href:"http://colinsalmcorner.com"},(0,o.kt)("img",{src:"https://avatars.githubusercontent.com/u/1932561?v=4?s=100",width:"100px;",alt:"Colin Dembovsky"}),(0,o.kt)("br",null),(0,o.kt)("sub",null,(0,o.kt)("b",null,"Colin Dembovsky"))),(0,o.kt)("br",null),(0,o.kt)("a",{href:"#infra-colindembovsky",title:"Infrastructure (Hosting, Build-Tools, etc)"},"\ud83d\ude87")," ",(0,o.kt)("a",{href:"#platform-colindembovsky",title:"Packaging/porting to new platform"},"\ud83d\udce6")),(0,o.kt)("td",{align:"center",valign:"top",width:"14.28%"},(0,o.kt)("a",{href:"http://tanayparikh.com"},(0,o.kt)("img",{src:"https://avatars.githubusercontent.com/u/14852843?v=4?s=100",width:"100px;",alt:"Tanay Parikh"}),(0,o.kt)("br",null),(0,o.kt)("sub",null,(0,o.kt)("b",null,"Tanay Parikh"))),(0,o.kt)("br",null),(0,o.kt)("a",{href:"https://github.com/IEvangelist/blazorators/commits?author=TanayParikh",title:"Documentation"},"\ud83d\udcd6")),(0,o.kt)("td",{align:"center",valign:"top",width:"14.28%"},(0,o.kt)("a",{href:"https://github.com/taori"},(0,o.kt)("img",{src:"https://avatars.githubusercontent.com/u/5545184?v=4?s=100",width:"100px;",alt:"Andreas M\xfcller"}),(0,o.kt)("br",null),(0,o.kt)("sub",null,(0,o.kt)("b",null,"Andreas M\xfcller"))),(0,o.kt)("br",null),(0,o.kt)("a",{href:"https://github.com/IEvangelist/blazorators/issues?q=author%3Ataori",title:"Bug reports"},"\ud83d\udc1b")," ",(0,o.kt)("a",{href:"https://github.com/IEvangelist/blazorators/commits?author=taori",title:"Code"},"\ud83d\udcbb")),(0,o.kt)("td",{align:"center",valign:"top",width:"14.28%"},(0,o.kt)("a",{href:"https://www.mahmudx.com"},(0,o.kt)("img",{src:"https://avatars.githubusercontent.com/u/16564582?v=4?s=100",width:"100px;",alt:"Mahmudul Hasan"}),(0,o.kt)("br",null),(0,o.kt)("sub",null,(0,o.kt)("b",null,"Mahmudul Hasan"))),(0,o.kt)("br",null),(0,o.kt)("a",{href:"https://github.com/IEvangelist/blazorators/commits?author=MahmudX",title:"Code"},"\ud83d\udcbb"))),(0,o.kt)("tr",null,(0,o.kt)("td",{align:"center",valign:"top",width:"14.28%"},(0,o.kt)("a",{href:"https://github.com/fabiansanchez18"},(0,o.kt)("img",{src:"https://avatars.githubusercontent.com/u/106093861?v=4?s=100",width:"100px;",alt:"fabiansanchez18"}),(0,o.kt)("br",null),(0,o.kt)("sub",null,(0,o.kt)("b",null,"fabiansanchez18"))),(0,o.kt)("br",null),(0,o.kt)("a",{href:"https://github.com/IEvangelist/blazorators/issues?q=author%3Afabiansanchez18",title:"Bug reports"},"\ud83d\udc1b")),(0,o.kt)("td",{align:"center",valign:"top",width:"14.28%"},(0,o.kt)("a",{href:"http://weblogs.asp.net/sfeldman"},(0,o.kt)("img",{src:"https://avatars.githubusercontent.com/u/1309622?v=4?s=100",width:"100px;",alt:"Sean Feldman"}),(0,o.kt)("br",null),(0,o.kt)("sub",null,(0,o.kt)("b",null,"Sean Feldman"))),(0,o.kt)("br",null),(0,o.kt)("a",{href:"https://github.com/IEvangelist/blazorators/issues?q=author%3ASeanFeldman",title:"Bug reports"},"\ud83d\udc1b")),(0,o.kt)("td",{align:"center",valign:"top",width:"14.28%"},(0,o.kt)("a",{href:"https://github.com/daver77"},(0,o.kt)("img",{src:"https://avatars.githubusercontent.com/u/2369739?v=4?s=100",width:"100px;",alt:"daver77"}),(0,o.kt)("br",null),(0,o.kt)("sub",null,(0,o.kt)("b",null,"daver77"))),(0,o.kt)("br",null),(0,o.kt)("a",{href:"#ideas-daver77",title:"Ideas, Planning, & Feedback"},"\ud83e\udd14"))))),(0,o.kt)("p",{parentName:"admonition"},"This project follows the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/all-contributors/all-contributors"},"all-contributors")," specification. Contributions of any kind are welcome!")),(0,o.kt)("h3",{id:"about"},"About"),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"Generate javascript interop code for Blazor WASM projects.")),(0,o.kt)("h2",{id:"how-to-use"},"How to use"),(0,o.kt)("h3",{id:"example-source-csproj-source-files"},"Example (source csproj, source files)"),(0,o.kt)(r.Z,{mdxType:"Tabs"},(0,o.kt)(i.Z,{value:"csproj",label:"CSharp Project",mdxType:"TabItem"},(0,o.kt)("p",null,"This is the CSharp Project that references ",(0,o.kt)("strong",{parentName:"p"},"Blazorators")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-xml",metastring:"showLineNumbers {16}",showLineNumbers:!0,"{16}":!0},'<Project Sdk="Microsoft.NET.Sdk.BlazorWebAssembly">\n\n  <PropertyGroup>\n    <TargetFramework>net8.0</TargetFramework>\n    <Nullable>enable</Nullable>\n    <ImplicitUsings>enable</ImplicitUsings>\n  </PropertyGroup>\n\n  <ItemGroup>\n    <PackageReference Include="Microsoft.AspNetCore.Components.WebAssembly" Version="8.0.1" />\n    <PackageReference Include="Microsoft.AspNetCore.Components.WebAssembly.DevServer" Version="8.0.1" PrivateAssets="all" />\n  </ItemGroup>\n\n    <ItemGroup>\n        <PackageReference Include="Blazor.Serialization" Version="8.0.0" />\n        <PackageReference Include="Blazor.SourceGenerators"\n                          Version="8.0.0"\n                          OutputItemType="Analyzer"\n                          SetTargetFramework="TargetFramework=netstandard2.0"\n                          ReferenceOutputAssembly="false">\n        </PackageReference>\n    </ItemGroup>\n    <PropertyGroup>\n        <EmitCompilerGeneratedFiles>true</EmitCompilerGeneratedFiles>\n        <CompilerGeneratedFilesOutputPath>$(BaseIntermediateOutputPath)\\GX</CompilerGeneratedFilesOutputPath>\n    </PropertyGroup>\n</Project>\n\n\n\n'))),(0,o.kt)(i.Z,{value:"D:\\gth\\RSCG_Examples\\v2\\rscg_examples\\Blazorators\\src\\BlazorApp2\\Program.cs",label:"Program.cs",mdxType:"TabItem"},(0,o.kt)("p",null,"  This is the use of ",(0,o.kt)("strong",{parentName:"p"},"Blazorators")," in ",(0,o.kt)("em",{parentName:"p"},"Program.cs")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-csharp",metastring:"showLineNumbers",showLineNumbers:!0},'using BlazorApp2;\nusing Microsoft.AspNetCore.Components.Web;\nusing Microsoft.AspNetCore.Components.WebAssembly.Hosting;\n\nvar builder = WebAssemblyHostBuilder.CreateDefault(args);\nbuilder.RootComponents.Add<App>("#app");\nbuilder.RootComponents.Add<HeadOutlet>("head::after");\n\nbuilder.Services.AddScoped(sp => new HttpClient { BaseAddress = new Uri(builder.HostEnvironment.BaseAddress) });\nbuilder.Services.AddLocalStorageServices();\n\nawait builder.Build().RunAsync();\n\n'))),(0,o.kt)(i.Z,{value:"D:\\gth\\RSCG_Examples\\v2\\rscg_examples\\Blazorators\\src\\BlazorApp2\\ILocalStorageService.cs",label:"ILocalStorageService.cs",mdxType:"TabItem"},(0,o.kt)("p",null,"  This is the use of ",(0,o.kt)("strong",{parentName:"p"},"Blazorators")," in ",(0,o.kt)("em",{parentName:"p"},"ILocalStorageService.cs")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-csharp",metastring:"showLineNumbers",showLineNumbers:!0},'namespace BlazorApp2;\n\n[JSAutoGenericInterop(\n    TypeName = "Storage",\n    Implementation = "window.localStorage",\n    Url = "https://developer.mozilla.org/docs/Web/API/Window/localStorage",\n    GenericMethodDescriptors = new[]\n    {\n        "getItem",\n        "setItem:value"\n    })]\n\npublic partial interface ILocalStorageService\n{\n}\n\n\n\n'))),(0,o.kt)(i.Z,{value:"D:\\gth\\RSCG_Examples\\v2\\rscg_examples\\Blazorators\\src\\BlazorApp2\\Pages\\Home.razor",label:"Home.razor",mdxType:"TabItem"},(0,o.kt)("p",null,"  This is the use of ",(0,o.kt)("strong",{parentName:"p"},"Blazorators")," in ",(0,o.kt)("em",{parentName:"p"},"Home.razor")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-csharp",metastring:"showLineNumbers",showLineNumbers:!0},'@page "/"\n@inject ILocalStorageService MyLocalStorage;\n\n<PageTitle>Home</PageTitle>\n\n<h1>Hello, world!</h1>\n\nPlease refresh the page to see the value persisted in local storage.\n@{\n    var name = MyLocalStorage.GetItem<string>("name");\n    if (name != null)\n    {\n        <p>Hi, @name</p>\n    }\n    else\n    {\n        <p>Hi, stranger</p>\n    }\n    MyLocalStorage.SetItem("name", "Andrei Ignat");\n}\n\n')))),(0,o.kt)("h3",{id:"generated-files"},"Generated Files"),(0,o.kt)("p",null,"Those are taken from $(BaseIntermediateOutputPath)\\GX"),(0,o.kt)(r.Z,{mdxType:"Tabs"},(0,o.kt)(i.Z,{value:"D:\\gth\\RSCG_Examples\\v2\\rscg_examples\\Blazorators\\src\\BlazorApp2\\obj\\GX\\Blazor.SourceGenerators\\Blazor.SourceGenerators.JavaScriptInteropGenerator\\BlazorHostingModel.g.cs",label:"BlazorHostingModel.g.cs",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-csharp",metastring:"showLineNumbers",showLineNumbers:!0},"/// <summary>\n/// The Blazor hosting model source, either WebAssembly or Server.\n/// </summary>\npublic enum BlazorHostingModel\n{\n    /// <summary>\n    /// This is the default. Use this to source generate targeting the synchronous <c>IJSInProcessRuntime</c> type.\n    /// </summary>\n    WebAssembly,\n\n    /// <summary>\n    /// Use this to source generate targeting the synchronous <c>IJSRuntime</c> type.\n    /// </summary>\n    Server\n};\n\n"))),(0,o.kt)(i.Z,{value:"D:\\gth\\RSCG_Examples\\v2\\rscg_examples\\Blazorators\\src\\BlazorApp2\\obj\\GX\\Blazor.SourceGenerators\\Blazor.SourceGenerators.JavaScriptInteropGenerator\\ILocalStorageService.g.cs",label:"ILocalStorageService.g.cs",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-csharp",metastring:"showLineNumbers",showLineNumbers:!0},'// Copyright (c) David Pine. All rights reserved.\n// Licensed under the MIT License:\n// https://bit.ly/blazorators-license\n// Auto-generated by blazorators.\nusing Blazor.Serialization.Extensions;\nusing System.Text.Json;\n\n#nullable enable\nnamespace BlazorApp2;\n/// <summary>\n/// Source generated interface definition of the <c>Storage</c> type.\n/// </summary>\npublic partial interface ILocalStorageService\n{\n    /// <summary>\n    /// Source generated implementation of <c>window.localStorage.clear</c>.\n    /// <a href="https://developer.mozilla.org/docs/Web/API/Storage/clear"></a>\n    /// </summary>\n    void Clear();\n    /// <summary>\n    /// Source generated implementation of <c>window.localStorage.getItem</c>.\n    /// <a href="https://developer.mozilla.org/docs/Web/API/Storage/getItem"></a>\n    /// </summary>\n    TValue? GetItem<TValue>(string key, JsonSerializerOptions? options = null);\n    /// <summary>\n    /// Source generated implementation of <c>window.localStorage.key</c>.\n    /// <a href="https://developer.mozilla.org/docs/Web/API/Storage/key"></a>\n    /// </summary>\n    string? Key(double index);\n    /// <summary>\n    /// Source generated implementation of <c>window.localStorage.removeItem</c>.\n    /// <a href="https://developer.mozilla.org/docs/Web/API/Storage/removeItem"></a>\n    /// </summary>\n    void RemoveItem(string key);\n    /// <summary>\n    /// Source generated implementation of <c>window.localStorage.setItem</c>.\n    /// <a href="https://developer.mozilla.org/docs/Web/API/Storage/setItem"></a>\n    /// </summary>\n    void SetItem<TValue>(string key, TValue value, JsonSerializerOptions? options = null);\n    /// <summary>\n    /// Source generated implementation of <c>window.localStorage.length</c>.\n    /// <a href="https://developer.mozilla.org/docs/Web/API/Storage/length"></a>\n    /// </summary>\n    double Length { get; }\n}\n'))),(0,o.kt)(i.Z,{value:"D:\\gth\\RSCG_Examples\\v2\\rscg_examples\\Blazorators\\src\\BlazorApp2\\obj\\GX\\Blazor.SourceGenerators\\Blazor.SourceGenerators.JavaScriptInteropGenerator\\JSAutoGenericInteropAttribute.g.cs",label:"JSAutoGenericInteropAttribute.g.cs",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-csharp",metastring:"showLineNumbers",showLineNumbers:!0},'#nullable enable\n/// <summary>\n/// Use this attribute on <code>public static partial</code> extension method classes.\n/// For example:\n/// <example>\n/// <code>\n/// [JSAutoGenericInterop(\n///    TypeName = "Storage",\n///    Implementation = "window.localStorage",\n///    HostingModel = BlazorHostingModel.WebAssembly,\n///    Url = "https://developer.mozilla.org/docs/Web/API/Window/localStorage",\n///    GenericMethodDescriptors = new[]\n///    {\n///        "getItem",\n///        "setItem:value"\n///    })]\n/// public static partial LocalStorageExtensions\n/// {\n/// }\n/// </code>\n/// </example>\n/// This will source generate all the extension methods for the IJSInProcessRuntime type for the localStorage APIs.\n/// </summary>\npublic class JSAutoGenericInteropAttribute : JSAutoInteropAttribute\n{\n    /// <summary>\n    /// The descriptors that define which APIs are to use default JSON serialization and support generics.\n    /// For example:\n    /// <code>\n    /// new[]\n    /// {\n    ///     "getItem",      // Serializes the return type of getItem as TValue\n    ///     "setItem:value" // Serializes the value parameter of the setItem TValue\n    /// }\n    /// </code>\n    /// </summary>\n    public string[] GenericMethodDescriptors { get; set; } = null!;\n\n    /// <summary>\n    /// The overrides that define which APIs to override (only applicable for pure JavaScript).\n    /// For example:\n    /// <code>\n    /// new[]\n    /// {\n    ///     "getVoices",  // A pure JS method with by this name will have a custom impl.\n    /// }\n    /// </code>\n    /// </summary>\n    public string[] PureJavaScriptOverrides { get; set; } = null!;\n}\n\n'))),(0,o.kt)(i.Z,{value:"D:\\gth\\RSCG_Examples\\v2\\rscg_examples\\Blazorators\\src\\BlazorApp2\\obj\\GX\\Blazor.SourceGenerators\\Blazor.SourceGenerators.JavaScriptInteropGenerator\\JSAutoInteropAttribute.g.cs",label:"JSAutoInteropAttribute.g.cs",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-csharp",metastring:"showLineNumbers",showLineNumbers:!0},'#nullable enable\n/// <summary>\n/// Use this attribute on <code>public static partial</code> extension method classes.\n/// For example:\n/// <code>\n/// [JSAutoInterop(\n///    TypeName = "Storage",\n///    Implementation = "window.localStorage",\n///    HostingModel = BlazorHostingModel.WebAssembly,\n///    Url = "https://developer.mozilla.org/docs/Web/API/Window/localStorage")]\n/// public static partial LocalStorageExtensions\n/// {\n/// }\n/// </code>\n/// This will source generate all the extension methods for the IJSInProcessRuntime type for the localStorage APIs.\n/// </summary>\n[AttributeUsage(\n    AttributeTargets.Interface,\n    Inherited = false,\n    AllowMultiple = false)]\npublic class JSAutoInteropAttribute : Attribute\n{\n    /// <summary>\n    /// The type name that corresponds to the lib.dom.d.ts interface. For example, <c>"Geolocation"</c>.\n    /// For more information, search \'interface {Name}\'\n    /// <a href=\'https://raw.githubusercontent.com/microsoft/TypeScript/main/lib/lib.dom.d.ts\'>here for types</a>.\n    /// </summary>\n    public string TypeName { get; set; } = null!;\n\n    /// <summary>\n    /// The path from the <c>window</c> object to the corresponding <see cref="TypeName"/> implementation.\n    /// For example, if the <see cref="TypeName"/> was <c>"Geolocation"</c>, this would be\n    /// <c>"window.navigator.geolocation"</c> (or <c>"navigator.geolocation"</c>).\n    /// </summary>\n    public string Implementation { get; set; } = null!;\n\n    /// <summary>\n    /// Whether to generate only pure JavaScript functions that do not require callbacks.\n    /// For example, <c>"Geolocation.clearWatch"</c> is consider pure, but <c>"Geolocation.watchPosition"</c> is not.\n    /// Defaults to <c>true</c>.\n    /// </summary>\n    public bool OnlyGeneratePureJS { get; set; } = true;\n\n    /// <summary>\n    /// The Blazor hosting model to generate source for. WebAssembly creates <c>IJSInProcessRuntime</c> extensions,\n    /// while Server creates <c>IJSRuntime</c> extensions. Defaults to <see cref="BlazorHostingModel.WebAssembly" />.\n    /// </summary>\n    public BlazorHostingModel HostingModel { get; set; } = BlazorHostingModel.WebAssembly;\n\n    /// <summary>\n    /// The optional URL to the corresponding API.\n    /// </summary>\n    public string? Url { get; set; }\n\n    /// <summary>\n    /// An optional array of TypeScript type declarations sources. Valid values are URLs or file paths.\n    /// </summary>\n    public string[]? TypeDeclarationSources { get; set; }\n}\n\n'))),(0,o.kt)(i.Z,{value:"D:\\gth\\RSCG_Examples\\v2\\rscg_examples\\Blazorators\\src\\BlazorApp2\\obj\\GX\\Blazor.SourceGenerators\\Blazor.SourceGenerators.JavaScriptInteropGenerator\\LocalStorageService.g.cs",label:"LocalStorageService.g.cs",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-csharp",metastring:"showLineNumbers",showLineNumbers:!0},'// Copyright (c) David Pine. All rights reserved.\n// Licensed under the MIT License:\n// https://bit.ly/blazorators-license\n// Auto-generated by blazorators.\nusing Blazor.Serialization.Extensions;\nusing System.Text.Json;\n\n#nullable enable\nnamespace BlazorApp2;\n/// <inheritdoc/>\ninternal sealed class LocalStorageService : ILocalStorageService\n{\n    internal readonly IJSInProcessRuntime _javaScript = null !;\n    public LocalStorageService(IJSInProcessRuntime javaScript) => _javaScript = javaScript;\n    /// <inheritdoc cref = "ILocalStorageService.Clear"/>\n    void ILocalStorageService.Clear() => _javaScript.InvokeVoid("window.localStorage.clear");\n    /// <inheritdoc cref = "ILocalStorageService.GetItem"/>\n    TValue? ILocalStorageService.GetItem<TValue>(string key, JsonSerializerOptions? options)\n        where TValue : default => _javaScript.Invoke<string?>("window.localStorage.getItem", key).FromJson<TValue>(options);\n    /// <inheritdoc cref = "ILocalStorageService.Key"/>\n    string? ILocalStorageService.Key(double index) => _javaScript.Invoke<string?>("window.localStorage.key", index);\n    /// <inheritdoc cref = "ILocalStorageService.RemoveItem"/>\n    void ILocalStorageService.RemoveItem(string key) => _javaScript.InvokeVoid("window.localStorage.removeItem", key);\n    /// <inheritdoc cref = "ILocalStorageService.SetItem"/>\n    void ILocalStorageService.SetItem<TValue>(string key, TValue value, JsonSerializerOptions? options) => _javaScript.InvokeVoid("window.localStorage.setItem", key, value.ToJson(options));\n    /// <inheritdoc cref = "ILocalStorageService.Length"/>\n    double ILocalStorageService.Length => _javaScript.Invoke<double>("eval", "window.localStorage.length");\n}\n'))),(0,o.kt)(i.Z,{value:"D:\\gth\\RSCG_Examples\\v2\\rscg_examples\\Blazorators\\src\\BlazorApp2\\obj\\GX\\Blazor.SourceGenerators\\Blazor.SourceGenerators.JavaScriptInteropGenerator\\LocalStorageServiceCollectionExtensions.g.cs",label:"LocalStorageServiceCollectionExtensions.g.cs",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-csharp",metastring:"showLineNumbers",showLineNumbers:!0},'// Copyright (c) David Pine. All rights reserved.\n// Licensed under the MIT License:\n// https://github.com/IEvangelist/blazorators/blob/main/LICENSE\n// Auto-generated by blazorators.\n\nusing Microsoft.JSInterop;\n\nnamespace Microsoft.Extensions.DependencyInjection;\n\n/// <summary></summary>\npublic static class LocalStorageServiceCollectionExtensions\n{\n    /// <summary>\n    /// Adds the <see cref="ILocalStorageService" /> service to the service collection.\n    /// </summary>\n    public static IServiceCollection AddLocalStorageServices(\n        this IServiceCollection services) =>\n        services.AddSingleton<IJSInProcessRuntime>(serviceProvider =>\n            (IJSInProcessRuntime)serviceProvider.GetRequiredService<IJSRuntime>())\n            .AddSingleton<ILocalStorageService, LocalStorageService>();\n}\n\n'))),(0,o.kt)(i.Z,{value:"D:\\gth\\RSCG_Examples\\v2\\rscg_examples\\Blazorators\\src\\BlazorApp2\\obj\\GX\\Blazor.SourceGenerators\\Blazor.SourceGenerators.JavaScriptInteropGenerator\\RecordCompat.g.cs",label:"RecordCompat.g.cs",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-csharp",metastring:"showLineNumbers",showLineNumbers:!0},"using System.ComponentModel;\n\nnamespace System.Runtime.CompilerServices\n{\n    [EditorBrowsable(EditorBrowsableState.Never)]\n    internal class IsExternalInit { }\n}\n")))),(0,o.kt)("h2",{id:"useful"},"Useful"),(0,o.kt)("h3",{id:"download-example-net--c-"},"Download Example (.NET  C# )"),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},(0,o.kt)("a",{target:"_blank",href:n(6225).Z},"Download Example project Blazorators "))),(0,o.kt)("h3",{id:"share-blazorators"},"Share Blazorators"),(0,o.kt)("ul",null,(0,o.kt)("li",null,(0,o.kt)("a",{href:"https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FBlazorators&quote=Blazorators",title:"Share on Facebook",target:"_blank"},"Share on Facebook")),(0,o.kt)("li",null,(0,o.kt)("a",{href:"https://twitter.com/intent/tweet?source=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FBlazorators&text=Blazorators:%20https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FBlazorators",target:"_blank",title:"Tweet"},"Share in Twitter")),(0,o.kt)("li",null,(0,o.kt)("a",{href:"http://www.reddit.com/submit?url=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FBlazorators&title=Blazorators",target:"_blank",title:"Submit to Reddit"},"Share on Reddit")),(0,o.kt)("li",null,(0,o.kt)("a",{href:"http://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FBlazorators&title=Blazorators&summary=&source=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FBlazorators",target:"_blank",title:"Share on LinkedIn"},"Share on Linkedin"))),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://ignatandrei.github.io/RSCG_Examples/v2/docs/Blazorators"},"https://ignatandrei.github.io/RSCG_Examples/v2/docs/Blazorators")),(0,o.kt)("h3",{id:"in-the-same-category-blazor---1-other-generators"},"In the same category (Blazor) - 1 other generators"),(0,o.kt)("h4",{id:"golivegeneratorblazorinterop"},(0,o.kt)("a",{parentName:"h4",href:"/docs/GoLive.Generator.BlazorInterop"},"GoLive.Generator.BlazorInterop")))}h.isMDXComponent=!0},6225:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/files/Blazorators-82395ac821304daed5c1f3245576b1fe.zip"}}]);