"use strict";(self.webpackChunkrscg_examples=self.webpackChunkrscg_examples||[]).push([[9063],{9694:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>u,contentTitle:()=>h,default:()=>g,frontMatter:()=>d,metadata:()=>s,toc:()=>p});const s=JSON.parse('{"id":"RSCG-Examples/sourcedepend","title":"113 - sourcedepend","description":"Generating constructor for DI","source":"@site/docs/RSCG-Examples/sourcedepend.md","sourceDirName":"RSCG-Examples","slug":"/sourcedepend","permalink":"/RSCG_Examples/v2/docs/sourcedepend","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1130,"frontMatter":{"sidebar_position":1130,"title":"113 - sourcedepend","description":"Generating constructor for DI","slug":"/sourcedepend"},"sidebar":"tutorialSidebar","previous":{"title":"112 - OptionToStringGenerator","permalink":"/RSCG_Examples/v2/docs/OptionToStringGenerator"},"next":{"title":"114 - corecraft","permalink":"/RSCG_Examples/v2/docs/corecraft"}}');var t=r(74848),i=r(28453),o=r(11470),a=r(19365),c=r(14252),l=r(52684);const d={sidebar_position:1130,title:"113 - sourcedepend",description:"Generating constructor for DI",slug:"/sourcedepend"},h="sourcedepend  by Colin Wilmans",u={},p=[{value:"NuGet / site data",id:"nuget--site-data",level:2},{value:"Details",id:"details",level:2},{value:"Info",id:"info",level:3},{value:"Original Readme",id:"original-readme",level:3},{value:"Version history",id:"version-history",level:3},{value:"How to use it",id:"how-to-use-it",level:2},{value:"Alternative assignment",id:"alternative-assignment",level:3},{value:"Inheritance",id:"inheritance",level:3},{value:"Add construction work",id:"add-construction-work",level:3},{value:"Installing",id:"installing",level:2},{value:"Contributing",id:"contributing",level:2},{value:"Maintainers/Core team",id:"maintainerscore-team",level:2},{value:"License",id:"license",level:2},{value:"About",id:"about",level:3},{value:"How to use",id:"how-to-use",level:2},{value:"Example (source csproj, source files)",id:"example-source-csproj-source-files",level:3},{value:"Generated Files",id:"generated-files",level:3},{value:"Useful",id:"useful",level:2},{value:"Download Example (.NET  C#)",id:"download-example-net--c",level:3},{value:"Share sourcedepend",id:"share-sourcedepend",level:3},...l.RM];function m(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"sourcedepend--by-colin-wilmans",children:"sourcedepend  by Colin Wilmans"})}),"\n",(0,t.jsx)(c.A,{toc:p}),"\n",(0,t.jsx)(n.h2,{id:"nuget--site-data",children:"NuGet / site data"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"https://www.nuget.org/packages/sourcedepend/",children:(0,t.jsx)(n.img,{src:"https://img.shields.io/nuget/dt/sourcedepend?label=sourcedepend",alt:"Nuget"})}),"\n",(0,t.jsx)(n.a,{href:"https://github.com/crwsolutions/sourcedepend",children:(0,t.jsx)(n.img,{src:"https://img.shields.io/github/last-commit/crwsolutions/sourcedepend?label=updated",alt:"GitHub last commit"})}),"\n",(0,t.jsx)(n.img,{src:"https://img.shields.io/github/stars/crwsolutions/sourcedepend?style=social",alt:"GitHub Repo stars"})]}),"\n",(0,t.jsx)(n.h2,{id:"details",children:"Details"}),"\n",(0,t.jsx)(n.h3,{id:"info",children:"Info"}),"\n",(0,t.jsxs)(n.admonition,{type:"info",children:[(0,t.jsxs)(n.p,{children:["Name: ",(0,t.jsx)(n.strong,{children:"sourcedepend"})]}),(0,t.jsx)(n.p,{children:"A source generator for C# that uses Roslyn (the C# compiler) to allow you to generate your constructor for injection during compile time."}),(0,t.jsx)(n.p,{children:"Author: Colin Wilmans"}),(0,t.jsxs)(n.p,{children:["NuGet:\n",(0,t.jsx)(n.em,{children:(0,t.jsx)(n.a,{href:"https://www.nuget.org/packages/sourcedepend/",children:"https://www.nuget.org/packages/sourcedepend/"})})]}),(0,t.jsxs)(n.p,{children:["You can find more details at ",(0,t.jsx)(n.a,{href:"https://github.com/crwsolutions/sourcedepend",children:"https://github.com/crwsolutions/sourcedepend"})]}),(0,t.jsxs)(n.p,{children:["Source: ",(0,t.jsx)(n.a,{href:"https://github.com/crwsolutions/sourcedepend",children:"https://github.com/crwsolutions/sourcedepend"})]})]}),"\n",(0,t.jsx)(n.h3,{id:"original-readme",children:"Original Readme"}),"\n",(0,t.jsxs)(n.admonition,{type:"note",children:[(0,t.jsx)(n.h1,{id:"source-depend",children:"Source Depend"}),(0,t.jsxs)(n.p,{children:["A source generator for C# that uses ",(0,t.jsx)(n.a,{href:"https://github.com/dotnet/roslyn",children:"Roslyn"})," (the C# compiler) to help you with dependency injection (DI). It saves you from writing the constructor because this will be written for you (during compile time). Just tag the member with a ",(0,t.jsx)(n.strong,{children:"[Dependency]"})," attribute."]}),(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"https://www.nuget.org/packages/sourcedepend/",children:(0,t.jsx)(n.img,{src:"https://img.shields.io/nuget/v/sourcedepend?color=blue",alt:"NuGet version (sourcedepend)"})}),"\n",(0,t.jsx)(n.a,{href:"https://github.com/crwsolutions/sourcedepend/blob/master/LICENSE.txt",children:(0,t.jsx)(n.img,{src:"https://img.shields.io/github/license/crwsolutions/sourcedepend.svg",alt:"License"})})]}),(0,t.jsx)(n.h3,{id:"version-history",children:"Version history"}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"v0.1. First implementation."}),"\n",(0,t.jsxs)(n.li,{children:["v0.2. Complete rewrite from ISourceGenerator to IIncrementalGenerator, this should boost performance","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"keep sealed and accessibility intact."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["v0.3. Complete Rewrite: reorganized the code.","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Allow one level of inheritance."}),"\n"]}),"\n"]}),"\n"]}),(0,t.jsx)(n.h2,{id:"how-to-use-it",children:"How to use it"}),(0,t.jsx)(n.p,{children:"Install it and add the attribute to the fields or properties you want be set in your constructor, like so:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"public partial class ExampleService\n{\n    [Dependency]\n    private readonly AnotherService anotherService;\n\n    [Dependency]\n    AnotherService Prop { get; }\n}\n"})}),(0,t.jsx)(n.h3,{id:"alternative-assignment",children:"Alternative assignment"}),(0,t.jsx)(n.p,{children:"It is also possible that the generated assignment is to an alternative property:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"public partial class ExampleService\n{\n    [Dependency(nameof(BindingContext))]\n    AnotherService ViewModel => BindingContext as AnotherService;\n}\n"})}),(0,t.jsx)(n.h3,{id:"inheritance",children:"Inheritance"}),(0,t.jsxs)(n.p,{children:["And it is possible to inherit from a base implementation that also uses the ",(0,t.jsx)(n.strong,{children:"[Dependency]"})," attribute:"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"internal partial class BaseExampleService\n{\n    [Dependency]\n    private readonly IForBaseService _someBaseService;\n}\n\ninternal partial class ExampleService : BaseExampleService\n{\n\n}\n"})}),(0,t.jsx)(n.h3,{id:"add-construction-work",children:"Add construction work"}),(0,t.jsx)(n.p,{children:"Because your constructor is highjacked, there are the alternative methods PreConstruct/PostConstruct to do your construction work:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'public partial class ExampleService\n{\n    [Dependency]\n    private readonly AnotherService anotherService;\n\n    ///This method will be called before the generated assignments\n    partial void PreConstruct()\n    {\n        Initialize()\n    }\n\n    ///This method will be called after the generated assignments\n    partial void PostConstruct() => anotherService.ConstructValue = "Hello from post-construct!";\n}\n'})}),(0,t.jsx)(n.p,{children:"These samples give the following combined generated code:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"namespace ConsoleApp\n{\n    public partial class ExampleService\n    {\n        public ExampleService(ConsoleApp.IAnotherService anotherService, ConsoleApp.AnotherService prop, ConsoleApp.AnotherService viewModel, ConsoleApp.IForBaseService someBaseService) : base(someBaseService)\n        {\n            PreConstruct();\n\n            this.anotherService = anotherService;\n            Prop = prop;\n            BindingContext = viewModel;\n\n            PostConstruct();\n        }\n\n        partial void PreConstruct();\n        partial void PostConstruct();\n    }\n}\n\nnamespace ConsoleApp\n{\n    /// <inheritdoc/>\n    internal partial class BaseExampleService\n    {\n        public BaseExampleService(ConsoleApp.IForBaseService someBaseService)\n        {\n            PreConstruct();\n\n            this._someBaseService = someBaseService;\n\n            PostConstruct();\n        }\n\n        partial void PreConstruct();\n        partial void PostConstruct();\n    }\n}\n"})}),(0,t.jsx)(n.h2,{id:"installing",children:"Installing"}),(0,t.jsxs)(n.p,{children:["The package is available ",(0,t.jsx)(n.a,{href:"https://www.nuget.org/packages/sourcedepend",children:"on NuGet"}),".\nTo install from the command line:"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"dotnet add package sourcedepend\n"})}),(0,t.jsx)(n.p,{children:"Or use the Package Manager in Visual Studio."}),(0,t.jsx)(n.h2,{id:"contributing",children:"Contributing"}),(0,t.jsx)(n.p,{children:"The main supported IDE for development is Visual Studio 2019."}),(0,t.jsx)(n.p,{children:"Questions, comments, bug reports, and pull requests are all welcome.\nBug reports that include steps to reproduce (including code) are\npreferred. Even better, make them in the form of pull requests."}),(0,t.jsx)(n.h2,{id:"maintainerscore-team",children:"Maintainers/Core team"}),(0,t.jsxs)(n.p,{children:["Contributors can be found at the ",(0,t.jsx)(n.a,{href:"https://github.com/crwsolutions/sourcedepend/graphs/contributors",children:"contributors"})," page on Github."]}),(0,t.jsx)(n.h2,{id:"license",children:"License"}),(0,t.jsxs)(n.p,{children:["This software is open source, licensed under the MIT License.\nSee ",(0,t.jsx)(n.a,{href:"https://github.com/crwsolutions/sourcedepend/blob/master/LICENSE",children:"LICENSE"})," for details.\nCheck out the terms of the license before you contribute, fork, copy or do anything\nwith the code. If you decide to contribute you agree to grant copyright of all your contribution to this project and agree to\nmention clearly if do not agree to these terms. Your work will be licensed with the project at MIT, along the rest of the code."]})]}),"\n",(0,t.jsx)(n.h3,{id:"about",children:"About"}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsx)(n.p,{children:"Generating constructor for DI"})}),"\n",(0,t.jsx)(n.h2,{id:"how-to-use",children:"How to use"}),"\n",(0,t.jsx)(n.h3,{id:"example-source-csproj-source-files",children:"Example (source csproj, source files)"}),"\n",(0,t.jsxs)(o.A,{children:[(0,t.jsxs)(a.A,{value:"csproj",label:"CSharp Project",children:[(0,t.jsxs)(n.p,{children:["This is the CSharp Project that references ",(0,t.jsx)(n.strong,{children:"sourcedepend"})]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",metastring:"showLineNumbers {16}",children:'<Project Sdk="Microsoft.NET.Sdk">\n\n  <PropertyGroup>\n    <OutputType>Exe</OutputType>\n    <TargetFramework>net8.0</TargetFramework>\n    <ImplicitUsings>enable</ImplicitUsings>\n    <Nullable>enable</Nullable>\n  </PropertyGroup>\n\n\t<PropertyGroup>\n\t\t<EmitCompilerGeneratedFiles>true</EmitCompilerGeneratedFiles>\n\t\t<CompilerGeneratedFilesOutputPath>$(BaseIntermediateOutputPath)\\GX</CompilerGeneratedFilesOutputPath>\n\t</PropertyGroup>\n\n\t<ItemGroup>\n\t  <PackageReference Include="SourceDepend" Version="0.3.0" />\n\t</ItemGroup>\n\n</Project>\n\n'})})]}),(0,t.jsxs)(a.A,{value:"D:\\gth\\RSCG_Examples\\v2\\rscg_examples\\sourcedepend\\src\\ConstructorDemo\\Program.cs",label:"Program.cs",children:[(0,t.jsxs)(n.p,{children:["This is the use of ",(0,t.jsx)(n.strong,{children:"sourcedepend"})," in ",(0,t.jsx)(n.em,{children:"Program.cs"})]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",metastring:"showLineNumbers ",children:'using CtorDemo;\n\nvar p = new Person("Andrei", "Ignat");\n\nConsole.WriteLine(p.FullName());\n'})})]}),(0,t.jsxs)(a.A,{value:"D:\\gth\\RSCG_Examples\\v2\\rscg_examples\\sourcedepend\\src\\ConstructorDemo\\Person.cs",label:"Person.cs",children:[(0,t.jsxs)(n.p,{children:["This is the use of ",(0,t.jsx)(n.strong,{children:"sourcedepend"})," in ",(0,t.jsx)(n.em,{children:"Person.cs"})]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",metastring:"showLineNumbers ",children:'\nnamespace CtorDemo;\ninternal partial class Person\n{\n    [Dependency]\n    public readonly string? FirstName;\n    [Dependency]\n    public readonly string? LastName;\n    \n    public string FullName() => $"{FirstName} {LastName}";\n\n    partial void PostConstruct()\n    {\n        Console.WriteLine("Person constructed");\n    }\n    partial void PreConstruct()\n    {\n        Console.WriteLine("Person constructing");\n    }\n\n}\n\n'})})]})]}),"\n",(0,t.jsx)(n.h3,{id:"generated-files",children:"Generated Files"}),"\n",(0,t.jsx)(n.p,{children:"Those are taken from $(BaseIntermediateOutputPath)\\GX"}),"\n",(0,t.jsxs)(o.A,{children:[(0,t.jsx)(a.A,{value:"D:\\gth\\RSCG_Examples\\v2\\rscg_examples\\sourcedepend\\src\\ConstructorDemo\\obj\\GX\\SourceDepend\\SourceDepend.DependenciesGenerator\\Dependency.Generated.g.cs",label:"Dependency.Generated.g.cs",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",metastring:"showLineNumbers ",children:'// <auto-generated />\n\n/// <summary>\n/// Injects this item in the constructor. This will also highjack your constructor, so if you have any construct business, use PreConstruct() or PostConstruct() methods.\n/// </summary>\n/// <remarks>\n/// Make sure your class is partial.\n/// </remarks>\n[System.AttributeUsage(System.AttributeTargets.Field | System.AttributeTargets.Property, Inherited = false, AllowMultiple = false)]\n[System.Diagnostics.Conditional("DependencyGenerator_DEBUG")]\ninternal sealed class DependencyAttribute : System.Attribute\n{\n    internal DependencyAttribute(string alternativePropertyName = null) { }\n}\n\n'})})}),(0,t.jsx)(a.A,{value:"D:\\gth\\RSCG_Examples\\v2\\rscg_examples\\sourcedepend\\src\\ConstructorDemo\\obj\\GX\\SourceDepend\\SourceDepend.DependenciesGenerator\\Person_Dependency.g.cs",label:"Person_Dependency.g.cs",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",metastring:"showLineNumbers ",children:"// <auto-generated/>\n#pragma warning disable\n#nullable enable\nnamespace CtorDemo\n{\n    /// <inheritdoc/>\n    internal partial class Person\n    {\n        public Person(string? FirstName, string? LastName)\n        {\n            PreConstruct();\n\n            this.FirstName = FirstName;\n            this.LastName = LastName;\n\n            PostConstruct();\n        }\n\n        partial void PreConstruct();\n        partial void PostConstruct();\n    }\n}\n\n"})})})]}),"\n",(0,t.jsx)(n.h2,{id:"useful",children:"Useful"}),"\n",(0,t.jsx)(n.h3,{id:"download-example-net--c",children:"Download Example (.NET  C#)"}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:r(60237).A+"",children:"Download Example project sourcedepend "})})}),"\n",(0,t.jsx)(n.h3,{id:"share-sourcedepend",children:"Share sourcedepend"}),"\n",(0,t.jsxs)("ul",{children:[(0,t.jsx)("li",{children:(0,t.jsx)("a",{href:"https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2Fsourcedepend&quote=sourcedepend",title:"Share on Facebook",target:"_blank",children:"Share on Facebook"})}),(0,t.jsx)("li",{children:(0,t.jsx)("a",{href:"https://twitter.com/intent/tweet?source=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2Fsourcedepend&text=sourcedepend:%20https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2Fsourcedepend",target:"_blank",title:"Tweet",children:"Share in Twitter"})}),(0,t.jsx)("li",{children:(0,t.jsx)("a",{href:"http://www.reddit.com/submit?url=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2Fsourcedepend&title=sourcedepend",target:"_blank",title:"Submit to Reddit",children:"Share on Reddit"})}),(0,t.jsx)("li",{children:(0,t.jsx)("a",{href:"http://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2Fsourcedepend&title=sourcedepend&summary=&source=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2Fsourcedepend",target:"_blank",title:"Share on LinkedIn",children:"Share on Linkedin"})})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://ignatandrei.github.io/RSCG_Examples/v2/docs/sourcedepend",children:"https://ignatandrei.github.io/RSCG_Examples/v2/docs/sourcedepend"})}),"\n",(0,t.jsx)(n.p,{children:"aaa"}),"\n",(0,t.jsx)(l.Ay,{})]})}function g(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(m,{...e})}):m(e)}},52684:(e,n,r)=>{r.d(n,{Ay:()=>a,RM:()=>i});var s=r(74848),t=r(28453);const i=[{value:"Category &quot;Constructor&quot; has the following generators:",id:"category-constructor-has-the-following-generators",level:3},{value:"See category",id:"see-category",level:3}];function o(e){const n={a:"a",h3:"h3",p:"p",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h3,{id:"category-constructor-has-the-following-generators",children:'Category "Constructor" has the following generators:'}),"\n",(0,s.jsxs)(n.p,{children:["1 ",(0,s.jsx)(n.a,{href:"/docs/AutoConstructor",children:"AutoConstructor"})]}),"\n",(0,s.jsxs)(n.p,{children:["2 ",(0,s.jsx)(n.a,{href:"/docs/AutoCtor",children:"AutoCtor"})]}),"\n",(0,s.jsxs)(n.p,{children:["3 ",(0,s.jsx)(n.a,{href:"/docs/AutoDeconstruct",children:"AutoDeconstruct"})]}),"\n",(0,s.jsxs)(n.p,{children:["4 ",(0,s.jsx)(n.a,{href:"/docs/ConstructorGenerator",children:"ConstructorGenerator"})]}),"\n",(0,s.jsxs)(n.p,{children:["5 ",(0,s.jsx)(n.a,{href:"/docs/PrimaryParameter",children:"PrimaryParameter"})]}),"\n",(0,s.jsxs)(n.p,{children:["6 ",(0,s.jsx)(n.a,{href:"/docs/QuickConstructor",children:"QuickConstructor"})]}),"\n",(0,s.jsxs)(n.p,{children:["7 ",(0,s.jsx)(n.a,{href:"/docs/sourcedepend",children:"sourcedepend"})]}),"\n",(0,s.jsx)(n.h3,{id:"see-category",children:"See category"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"/docs/Categories/Constructor",children:"Constructor"})})]})}function a(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},60237:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/files/sourcedepend-2b006a7bf47a3397f3de58de2bb5f462.zip"}}]);