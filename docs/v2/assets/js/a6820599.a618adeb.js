"use strict";(self.webpackChunkrscg_examples=self.webpackChunkrscg_examples||[]).push([[3379],{17333:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>p,default:()=>h,frontMatter:()=>l,metadata:()=>c,toc:()=>m});var a=n(87462),i=(n(67294),n(3905)),r=n(73992),o=n(18679),s=n(68839);const l={sidebar_position:1380,title:"138 - RossLean.StringificationGenerator",description:"Generating constructor code as string",slug:"/RossLean.StringificationGenerator"},p="RossLean.StringificationGenerator  by Alex Kalfakakos",c={unversionedId:"RSCG-Examples/RossLean.StringificationGenerator",id:"RSCG-Examples/RossLean.StringificationGenerator",title:"138 - RossLean.StringificationGenerator",description:"Generating constructor code as string",source:"@site/docs/RSCG-Examples/RossLean.StringificationGenerator.md",sourceDirName:"RSCG-Examples",slug:"/RossLean.StringificationGenerator",permalink:"/RSCG_Examples/v2/docs/RossLean.StringificationGenerator",draft:!1,tags:[],version:"current",sidebarPosition:1380,frontMatter:{sidebar_position:1380,title:"138 - RossLean.StringificationGenerator",description:"Generating constructor code as string",slug:"/RossLean.StringificationGenerator"},sidebar:"tutorialSidebar",previous:{title:"137 - Minerals.AutoInterfaces",permalink:"/RSCG_Examples/v2/docs/Minerals.AutoInterfaces"},next:{title:"v1",permalink:"/RSCG_Examples/v2/docs/v1"}},d={},m=[{value:"Nuget / site data",id:"nuget--site-data",level:2},{value:"Details",id:"details",level:2},{value:"Info",id:"info",level:3},{value:"Original Readme",id:"original-readme",level:3},{value:"About",id:"about",level:3},{value:"How to use",id:"how-to-use",level:2},{value:"Example ( source csproj, source files )",id:"example--source-csproj-source-files-",level:3},{value:"Generated Files",id:"generated-files",level:3},{value:"Usefull",id:"usefull",level:2},{value:"Download Example (.NET  C# )",id:"download-example-net--c-",level:3},{value:"Share RossLean.StringificationGenerator",id:"share-rossleanstringificationgenerator",level:3},{value:"In the same category (CodeToString) - 2 other generators",id:"in-the-same-category-codetostring---2-other-generators",level:3},{value:"CodeAnalysis",id:"codeanalysis",level:4},{value:"SourceGenerator.Helper.CopyCode",id:"sourcegeneratorhelpercopycode",level:4}],u={toc:m},g="wrapper";function h(e){let{components:t,...l}=e;return(0,i.kt)(g,(0,a.Z)({},u,l,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"rossleanstringificationgenerator--by-alex-kalfakakos"},"RossLean.StringificationGenerator  by Alex Kalfakakos"),(0,i.kt)(s.Z,{toc:m,mdxType:"TOCInline"}),(0,i.kt)("h2",{id:"nuget--site-data"},"Nuget / site data"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://www.nuget.org/packages/RossLean.StringificationGenerator/"},(0,i.kt)("img",{parentName:"a",src:"https://img.shields.io/nuget/dt/RossLean.StringificationGenerator?label=RossLean.StringificationGenerator",alt:"Nuget"})),"\n",(0,i.kt)("a",{parentName:"p",href:"https://github.com/RossLean/RossLean/"},(0,i.kt)("img",{parentName:"a",src:"https://img.shields.io/github/last-commit/RossLean/RossLean?label=updated",alt:"GitHub last commit"})),"\n",(0,i.kt)("img",{parentName:"p",src:"https://img.shields.io/github/stars/RossLean/RossLean?style=social",alt:"GitHub Repo stars"})),(0,i.kt)("h2",{id:"details"},"Details"),(0,i.kt)("h3",{id:"info"},"Info"),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"Name: ",(0,i.kt)("strong",{parentName:"p"},"RossLean.StringificationGenerator")),(0,i.kt)("p",{parentName:"admonition"},"A Roslyn source generator for object construction string generation methods"),(0,i.kt)("p",{parentName:"admonition"},"Author: Alex Kalfakakos"),(0,i.kt)("p",{parentName:"admonition"},"NuGet:\n",(0,i.kt)("em",{parentName:"p"},(0,i.kt)("a",{parentName:"em",href:"https://www.nuget.org/packages/RossLean.StringificationGenerator/"},"https://www.nuget.org/packages/RossLean.StringificationGenerator/")),"   "),(0,i.kt)("p",{parentName:"admonition"},"You can find more details at ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/RossLean/RossLean/"},"https://github.com/RossLean/RossLean/")),(0,i.kt)("p",{parentName:"admonition"},"Source : ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/RossLean/RossLean/"},"https://github.com/RossLean/RossLean/"))),(0,i.kt)("h3",{id:"original-readme"},"Original Readme"),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("h1",{parentName:"admonition",id:"rosslean"},"RossLean"),(0,i.kt)("p",{parentName:"admonition"},"RossLean is a project within the RossLean organization that aims to bring ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/dotnet/roslyn"},"Roslyn"),"-powered applications (analyzers and source generators) empowering the experience in the C# (and sometimes the entire .NET) ecosystem."),(0,i.kt)("h2",{parentName:"admonition",id:"origins"},"Origins"),(0,i.kt)("p",{parentName:"admonition"},"Some analyzers that are included here were developed intending to enhance the experience of developing in C#. Then, ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/Rekkonnect/RoseLynn"},"RoseLynn")," was developed for the purposes of abstracting common operations in Roslyn applications."),(0,i.kt)("p",{parentName:"admonition"},"RossLean, following the same wordplay pattern as RoseLynn, came to life after deciding that grouping our efforts would be more encouraging for the entire community. This included staging and unifying the home for already existing packages and repos, with the intent of developing more in the future."),(0,i.kt)("h2",{parentName:"admonition",id:"goals"},"Goals"),(0,i.kt)("p",{parentName:"admonition"},"The goal of RossLean is to accommodate source generators and analyzers that provide further versatility and usability of existing features and components of the language. This includes expanding on the set of capabilities that any given feature provides. For example, ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/RossLean/RossLean//RoseLynn.GenericsAnalyzer/"},"GenericsAnalyzer")," provides a lot of flexibility around declaring constraints on generic type parameters."),(0,i.kt)("p",{parentName:"admonition"},"The projects are to be made available under the copyrights and ownership of the RossLean organization and its affiliates. Previously held copyright ownership is not ceased, but will be migrated and merged with RossLean."),(0,i.kt)("p",{parentName:"admonition"},"All code herein adheres to the MIT license. It is not expected to change in the future."),(0,i.kt)("h2",{parentName:"admonition",id:"current-projects"},"Current Projects"),(0,i.kt)("ul",{parentName:"admonition"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/RossLean/RossLean//RossLean.GenericsAnalyzer/"},"GenericsAnalyzer")," - Expansions to the generic constraint model"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/RossLean/RossLean//RossLean.NameOn/"},"NameOn")," - Enforcement and encouragement of ",(0,i.kt)("inlineCode",{parentName:"li"},"nameof")," usage patterns"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/RossLean/RossLean//RossLean.Smarttributes/"},"Smarttributes")," - Constraints on application of attributes"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/RossLean/RossLean//RossLean.StringificationGenerator/"},"StringificationGenerator")," - Generator for construction code generation")),(0,i.kt)("h2",{parentName:"admonition",id:"future-projects"},"Future Projects"),(0,i.kt)("ul",{parentName:"admonition"},(0,i.kt)("li",{parentName:"ul"},"Many features that are asked from the community in the ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/dotnet/csharplang/discussions"},"C# language design discussions"),". Currently interesting ones include:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Disallow direct value assignment to ",(0,i.kt)("inlineCode",{parentName:"li"},"ref")," - ",(0,i.kt)("inlineCode",{parentName:"li"},"ref readonly")," also provides immutability (",(0,i.kt)("a",{parentName:"li",href:"https://github.com/dotnet/csharplang/discussions/7842"},"Link"),")"),(0,i.kt)("li",{parentName:"ul"},"Opt out of structural typing for specific types (",(0,i.kt)("a",{parentName:"li",href:"https://github.com/dotnet/csharplang/discussions/5278#discussion-3623748"},"Link"),")"))),(0,i.kt)("li",{parentName:"ul"},"Common coding pattern simplification generators",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Params method overload generator"),(0,i.kt)("li",{parentName:"ul"},"Type parameter method overload generator"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/Ghost4Man/VisitorPatternGenerator"},"VisitorPatternGenerator"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Extra features will be included in dedicated issues")))))),(0,i.kt)("p",{parentName:"admonition"},"Check out ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/orgs/RossLean/projects/1"},"this GitHub project")," for a detailed list of issues regarding project ideas and their status."),(0,i.kt)("h2",{parentName:"admonition",id:"contributing"},"Contributing"),(0,i.kt)("p",{parentName:"admonition"},"Before opening a PR and making changes, it is required to open an issue for discussion around the desired changes. Any PRs without a clear issue they are tackling will be handled appropriately, depending on the scope of the issue itself."),(0,i.kt)("p",{parentName:"admonition"},"The first priority of all these projects is providing helpful tools and frameworks with the smallest possible performance cost in the development experience within the IDE. We are aware that analyzers and source generators impose a significant enough performance penalty on their own, so we are careful to not hinder the experience any further."),(0,i.kt)("h3",{parentName:"admonition",id:"guidelines"},"Guidelines"),(0,i.kt)("p",{parentName:"admonition"},"Analyzer and source generator packages should be built in a way such that the underlying ",(0,i.kt)("inlineCode",{parentName:"p"},".Core")," packages of each application are automatically transitively installed on the user's project, without their manual intervention."),(0,i.kt)("p",{parentName:"admonition"},"Using ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/Rekkonnect/RoseLynn"},"RoseLynn")," is highly encouraged, if necessary. It generally provides a great number of tools that may be useful in common scenarios. ",(0,i.kt)("inlineCode",{parentName:"p"},"RoseLynn.Testing")," specifically is a must."),(0,i.kt)("p",{parentName:"admonition"},"All projects must come with unit tests covering a viably large set of intended cases. Testing should be focused on isolated reported diagnostics or generated sources. No unit tests must ever fail; if we want to include unit tests that do not currently work, we will have to use ",(0,i.kt)("inlineCode",{parentName:"p"},"Ignore"),"."),(0,i.kt)("p",{parentName:"admonition"},"All unit tests are written using the NUnit testing framework."),(0,i.kt)("h4",{parentName:"admonition",id:"analyzers"},"Analyzers"),(0,i.kt)("p",{parentName:"admonition"},"Analyzers can be built with Visual Studio 2019 in mind. This restricts the versions of the included ",(0,i.kt)("inlineCode",{parentName:"p"},"Microsoft.CodeAnalysis")," to below 4.0.0. Additionally, only the RoseLynn*.VS2019 packages can be used."),(0,i.kt)("p",{parentName:"admonition"},"It is not mandatory to support VS 2019 however. Rarely, some analyzer might be focused on newer versions of the language, or have to handle such cases. In this case, where the cost of backwards compatibility would be unreasonably large, VS 2022 onwards is the only path."),(0,i.kt)("h4",{parentName:"admonition",id:"source-generators"},"Source Generators"),(0,i.kt)("p",{parentName:"admonition"},"All source generators must be incremental (implementing only the ",(0,i.kt)("inlineCode",{parentName:"p"},"IIncrementalGenerator")," attribute). This means that we will only support Visual Studio 2022 and above. Using T4 templates is highly discouraged, primarily for maintainability concerns."),(0,i.kt)("p",{parentName:"admonition"},"Projects that also provide a domain-specific public API for consumption may not include the API in generated source. The underlying API that the source generator makes use of must be a separate package, and package versions must match exactly. In cases of hotfixes with version number difference in the build number, including the supported version in the description is sufficient.")),(0,i.kt)("h3",{id:"about"},"About"),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"Generating constructor code as string")),(0,i.kt)("h2",{id:"how-to-use"},"How to use"),(0,i.kt)("h3",{id:"example--source-csproj-source-files-"},"Example ( source csproj, source files )"),(0,i.kt)(r.Z,{mdxType:"Tabs"},(0,i.kt)(o.Z,{value:"csproj",label:"CSharp Project",mdxType:"TabItem"},(0,i.kt)("p",null,"This is the CSharp Project that references ",(0,i.kt)("strong",{parentName:"p"},"RossLean.StringificationGenerator")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml",metastring:"showLineNumbers {11}",showLineNumbers:!0,"{11}":!0},'<Project Sdk="Microsoft.NET.Sdk">\n\n  <PropertyGroup>\n    <OutputType>Exe</OutputType>\n    <TargetFramework>net8.0</TargetFramework>\n    <ImplicitUsings>enable</ImplicitUsings>\n    <Nullable>enable</Nullable>\n  </PropertyGroup>\n\n  <ItemGroup>\n    <PackageReference Include="RossLean.StringificationGenerator" Version="1.0.1">\n      <PrivateAssets>all</PrivateAssets>\n      <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>\n    </PackageReference>\n    <PackageReference Include="RossLean.StringificationGenerator.Core" Version="1.0.0" />\n  </ItemGroup>\n\n    <PropertyGroup>\n        <EmitCompilerGeneratedFiles>true</EmitCompilerGeneratedFiles>\n        <CompilerGeneratedFilesOutputPath>$(BaseIntermediateOutputPath)\\GX</CompilerGeneratedFilesOutputPath>\n    </PropertyGroup>\n</Project>\n\n\n\n'))),(0,i.kt)(o.Z,{value:"D:\\gth\\RSCG_Examples\\v2\\rscg_examples\\RossLean.StringificationGenerator\\src\\Code2String\\Program.cs",label:"Program.cs",mdxType:"TabItem"},(0,i.kt)("p",null,"  This is the use of ",(0,i.kt)("strong",{parentName:"p"},"RossLean.StringificationGenerator")," in ",(0,i.kt)("em",{parentName:"p"},"Program.cs")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-csharp",metastring:"showLineNumbers",showLineNumbers:!0},'using Code2String;\nusing RossLean.StringificationGenerator.Generated;\nPerson person = new Person("Andrei", "Ignat");\nstring personString = ConstructionCodeGeneration.ForPerson(person);\nConsole.WriteLine(personString);\n'))),(0,i.kt)(o.Z,{value:"D:\\gth\\RSCG_Examples\\v2\\rscg_examples\\RossLean.StringificationGenerator\\src\\Code2String\\Person.cs",label:"Person.cs",mdxType:"TabItem"},(0,i.kt)("p",null,"  This is the use of ",(0,i.kt)("strong",{parentName:"p"},"RossLean.StringificationGenerator")," in ",(0,i.kt)("em",{parentName:"p"},"Person.cs")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-csharp",metastring:"showLineNumbers",showLineNumbers:!0},"using RossLean.StringificationGenerator.Core;\n\nnamespace Code2String;\n[GenerateConstructionCode]\npublic record Person(string firstName, string lastName)\n{\n    \n}\n\n")))),(0,i.kt)("h3",{id:"generated-files"},"Generated Files"),(0,i.kt)("p",null,"Those are taken from $(BaseIntermediateOutputPath)\\GX"),(0,i.kt)(r.Z,{mdxType:"Tabs"},(0,i.kt)(o.Z,{value:"D:\\gth\\RSCG_Examples\\v2\\rscg_examples\\RossLean.StringificationGenerator\\src\\Code2String\\obj\\GX\\StringificationGenerator.SourceGenerators\\RossLean.StringificationGenerator.SourceGenerators.ConstructionCodeGenerator\\Code2String.Person.ConstructionCode.g.cs",label:"Code2String.Person.ConstructionCode.g.cs",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-csharp",metastring:"showLineNumbers",showLineNumbers:!0},'using Code2String;\nusing RossLean.StringificationGenerator.Core;\nusing System.Text;\n\nnamespace RossLean.StringificationGenerator.Generated;\n\npublic partial class ConstructionCodeGeneration : BaseConstructionCodeGeneration\n{\n    public static string ForPerson(Person person)\n    {\n        return $$"""\n            new Person({{StringLiteral(person.firstName)}}, {{StringLiteral(person.lastName)}})\n            """;\n    }\n    public static void AppendPerson(Person person, StringBuilder builder)\n    {\n        builder.Append($$"""\n            new Person({{StringLiteral(person.firstName)}}, {{StringLiteral(person.lastName)}})\n            """);\n    }\n    public static string ForPersonTargetTyped(Person person)\n    {\n        return $$"""\n            new({{StringLiteral(person.firstName)}}, {{StringLiteral(person.lastName)}})\n            """;\n    }\n    public static void AppendPersonTargetTyped(Person person, StringBuilder builder)\n    {\n        builder.Append($$"""\n            new({{StringLiteral(person.firstName)}}, {{StringLiteral(person.lastName)}})\n            """);\n    }\n}\n\n')))),(0,i.kt)("h2",{id:"usefull"},"Usefull"),(0,i.kt)("h3",{id:"download-example-net--c-"},"Download Example (.NET  C# )"),(0,i.kt)("admonition",{type:"tip"},(0,i.kt)("p",{parentName:"admonition"},(0,i.kt)("a",{target:"_blank",href:n(10104).Z},"Download Example project RossLean.StringificationGenerator "))),(0,i.kt)("h3",{id:"share-rossleanstringificationgenerator"},"Share RossLean.StringificationGenerator"),(0,i.kt)("ul",null,(0,i.kt)("li",null,(0,i.kt)("a",{href:"https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FRossLean.StringificationGenerator&quote=RossLean.StringificationGenerator",title:"Share on Facebook",target:"_blank"},"Share on Facebook")),(0,i.kt)("li",null,(0,i.kt)("a",{href:"https://twitter.com/intent/tweet?source=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FRossLean.StringificationGenerator&text=RossLean.StringificationGenerator:%20https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FRossLean.StringificationGenerator",target:"_blank",title:"Tweet"},"Share in Twitter")),(0,i.kt)("li",null,(0,i.kt)("a",{href:"http://www.reddit.com/submit?url=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FRossLean.StringificationGenerator&title=RossLean.StringificationGenerator",target:"_blank",title:"Submit to Reddit"},"Share on Reddit")),(0,i.kt)("li",null,(0,i.kt)("a",{href:"http://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FRossLean.StringificationGenerator&title=RossLean.StringificationGenerator&summary=&source=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FRossLean.StringificationGenerator",target:"_blank",title:"Share on LinkedIn"},"Share on Linkedin"))),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://ignatandrei.github.io/RSCG_Examples/v2/docs/RossLean.StringificationGenerator"},"https://ignatandrei.github.io/RSCG_Examples/v2/docs/RossLean.StringificationGenerator")),(0,i.kt)("h3",{id:"in-the-same-category-codetostring---2-other-generators"},"In the same category (CodeToString) - 2 other generators"),(0,i.kt)("h4",{id:"codeanalysis"},(0,i.kt)("a",{parentName:"h4",href:"/docs/CodeAnalysis"},"CodeAnalysis")),(0,i.kt)("h4",{id:"sourcegeneratorhelpercopycode"},(0,i.kt)("a",{parentName:"h4",href:"/docs/SourceGenerator.Helper.CopyCode"},"SourceGenerator.Helper.CopyCode")))}h.isMDXComponent=!0},10104:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/files/RossLean.StringificationGenerator-4c4a243346128f3e2fde6c41ab4eb37d.zip"}}]);