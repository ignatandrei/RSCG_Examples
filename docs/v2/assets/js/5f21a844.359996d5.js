"use strict";(self.webpackChunkrscg_examples=self.webpackChunkrscg_examples||[]).push([[5086],{18978:(e,n,r)=>{r.d(n,{Ay:()=>l,RM:()=>i});var s=r(74848),t=r(28453);const i=[{value:"Category &quot;FunctionalProgramming&quot; has the following generators:",id:"category-functionalprogramming-has-the-following-generators",level:3},{value:"See category",id:"see-category",level:3}];function a(e){const n={a:"a",h3:"h3",img:"img",p:"p",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h3,{id:"category-functionalprogramming-has-the-following-generators",children:'Category "FunctionalProgramming" has the following generators:'}),"\n",(0,s.jsxs)(n.p,{children:["1 ",(0,s.jsx)(n.a,{href:"/docs/cachesourcegenerator",children:"cachesourcegenerator"})," ",(0,s.jsx)(n.a,{href:"https://www.nuget.org/packages/cachesourcegenerator/",children:(0,s.jsx)(n.img,{src:"https://img.shields.io/nuget/dt/cachesourcegenerator?label=cachesourcegenerator",alt:"Nuget"})})," ",(0,s.jsx)(n.img,{src:"https://img.shields.io/github/stars/jeppevammenkristensen/cachesourcegenerator?style=social",alt:"GitHub Repo stars"})," 2024-02-14"]}),"\n",(0,s.jsxs)(n.p,{children:["2 ",(0,s.jsx)(n.a,{href:"/docs/dunet",children:"dunet"})," ",(0,s.jsx)(n.a,{href:"https://www.nuget.org/packages/dunet/",children:(0,s.jsx)(n.img,{src:"https://img.shields.io/nuget/dt/dunet?label=dunet",alt:"Nuget"})})," ",(0,s.jsx)(n.img,{src:"https://img.shields.io/github/stars/domn1995/dunet?style=social",alt:"GitHub Repo stars"})," 2023-04-16"]}),"\n",(0,s.jsxs)(n.p,{children:["3 ",(0,s.jsx)(n.a,{href:"/docs/Dusharp",children:"Dusharp"})," ",(0,s.jsx)(n.a,{href:"https://www.nuget.org/packages/Dusharp/",children:(0,s.jsx)(n.img,{src:"https://img.shields.io/nuget/dt/Dusharp?label=Dusharp",alt:"Nuget"})})," ",(0,s.jsx)(n.img,{src:"https://img.shields.io/github/stars/kolebynov/Dusharp?style=social",alt:"GitHub Repo stars"})," 2024-09-19"]}),"\n",(0,s.jsxs)(n.p,{children:["4 ",(0,s.jsx)(n.a,{href:"/docs/Funcky.DiscriminatedUnion",children:"Funcky.DiscriminatedUnion"})," ",(0,s.jsx)(n.a,{href:"https://www.nuget.org/packages/Funcky.DiscriminatedUnion/",children:(0,s.jsx)(n.img,{src:"https://img.shields.io/nuget/dt/Funcky.DiscriminatedUnion?label=Funcky.DiscriminatedUnion",alt:"Nuget"})})," ",(0,s.jsx)(n.img,{src:"https://img.shields.io/github/stars/polyadic/funcky-discriminated-union?style=social",alt:"GitHub Repo stars"})," 2024-01-18"]}),"\n",(0,s.jsxs)(n.p,{children:["5 ",(0,s.jsx)(n.a,{href:"/docs/FunicularSwitch",children:"FunicularSwitch"})," ",(0,s.jsx)(n.a,{href:"https://www.nuget.org/packages/FunicularSwitch.Generators/",children:(0,s.jsx)(n.img,{src:"https://img.shields.io/nuget/dt/FunicularSwitch.Generators?label=FunicularSwitch.Generators",alt:"Nuget"})}),(0,s.jsx)(n.a,{href:"https://www.nuget.org/packages/FunicularSwitch",children:(0,s.jsx)(n.img,{src:"https://img.shields.io/nuget/dt/FunicularSwitch?label=FunicularSwitch",alt:"Nuget"})})," ",(0,s.jsx)(n.img,{src:"https://img.shields.io/github/stars/bluehands/Funicular-Switch?style=social",alt:"GitHub Repo stars"})," 2024-02-12"]}),"\n",(0,s.jsxs)(n.p,{children:["6 ",(0,s.jsx)(n.a,{href:"/docs/N.SourceGenerators.UnionTypes",children:"N.SourceGenerators.UnionTypes"})," ",(0,s.jsx)(n.a,{href:"https://www.nuget.org/packages/N.SourceGenerators.UnionTypes/",children:(0,s.jsx)(n.img,{src:"https://img.shields.io/nuget/dt/N.SourceGenerators.UnionTypes?label=N.SourceGenerators.UnionTypes",alt:"Nuget"})})," ",(0,s.jsx)(n.img,{src:"https://img.shields.io/github/stars/Ne4to/N.SourceGenerators.UnionTypes?style=social",alt:"GitHub Repo stars"})," 2023-10-29"]}),"\n",(0,s.jsxs)(n.p,{children:["7 ",(0,s.jsx)(n.a,{href:"/docs/OneOf",children:"OneOf"})," ",(0,s.jsx)(n.a,{href:"https://www.nuget.org/packages/OneOf.SourceGenerator",children:(0,s.jsx)(n.img,{src:"https://img.shields.io/nuget/dt/OneOf.SourceGenerator?label=OneOf.SourceGenerator",alt:"Nuget"})}),(0,s.jsx)(n.a,{href:"https://www.nuget.org/packages/OneOf/",children:(0,s.jsx)(n.img,{src:"https://img.shields.io/nuget/dt/OneOf?label=OneOf",alt:"Nuget"})})," ",(0,s.jsx)(n.img,{src:"https://img.shields.io/github/stars/mcintyre321/OneOf?style=social",alt:"GitHub Repo stars"})," 2023-08-21"]}),"\n",(0,s.jsxs)(n.p,{children:["8 ",(0,s.jsx)(n.a,{href:"/docs/PartiallyApplied",children:"PartiallyApplied"})," ",(0,s.jsx)(n.a,{href:"https://www.nuget.org/packages/PartiallyApplied/",children:(0,s.jsx)(n.img,{src:"https://img.shields.io/nuget/dt/PartiallyApplied?label=PartiallyApplied",alt:"Nuget"})})," ",(0,s.jsx)(n.img,{src:"https://img.shields.io/github/stars/JasonBock/PartiallyApplied?style=social",alt:"GitHub Repo stars"})," 2023-04-16"]}),"\n",(0,s.jsxs)(n.p,{children:["9 ",(0,s.jsx)(n.a,{href:"/docs/polytype",children:"polytype"})," ",(0,s.jsx)(n.a,{href:"https://www.nuget.org/packages/polytype/",children:(0,s.jsx)(n.img,{src:"https://img.shields.io/nuget/dt/polytype?label=polytype",alt:"Nuget"})})," ",(0,s.jsx)(n.img,{src:"https://img.shields.io/github/stars/eiriktsarpalis/PolyType?style=social",alt:"GitHub Repo stars"})," 2024-11-04"]}),"\n",(0,s.jsxs)(n.p,{children:["10 ",(0,s.jsx)(n.a,{href:"/docs/rscg_demeter",children:"rscg_demeter"})," ",(0,s.jsx)(n.a,{href:"https://www.nuget.org/packages/rscg_demeter/",children:(0,s.jsx)(n.img,{src:"https://img.shields.io/nuget/dt/rscg_demeter?label=rscg_demeter",alt:"Nuget"})})," ",(0,s.jsx)(n.img,{src:"https://img.shields.io/github/stars/ignatandrei/rscg_demeter?style=social",alt:"GitHub Repo stars"})," 2025-03-26"]}),"\n",(0,s.jsxs)(n.p,{children:["11 ",(0,s.jsx)(n.a,{href:"/docs/rscg_queryables",children:"rscg_queryables"})," ",(0,s.jsx)(n.a,{href:"https://www.nuget.org/packages/rscg_queryables/",children:(0,s.jsx)(n.img,{src:"https://img.shields.io/nuget/dt/rscg_queryables?label=rscg_queryables",alt:"Nuget"})}),(0,s.jsx)(n.a,{href:"https://www.nuget.org/packages/rscg_queryablesCommon/",children:(0,s.jsx)(n.img,{src:"https://img.shields.io/nuget/dt/rscg_queryablesCommon?label=rscg_queryablesCommon",alt:"Nuget"})})," ",(0,s.jsx)(n.img,{src:"https://img.shields.io/github/stars/ignatandrei/rscg_queryables?style=social",alt:"GitHub Repo stars"})," 2024-11-02"]}),"\n",(0,s.jsxs)(n.p,{children:["12 ",(0,s.jsx)(n.a,{href:"/docs/RSCG_Utils_Memo",children:"RSCG_Utils_Memo"})," ",(0,s.jsx)(n.a,{href:"https://www.nuget.org/packages/rscgutils",children:(0,s.jsx)(n.img,{src:"https://img.shields.io/nuget/dt/rscgutils?label=rscgutils",alt:"Nuget"})})," ",(0,s.jsx)(n.img,{src:"https://img.shields.io/github/stars/ignatandrei/RSCG_Utils?style=social",alt:"GitHub Repo stars"})," 2023-08-27"]}),"\n",(0,s.jsxs)(n.p,{children:["13 ",(0,s.jsx)(n.a,{href:"/docs/Sera.Union",children:"Sera.Union"})," ",(0,s.jsx)(n.a,{href:"https://www.nuget.org/packages/Sera.Union/",children:(0,s.jsx)(n.img,{src:"https://img.shields.io/nuget/dt/Sera.Union?label=Sera.Union",alt:"Nuget"})})," ",(0,s.jsx)(n.img,{src:"https://img.shields.io/github/stars/sera-net/Sera.Union?style=social",alt:"GitHub Repo stars"})," 2024-08-26"]}),"\n",(0,s.jsxs)(n.p,{children:["14 ",(0,s.jsx)(n.a,{href:"/docs/TypeUtilities",children:"TypeUtilities"})," ",(0,s.jsx)(n.a,{href:"https://www.nuget.org/packages/TypeUtilities/",children:(0,s.jsx)(n.img,{src:"https://img.shields.io/nuget/dt/TypeUtilities?label=TypeUtilities",alt:"Nuget"})})," ",(0,s.jsx)(n.img,{src:"https://img.shields.io/github/stars/DragonsLord/TypeUtilities?style=social",alt:"GitHub Repo stars"})," 2024-03-05"]}),"\n",(0,s.jsxs)(n.p,{children:["15 ",(0,s.jsx)(n.a,{href:"/docs/UnionGen",children:"UnionGen"})," ",(0,s.jsx)(n.a,{href:"https://www.nuget.org/packages/UnionGen/",children:(0,s.jsx)(n.img,{src:"https://img.shields.io/nuget/dt/UnionGen?label=UnionGen",alt:"Nuget"})})," ",(0,s.jsx)(n.img,{src:"https://img.shields.io/github/stars/markushaslinger/union_source_generator?style=social",alt:"GitHub Repo stars"})," 2024-04-05"]}),"\n",(0,s.jsxs)(n.p,{children:["16 ",(0,s.jsx)(n.a,{href:"/docs/UnionsGenerator",children:"UnionsGenerator"})," ",(0,s.jsx)(n.a,{href:"https://www.nuget.org/packages/RhoMicro.CodeAnalysis.UnionsGenerator",children:(0,s.jsx)(n.img,{src:"https://img.shields.io/nuget/dt/RhoMicro.CodeAnalysis.UnionsGenerator?label=RhoMicro.CodeAnalysis.UnionsGenerator",alt:"Nuget"})})," ",(0,s.jsx)(n.img,{src:"https://img.shields.io/github/stars/PaulBraetz/RhoMicro.CodeAnalysis?style=social",alt:"GitHub Repo stars"})," 2024-02-18"]}),"\n",(0,s.jsx)(n.h3,{id:"see-category",children:"See category"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"/docs/Categories/FunctionalProgramming",children:"FunctionalProgramming"})})]})}function l(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},28545:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/files/OneOf-ce5eb665e0c6eed71067e7074691e3b3.zip"},60550:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>u,contentTitle:()=>d,default:()=>m,frontMatter:()=>h,metadata:()=>s,toc:()=>g});const s=JSON.parse('{"id":"RSCG-Examples/OneOf","title":"51 - OneOf","description":"Functional discriminated unions","source":"@site/docs/RSCG-Examples/OneOf.md","sourceDirName":"RSCG-Examples","slug":"/OneOf","permalink":"/RSCG_Examples/v2/docs/OneOf","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":510,"frontMatter":{"sidebar_position":510,"title":"51 - OneOf","description":"Functional discriminated unions","slug":"/OneOf"},"sidebar":"tutorialSidebar","previous":{"title":"50 - Ridge","permalink":"/RSCG_Examples/v2/docs/Ridge"},"next":{"title":"52 - Gobie","permalink":"/RSCG_Examples/v2/docs/Gobie"}}');var t=r(74848),i=r(28453),a=r(11470),l=r(19365),o=r(14252),c=r(18978);const h={sidebar_position:510,title:"51 - OneOf",description:"Functional discriminated unions",slug:"/OneOf"},d="OneOf  by Harry McIntyre",u={},g=[{value:"NuGet / site data",id:"nuget--site-data",level:2},{value:"Details",id:"details",level:2},{value:"Info",id:"info",level:3},{value:"Original Readme",id:"original-readme",level:3},{value:"Getting Started",id:"getting-started",level:2},{value:"Use cases",id:"use-cases",level:2},{value:"As a method return value",id:"as-a-method-return-value",level:3},{value:"As an &#39;Option&#39; Type",id:"as-an-option-type",level:4},{value:"Benefits",id:"benefits",level:4},{value:"As a method parameter value",id:"as-a-method-parameter-value",level:3},{value:"Matching",id:"matching",level:2},{value:"Advantages over <code>switch</code> or <code>if</code> or <code>exception</code> based control flow:",id:"advantages-over-switch-or-if-or-exception-based-control-flow",level:3},{value:"TryPick\ud835\udc65 method",id:"trypick\ud835\udc65-method",level:3},{value:"Reusable OneOf Types using OneOfBase",id:"reusable-oneof-types-using-oneofbase",level:3},{value:"OneOfBase Source Generation",id:"oneofbase-source-generation",level:3},{value:"About",id:"about",level:3},{value:"How to use",id:"how-to-use",level:2},{value:"Example (source csproj, source files)",id:"example-source-csproj-source-files",level:3},{value:"Generated Files",id:"generated-files",level:3},{value:"Useful",id:"useful",level:2},{value:"Download Example (.NET  C#)",id:"download-example-net--c",level:3},{value:"Share OneOf",id:"share-oneof",level:3},...c.RM];function p(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",del:"del",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"oneof--by-harry-mcintyre",children:"OneOf  by Harry McIntyre"})}),"\n",(0,t.jsx)(o.A,{toc:g}),"\n",(0,t.jsx)(n.h2,{id:"nuget--site-data",children:"NuGet / site data"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"https://www.nuget.org/packages/OneOf.SourceGenerator",children:(0,t.jsx)(n.img,{src:"https://img.shields.io/nuget/dt/OneOf.SourceGenerator?label=OneOf.SourceGenerator",alt:"Nuget"})}),(0,t.jsx)(n.a,{href:"https://www.nuget.org/packages/OneOf/",children:(0,t.jsx)(n.img,{src:"https://img.shields.io/nuget/dt/OneOf?label=OneOf",alt:"Nuget"})}),"\n",(0,t.jsx)(n.a,{href:"https://github.com/mcintyre321/OneOf",children:(0,t.jsx)(n.img,{src:"https://img.shields.io/github/last-commit/mcintyre321/OneOf?label=updated",alt:"GitHub last commit"})}),"\n",(0,t.jsx)(n.img,{src:"https://img.shields.io/github/stars/mcintyre321/OneOf?style=social",alt:"GitHub Repo stars"})]}),"\n",(0,t.jsx)(n.h2,{id:"details",children:"Details"}),"\n",(0,t.jsx)(n.h3,{id:"info",children:"Info"}),"\n",(0,t.jsxs)(n.admonition,{type:"info",children:[(0,t.jsxs)(n.p,{children:["Name: ",(0,t.jsx)(n.strong,{children:"OneOf"})]}),(0,t.jsx)(n.p,{children:"This source generator automaticly implements OneOfBase hierarchies"}),(0,t.jsx)(n.p,{children:"Author: Harry McIntyre"}),(0,t.jsxs)(n.p,{children:["NuGet:\n",(0,t.jsx)(n.em,{children:(0,t.jsx)(n.a,{href:"https://www.nuget.org/packages/OneOf.SourceGenerator",children:"https://www.nuget.org/packages/OneOf.SourceGenerator"})})]}),(0,t.jsx)(n.p,{children:(0,t.jsx)(n.em,{children:(0,t.jsx)(n.a,{href:"https://www.nuget.org/packages/OneOf/",children:"https://www.nuget.org/packages/OneOf/"})})}),(0,t.jsxs)(n.p,{children:["You can find more details at ",(0,t.jsx)(n.a,{href:"https://github.com/mcintyre321/OneOf",children:"https://github.com/mcintyre321/OneOf"})]}),(0,t.jsxs)(n.p,{children:["Source: ",(0,t.jsx)(n.a,{href:"https://github.com/mcintyre321/OneOf",children:"https://github.com/mcintyre321/OneOf"})]})]}),"\n",(0,t.jsx)(n.h3,{id:"original-readme",children:"Original Readme"}),"\n",(0,t.jsxs)(n.admonition,{type:"note",children:[(0,t.jsxs)(n.h1,{id:"oneof-nuget",children:["OneOf ",(0,t.jsx)(n.a,{href:"https://www.nuget.org/packages/OneOf/",children:(0,t.jsx)(n.img,{src:"https://img.shields.io/nuget/v/OneOf?logo=nuget",alt:"NuGet"})})]}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:'"Ah! It\'s like a compile time checked switch statement!" - Mike Giorgaras'}),"\n"]}),(0,t.jsx)(n.h2,{id:"getting-started",children:"Getting Started"}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"install-package OneOf"})}),"\n"]}),(0,t.jsxs)(n.p,{children:["This library provides F# style ",(0,t.jsx)(n.del,{children:"discriminated"})," unions for C#, using a custom type ",(0,t.jsx)(n.code,{children:"OneOf<T0, ... Tn>"}),". An instance of this type holds a single value, which is one of the types in its generic argument list."]}),(0,t.jsx)(n.p,{children:"I can't encourage you enough to give it a try! Due to exhaustive matching DUs provide an alternative to polymorphism when you want to have a method with guaranteed behaviour-per-type (i.e. adding an abstract method on a base type, and then implementing that method in each type). It's a really powerful tool, ask any f#/Scala dev! :)"}),(0,t.jsxs)(n.p,{children:["PS If you like OneOf, you might want to check out ",(0,t.jsx)(n.a,{href:"https://github.com/mcintyre321/valueof",children:"ValueOf"}),", for one-line Value Object Type definitions."]}),(0,t.jsx)(n.h2,{id:"use-cases",children:"Use cases"}),(0,t.jsx)(n.h3,{id:"as-a-method-return-value",children:"As a method return value"}),(0,t.jsx)(n.p,{children:"The most frequent use case is as a return value, when you need to return different results from a method. Here's how you might use it in an MVC controller action:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'public OneOf<User, InvalidName, NameTaken> CreateUser(string username)\n{\n    if (!IsValid(username)) return new InvalidName();\n    var user = _repo.FindByUsername(username);\n    if(user != null) return new NameTaken();\n    var user = new User(username);\n    _repo.Save(user);\n    return user;\n}\n\n[HttpPost]\npublic IActionResult Register(string username)\n{\n    OneOf<User, InvalidName, NameTaken> createUserResult = CreateUser(username);\n    return createUserResult.Match(\n        user => new RedirectResult("/dashboard"),\n        invalidName => {\n            ModelState.AddModelError(nameof(username), $"Sorry, that is not a valid username.");\n            return View("Register");\n        },\n        nameTaken => {\n            ModelState.AddModelError(nameof(username), "Sorry, that name is already in use.");\n            return View("Register");\n        }\n    );\n}\n'})}),(0,t.jsx)(n.h4,{id:"as-an-option-type",children:"As an 'Option' Type"}),(0,t.jsxs)(n.p,{children:["It's simple to use OneOf as an ",(0,t.jsx)(n.code,{children:"Option"})," type - just declare a ",(0,t.jsx)(n.code,{children:"OneOf<Something, None>"}),". OneOf comes with a variety of useful Types in the ",(0,t.jsx)(n.code,{children:"OneOf.Types"})," namespace, including  ",(0,t.jsx)(n.code,{children:"Yes"}),", ",(0,t.jsx)(n.code,{children:"No"}),", ",(0,t.jsx)(n.code,{children:"Maybe"}),", ",(0,t.jsx)(n.code,{children:"Unknown"}),", ",(0,t.jsx)(n.code,{children:"True"}),", ",(0,t.jsx)(n.code,{children:"False"}),", ",(0,t.jsx)(n.code,{children:"All"}),", ",(0,t.jsx)(n.code,{children:"Some"}),", and ",(0,t.jsx)(n.code,{children:"None"}),"."]}),(0,t.jsx)(n.h4,{id:"benefits",children:"Benefits"}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["True strongly typed method signature","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["No need to return a custom result base type e.g ",(0,t.jsx)(n.code,{children:"IActionResult"}),", or even worse, a non-descriptive type (e.g. object)"]}),"\n",(0,t.jsx)(n.li,{children:"The method signature accurately describes all the potential outcomes, making it easier for consumers to understand the code"}),"\n",(0,t.jsx)(n.li,{children:"Method consumer HAS to handle all cases (see 'Matching', below)"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["You can avoid using ",(0,t.jsx)(n.a,{href:"http://softwareengineering.stackexchange.com/questions/189222/are-exceptions-as-control-flow-considered-a-serious-antipattern-if-so-why",children:'"Exceptions for control flow"'})," antipattern by returning custom Typed error objects"]}),"\n"]}),(0,t.jsx)(n.h3,{id:"as-a-method-parameter-value",children:"As a method parameter value"}),(0,t.jsxs)(n.p,{children:["You can use also use ",(0,t.jsx)(n.code,{children:"OneOf"})," as a parameter type, allowing a caller to pass different types without requiring additional overloads. This might not seem that useful for a single parameter, but if you have multiple parameters, the number of overloads required increases rapidly."]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"public void SetBackground(OneOf<string, ColorName, Color> backgroundColor) { ... }\n\n//The method above can be called with either a string, a ColorName enum value or a Color instance.\n"})}),(0,t.jsx)(n.h2,{id:"matching",children:"Matching"}),(0,t.jsxs)(n.p,{children:["You use the ",(0,t.jsx)(n.code,{children:"TOut Match(Func<T0, TOut> f0, ... Func<Tn,TOut> fn)"})," method to get a value out. Note how the number of handlers matches the number of generic arguments."]}),(0,t.jsxs)(n.h3,{id:"advantages-over-switch-or-if-or-exception-based-control-flow",children:["Advantages over ",(0,t.jsx)(n.code,{children:"switch"})," or ",(0,t.jsx)(n.code,{children:"if"})," or ",(0,t.jsx)(n.code,{children:"exception"})," based control flow:"]}),(0,t.jsx)(n.p,{children:"This has a major advantage over a switch statement, as it"}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"requires every parameter to be handled"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"No fallback - if you add another generic parameter, you HAVE to update all the calling code to handle your changes."}),"\n",(0,t.jsxs)(n.p,{children:["In brown-field code-bases this is incredibly useful, as the default handler is often a runtime ",(0,t.jsx)(n.code,{children:"throw NotImplementedException"}),", or behaviour that wouldn't suit the new result type."]}),"\n"]}),"\n"]}),(0,t.jsx)(n.p,{children:"E.g."}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"OneOf<string, ColorName, Color> backgroundColor = ...;\nColor c = backgroundColor.Match(\n    str => CssHelper.GetColorFromString(str),\n    name => new Color(name),\n    col => col\n);\n_window.BackgroundColor = c;\n"})}),(0,t.jsx)(n.p,{children:"There is also a .Switch method, for when you aren't returning a value:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"OneOf<string, DateTime> dateValue = ...;\ndateValue.Switch(\n    str => AddEntry(DateTime.Parse(str), foo),\n    int => AddEntry(int, foo)\n);\n"})}),(0,t.jsx)(n.h3,{id:"trypick\ud835\udc65-method",children:"TryPick\ud835\udc65 method"}),(0,t.jsxs)(n.p,{children:["As an alternative to ",(0,t.jsx)(n.code,{children:".Switch"})," or ",(0,t.jsx)(n.code,{children:".Match"})," you can use the ",(0,t.jsx)(n.code,{children:".TryPick\ud835\udc65"})," methods."]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"//TryPick\ud835\udc65 methods for OneOf<T0, T1, T2>\npublic bool TryPickT0(out T0 value, out OneOf<T1, T2> remainder) { ... }\npublic bool TryPickT1(out T1 value, out OneOf<T0, T2> remainder) { ... }\npublic bool TryPickT2(out T2 value, out OneOf<T0, T1> remainder) { ... }\n"})}),(0,t.jsxs)(n.p,{children:["The return value indicates if the OneOf contains a T\ud835\udc65 or not. If so, then ",(0,t.jsx)(n.code,{children:"value"})," will be set to the inner value from the OneOf. If not, then the remainder will be a OneOf of the remaining generic types. You can use them like this:"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"IActionResult Get(string id)\n{\n    OneOf<Thing, NotFound, Error> thingOrNotFoundOrError = GetThingFromDb(string id);\n\n    if (thingOrNotFoundOrError.TryPickT1(out NotFound notFound, out var thingOrError)) //thingOrError is a OneOf<Thing, Error>\n      return StatusCode(404);\n\n    if (thingOrError.TryPickT1(out var error, out var thing)) //note that thing is a Thing rather than a OneOf<Thing>\n    {\n      _logger.LogError(error.Message);\n      return StatusCode(500);\n    }\n\n    return Ok(thing);\n}\n"})}),(0,t.jsx)(n.h3,{id:"reusable-oneof-types-using-oneofbase",children:"Reusable OneOf Types using OneOfBase"}),(0,t.jsxs)(n.p,{children:["You can declare a OneOf as a type, either for reuse of the type, or to provide additional members, by inheriting from ",(0,t.jsx)(n.code,{children:"OneOfBase"}),". The derived class will inherit the ",(0,t.jsx)(n.code,{children:".Match"}),", ",(0,t.jsx)(n.code,{children:".Switch"}),", and ",(0,t.jsx)(n.code,{children:".TryPick\ud835\udc65"})," methods."]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'public class StringOrNumber : OneOfBase<string, int>\n{\n    StringOrNumber(OneOf<string, int> _) : base(_) { }\n\n    // optionally, define implicit conversions\n    // you could also make the constructor public\n    public static implicit operator StringOrNumber(string _) => new StringOrNumber(_);\n    public static implicit operator StringOrNumber(int _) => new StringOrNumber(_);\n\n    public (bool isNumber, int number) TryGetNumber() =>\n        Match(\n            s => (int.TryParse(s, out var n), n),\n            i => (true, i)\n        );\n}\n\nStringOrNumber x = 5;\nConsole.WriteLine(x.TryGetNumber().number);\n// prints 5\n\nx = "5";\nConsole.WriteLine(x.TryGetNumber().number);\n// prints 5\n\nx = "abcd";\nConsole.WriteLine(x.TryGetNumber().isNumber);\n// prints False\n'})}),(0,t.jsx)(n.h3,{id:"oneofbase-source-generation",children:"OneOfBase Source Generation"}),(0,t.jsxs)(n.p,{children:["You can automatically generate ",(0,t.jsx)(n.code,{children:"OneOfBase"})," hierarchies using ",(0,t.jsx)(n.code,{children:"GenerateOneOfAttribute"})," and partial class that extends ",(0,t.jsx)(n.code,{children:"OneOfBase"})," using\na Source Generator (thanks to @romfir for the contribution ",":D","). Install it via"]}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Install-Package OneOf.SourceGenerator"}),"\n"]}),(0,t.jsx)(n.p,{children:"and then define a stub like so:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"[GenerateOneOf]\npublic partial class StringOrNumber : OneOfBase<string, int> { }\n"})}),(0,t.jsx)(n.p,{children:"During compilation the source generator will produce a class implementing the OneOfBase boiler plate code for you. e.g."}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"public partial class StringOrNumber\n{\n\tpublic StringOrNumber(OneOf.OneOf<System.String, System.Int32> _) : base(_) { }\n\n\tpublic static implicit operator StringOrNumber(System.String _) => new StringOrNumber(_);\n\tpublic static explicit operator System.String(StringOrNumber _) => _.AsT0;\n\n\tpublic static implicit operator StringOrNumber(System.Int32 _) => new StringOrNumber(_);\n\tpublic static explicit operator System.Int32(StringOrNumber _) => _.AsT1;\n}\n"})})]}),"\n",(0,t.jsx)(n.h3,{id:"about",children:"About"}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsx)(n.p,{children:"Functional discriminated unions"})}),"\n",(0,t.jsx)(n.h2,{id:"how-to-use",children:"How to use"}),"\n",(0,t.jsx)(n.h3,{id:"example-source-csproj-source-files",children:"Example (source csproj, source files)"}),"\n",(0,t.jsxs)(a.A,{children:[(0,t.jsxs)(l.A,{value:"csproj",label:"CSharp Project",children:[(0,t.jsxs)(n.p,{children:["This is the CSharp Project that references ",(0,t.jsx)(n.strong,{children:"OneOf"})]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",metastring:"showLineNumbers {12}",children:'<Project Sdk="Microsoft.NET.Sdk">\n\n  <PropertyGroup>\n    <OutputType>Exe</OutputType>\n    <TargetFramework>net7.0</TargetFramework>\n    <ImplicitUsings>enable</ImplicitUsings>\n    <Nullable>enable</Nullable>\n  </PropertyGroup>\n\n  <ItemGroup>\n    <PackageReference Include="OneOf" Version="3.0.255" />\n    <PackageReference Include="OneOf.SourceGenerator" Version="3.0.255" />\n  </ItemGroup>\n <PropertyGroup>\n        <EmitCompilerGeneratedFiles>true</EmitCompilerGeneratedFiles>\n        <CompilerGeneratedFilesOutputPath>$(BaseIntermediateOutputPath)\\GX</CompilerGeneratedFilesOutputPath>\n    </PropertyGroup>\n</Project>\n\n'})})]}),(0,t.jsxs)(l.A,{value:"D:\\gth\\RSCG_Examples\\v2\\rscg_examples\\OneOf\\src\\OneOfDemo\\Program.cs",label:"Program.cs",children:[(0,t.jsxs)(n.p,{children:["This is the use of ",(0,t.jsx)(n.strong,{children:"OneOf"})," in ",(0,t.jsx)(n.em,{children:"Program.cs"})]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",metastring:"showLineNumbers ",children:'using OneOfDemo;\n\nConsole.WriteLine("Please enter data - string or number");\n\nvar data= Console.ReadLine();\n//you can experiment with\nStringOrNumber nr1 = 5;\nvar nr = new StringOrNumber(data);\nvar dataNumber = nr.TryGetNumber();\nConsole.WriteLine($"{dataNumber.isNumber} {dataNumber.number}");\n'})})]}),(0,t.jsxs)(l.A,{value:"D:\\gth\\RSCG_Examples\\v2\\rscg_examples\\OneOf\\src\\OneOfDemo\\StringOrNumber.cs",label:"StringOrNumber.cs",children:[(0,t.jsxs)(n.p,{children:["This is the use of ",(0,t.jsx)(n.strong,{children:"OneOf"})," in ",(0,t.jsx)(n.em,{children:"StringOrNumber.cs"})]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",metastring:"showLineNumbers ",children:"using OneOf;\nnamespace OneOfDemo;\n\n[GenerateOneOf]\npublic partial class StringOrNumber : OneOfBase<string, int> {\n    public (bool isNumber, int number) TryGetNumber() =>\n           Match( //this match function is auto generated\n               s => (int.TryParse(s, out var n), n),\n               i => (true, i)\n           );\n}\n\n"})})]})]}),"\n",(0,t.jsx)(n.h3,{id:"generated-files",children:"Generated Files"}),"\n",(0,t.jsx)(n.p,{children:"Those are taken from $(BaseIntermediateOutputPath)\\GX"}),"\n",(0,t.jsxs)(a.A,{children:[(0,t.jsx)(l.A,{value:"D:\\gth\\RSCG_Examples\\v2\\rscg_examples\\OneOf\\src\\OneOfDemo\\obj\\GX\\OneOf.SourceGenerator\\OneOf.SourceGenerator.OneOfGenerator\\GenerateOneOfAttribute.g.cs",label:"GenerateOneOfAttribute.g.cs",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",metastring:"showLineNumbers ",children:"// <auto-generated />\nusing System;\n\n#pragma warning disable 1591\n\nnamespace OneOf\n{\n    [AttributeUsage(AttributeTargets.Class, Inherited = false, AllowMultiple = false)]\n    internal sealed class GenerateOneOfAttribute : Attribute\n    {\n    }\n}\n\n"})})}),(0,t.jsx)(l.A,{value:"D:\\gth\\RSCG_Examples\\v2\\rscg_examples\\OneOf\\src\\OneOfDemo\\obj\\GX\\OneOf.SourceGenerator\\OneOf.SourceGenerator.OneOfGenerator\\OneOfDemo_StringOrNumber.g.cs",label:"OneOfDemo_StringOrNumber.g.cs",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",metastring:"showLineNumbers ",children:"// <auto-generated />\n#pragma warning disable 1591\n\nnamespace OneOfDemo\n{\n    partial class StringOrNumber\n    {\n        public StringOrNumber(OneOf.OneOf<string, int> _) : base(_) { }\n\n        public static implicit operator StringOrNumber(string _) => new StringOrNumber(_);\n        public static explicit operator string(StringOrNumber _) => _.AsT0;\n\n        public static implicit operator StringOrNumber(int _) => new StringOrNumber(_);\n        public static explicit operator int(StringOrNumber _) => _.AsT1;\n    }\n}\n"})})})]}),"\n",(0,t.jsx)(n.h2,{id:"useful",children:"Useful"}),"\n",(0,t.jsx)(n.h3,{id:"download-example-net--c",children:"Download Example (.NET  C#)"}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:r(28545).A+"",children:"Download Example project OneOf "})})}),"\n",(0,t.jsx)(n.h3,{id:"share-oneof",children:"Share OneOf"}),"\n",(0,t.jsxs)("ul",{children:[(0,t.jsx)("li",{children:(0,t.jsx)("a",{href:"https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FOneOf&quote=OneOf",title:"Share on Facebook",target:"_blank",children:"Share on Facebook"})}),(0,t.jsx)("li",{children:(0,t.jsx)("a",{href:"https://twitter.com/intent/tweet?source=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FOneOf&text=OneOf:%20https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FOneOf",target:"_blank",title:"Tweet",children:"Share in Twitter"})}),(0,t.jsx)("li",{children:(0,t.jsx)("a",{href:"http://www.reddit.com/submit?url=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FOneOf&title=OneOf",target:"_blank",title:"Submit to Reddit",children:"Share on Reddit"})}),(0,t.jsx)("li",{children:(0,t.jsx)("a",{href:"http://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FOneOf&title=OneOf&summary=&source=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FOneOf",target:"_blank",title:"Share on LinkedIn",children:"Share on Linkedin"})})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://ignatandrei.github.io/RSCG_Examples/v2/docs/OneOf",children:"https://ignatandrei.github.io/RSCG_Examples/v2/docs/OneOf"})}),"\n",(0,t.jsx)(n.p,{children:"aaa"}),"\n",(0,t.jsx)(c.Ay,{})]})}function m(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(p,{...e})}):p(e)}}}]);