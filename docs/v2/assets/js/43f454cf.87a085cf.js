"use strict";(self.webpackChunkrscg_examples=self.webpackChunkrscg_examples||[]).push([[92278],{18978:(e,s,n)=>{n.d(s,{Ay:()=>l,RM:()=>r});var i=n(74848),t=n(28453);const r=[{value:"Category &quot;FunctionalProgramming&quot; has the following generators:",id:"category-functionalprogramming-has-the-following-generators",level:3},{value:"See category",id:"see-category",level:3}];function a(e){const s={a:"a",h3:"h3",img:"img",p:"p",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.h3,{id:"category-functionalprogramming-has-the-following-generators",children:'Category "FunctionalProgramming" has the following generators:'}),"\n",(0,i.jsxs)(s.p,{children:["1 ",(0,i.jsx)(s.a,{href:"/docs/cachesourcegenerator",children:"cachesourcegenerator"})," ",(0,i.jsx)(s.a,{href:"https://www.nuget.org/packages/cachesourcegenerator/",children:(0,i.jsx)(s.img,{src:"https://img.shields.io/nuget/dt/cachesourcegenerator?label=cachesourcegenerator",alt:"Nuget"})})," ",(0,i.jsx)(s.img,{src:"https://img.shields.io/github/stars/jeppevammenkristensen/cachesourcegenerator?style=social",alt:"GitHub Repo stars"})," 2024-02-14"]}),"\n",(0,i.jsxs)(s.p,{children:["2 ",(0,i.jsx)(s.a,{href:"/docs/dunet",children:"dunet"})," ",(0,i.jsx)(s.a,{href:"https://www.nuget.org/packages/dunet/",children:(0,i.jsx)(s.img,{src:"https://img.shields.io/nuget/dt/dunet?label=dunet",alt:"Nuget"})})," ",(0,i.jsx)(s.img,{src:"https://img.shields.io/github/stars/domn1995/dunet?style=social",alt:"GitHub Repo stars"})," 2023-04-16"]}),"\n",(0,i.jsxs)(s.p,{children:["3 ",(0,i.jsx)(s.a,{href:"/docs/Dusharp",children:"Dusharp"})," ",(0,i.jsx)(s.a,{href:"https://www.nuget.org/packages/Dusharp/",children:(0,i.jsx)(s.img,{src:"https://img.shields.io/nuget/dt/Dusharp?label=Dusharp",alt:"Nuget"})})," ",(0,i.jsx)(s.img,{src:"https://img.shields.io/github/stars/kolebynov/Dusharp?style=social",alt:"GitHub Repo stars"})," 2024-09-19"]}),"\n",(0,i.jsxs)(s.p,{children:["4 ",(0,i.jsx)(s.a,{href:"/docs/Funcky.DiscriminatedUnion",children:"Funcky.DiscriminatedUnion"})," ",(0,i.jsx)(s.a,{href:"https://www.nuget.org/packages/Funcky.DiscriminatedUnion/",children:(0,i.jsx)(s.img,{src:"https://img.shields.io/nuget/dt/Funcky.DiscriminatedUnion?label=Funcky.DiscriminatedUnion",alt:"Nuget"})})," ",(0,i.jsx)(s.img,{src:"https://img.shields.io/github/stars/polyadic/funcky-discriminated-union?style=social",alt:"GitHub Repo stars"})," 2024-01-18"]}),"\n",(0,i.jsxs)(s.p,{children:["5 ",(0,i.jsx)(s.a,{href:"/docs/FunicularSwitch",children:"FunicularSwitch"})," ",(0,i.jsx)(s.a,{href:"https://www.nuget.org/packages/FunicularSwitch.Generators/",children:(0,i.jsx)(s.img,{src:"https://img.shields.io/nuget/dt/FunicularSwitch.Generators?label=FunicularSwitch.Generators",alt:"Nuget"})}),(0,i.jsx)(s.a,{href:"https://www.nuget.org/packages/FunicularSwitch",children:(0,i.jsx)(s.img,{src:"https://img.shields.io/nuget/dt/FunicularSwitch?label=FunicularSwitch",alt:"Nuget"})})," ",(0,i.jsx)(s.img,{src:"https://img.shields.io/github/stars/bluehands/Funicular-Switch?style=social",alt:"GitHub Repo stars"})," 2024-02-12"]}),"\n",(0,i.jsxs)(s.p,{children:["6 ",(0,i.jsx)(s.a,{href:"/docs/N.SourceGenerators.UnionTypes",children:"N.SourceGenerators.UnionTypes"})," ",(0,i.jsx)(s.a,{href:"https://www.nuget.org/packages/N.SourceGenerators.UnionTypes/",children:(0,i.jsx)(s.img,{src:"https://img.shields.io/nuget/dt/N.SourceGenerators.UnionTypes?label=N.SourceGenerators.UnionTypes",alt:"Nuget"})})," ",(0,i.jsx)(s.img,{src:"https://img.shields.io/github/stars/Ne4to/N.SourceGenerators.UnionTypes?style=social",alt:"GitHub Repo stars"})," 2023-10-29"]}),"\n",(0,i.jsxs)(s.p,{children:["7 ",(0,i.jsx)(s.a,{href:"/docs/OneOf",children:"OneOf"})," ",(0,i.jsx)(s.a,{href:"https://www.nuget.org/packages/OneOf.SourceGenerator",children:(0,i.jsx)(s.img,{src:"https://img.shields.io/nuget/dt/OneOf.SourceGenerator?label=OneOf.SourceGenerator",alt:"Nuget"})}),(0,i.jsx)(s.a,{href:"https://www.nuget.org/packages/OneOf/",children:(0,i.jsx)(s.img,{src:"https://img.shields.io/nuget/dt/OneOf?label=OneOf",alt:"Nuget"})})," ",(0,i.jsx)(s.img,{src:"https://img.shields.io/github/stars/mcintyre321/OneOf?style=social",alt:"GitHub Repo stars"})," 2023-08-21"]}),"\n",(0,i.jsxs)(s.p,{children:["8 ",(0,i.jsx)(s.a,{href:"/docs/PartiallyApplied",children:"PartiallyApplied"})," ",(0,i.jsx)(s.a,{href:"https://www.nuget.org/packages/PartiallyApplied/",children:(0,i.jsx)(s.img,{src:"https://img.shields.io/nuget/dt/PartiallyApplied?label=PartiallyApplied",alt:"Nuget"})})," ",(0,i.jsx)(s.img,{src:"https://img.shields.io/github/stars/JasonBock/PartiallyApplied?style=social",alt:"GitHub Repo stars"})," 2023-04-16"]}),"\n",(0,i.jsxs)(s.p,{children:["9 ",(0,i.jsx)(s.a,{href:"/docs/polytype",children:"polytype"})," ",(0,i.jsx)(s.a,{href:"https://www.nuget.org/packages/polytype/",children:(0,i.jsx)(s.img,{src:"https://img.shields.io/nuget/dt/polytype?label=polytype",alt:"Nuget"})})," ",(0,i.jsx)(s.img,{src:"https://img.shields.io/github/stars/eiriktsarpalis/PolyType?style=social",alt:"GitHub Repo stars"})," 2024-11-04"]}),"\n",(0,i.jsxs)(s.p,{children:["10 ",(0,i.jsx)(s.a,{href:"/docs/rscg_demeter",children:"rscg_demeter"})," ",(0,i.jsx)(s.a,{href:"https://www.nuget.org/packages/rscg_demeter/",children:(0,i.jsx)(s.img,{src:"https://img.shields.io/nuget/dt/rscg_demeter?label=rscg_demeter",alt:"Nuget"})})," ",(0,i.jsx)(s.img,{src:"https://img.shields.io/github/stars/ignatandrei/rscg_demeter?style=social",alt:"GitHub Repo stars"})," 2025-03-26"]}),"\n",(0,i.jsxs)(s.p,{children:["11 ",(0,i.jsx)(s.a,{href:"/docs/rscg_queryables",children:"rscg_queryables"})," ",(0,i.jsx)(s.a,{href:"https://www.nuget.org/packages/rscg_queryables/",children:(0,i.jsx)(s.img,{src:"https://img.shields.io/nuget/dt/rscg_queryables?label=rscg_queryables",alt:"Nuget"})}),(0,i.jsx)(s.a,{href:"https://www.nuget.org/packages/rscg_queryablesCommon/",children:(0,i.jsx)(s.img,{src:"https://img.shields.io/nuget/dt/rscg_queryablesCommon?label=rscg_queryablesCommon",alt:"Nuget"})})," ",(0,i.jsx)(s.img,{src:"https://img.shields.io/github/stars/ignatandrei/rscg_queryables?style=social",alt:"GitHub Repo stars"})," 2024-11-02"]}),"\n",(0,i.jsxs)(s.p,{children:["12 ",(0,i.jsx)(s.a,{href:"/docs/RSCG_Utils_Memo",children:"RSCG_Utils_Memo"})," ",(0,i.jsx)(s.a,{href:"https://www.nuget.org/packages/rscgutils",children:(0,i.jsx)(s.img,{src:"https://img.shields.io/nuget/dt/rscgutils?label=rscgutils",alt:"Nuget"})})," ",(0,i.jsx)(s.img,{src:"https://img.shields.io/github/stars/ignatandrei/RSCG_Utils?style=social",alt:"GitHub Repo stars"})," 2023-08-27"]}),"\n",(0,i.jsxs)(s.p,{children:["13 ",(0,i.jsx)(s.a,{href:"/docs/Sera.Union",children:"Sera.Union"})," ",(0,i.jsx)(s.a,{href:"https://www.nuget.org/packages/Sera.Union/",children:(0,i.jsx)(s.img,{src:"https://img.shields.io/nuget/dt/Sera.Union?label=Sera.Union",alt:"Nuget"})})," ",(0,i.jsx)(s.img,{src:"https://img.shields.io/github/stars/sera-net/Sera.Union?style=social",alt:"GitHub Repo stars"})," 2024-08-26"]}),"\n",(0,i.jsxs)(s.p,{children:["14 ",(0,i.jsx)(s.a,{href:"/docs/Sundew.DiscriminatedUnions",children:"Sundew.DiscriminatedUnions"})," ",(0,i.jsx)(s.a,{href:"https://www.nuget.org/packages/Sundew.DiscriminatedUnions/",children:(0,i.jsx)(s.img,{src:"https://img.shields.io/nuget/dt/Sundew.DiscriminatedUnions?label=Sundew.DiscriminatedUnions",alt:"Nuget"})})," ",(0,i.jsx)(s.img,{src:"https://img.shields.io/github/stars/sundews/Sundew.DiscriminatedUnions?style=social",alt:"GitHub Repo stars"})," 2026-02-14"]}),"\n",(0,i.jsxs)(s.p,{children:["15 ",(0,i.jsx)(s.a,{href:"/docs/TypeUtilities",children:"TypeUtilities"})," ",(0,i.jsx)(s.a,{href:"https://www.nuget.org/packages/TypeUtilities/",children:(0,i.jsx)(s.img,{src:"https://img.shields.io/nuget/dt/TypeUtilities?label=TypeUtilities",alt:"Nuget"})})," ",(0,i.jsx)(s.img,{src:"https://img.shields.io/github/stars/DragonsLord/TypeUtilities?style=social",alt:"GitHub Repo stars"})," 2024-03-05"]}),"\n",(0,i.jsxs)(s.p,{children:["16 ",(0,i.jsx)(s.a,{href:"/docs/UnionGen",children:"UnionGen"})," ",(0,i.jsx)(s.a,{href:"https://www.nuget.org/packages/UnionGen/",children:(0,i.jsx)(s.img,{src:"https://img.shields.io/nuget/dt/UnionGen?label=UnionGen",alt:"Nuget"})})," ",(0,i.jsx)(s.img,{src:"https://img.shields.io/github/stars/markushaslinger/union_source_generator?style=social",alt:"GitHub Repo stars"})," 2024-04-05"]}),"\n",(0,i.jsxs)(s.p,{children:["17 ",(0,i.jsx)(s.a,{href:"/docs/UnionsGenerator",children:"UnionsGenerator"})," ",(0,i.jsx)(s.a,{href:"https://www.nuget.org/packages/RhoMicro.CodeAnalysis.UnionsGenerator",children:(0,i.jsx)(s.img,{src:"https://img.shields.io/nuget/dt/RhoMicro.CodeAnalysis.UnionsGenerator?label=RhoMicro.CodeAnalysis.UnionsGenerator",alt:"Nuget"})})," ",(0,i.jsx)(s.img,{src:"https://img.shields.io/github/stars/PaulBraetz/RhoMicro.CodeAnalysis?style=social",alt:"GitHub Repo stars"})," 2024-02-18"]}),"\n",(0,i.jsx)(s.h3,{id:"see-category",children:"See category"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.a,{href:"/docs/Categories/FunctionalProgramming",children:"FunctionalProgramming"})})]})}function l(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},30953:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>u,contentTitle:()=>h,default:()=>g,frontMatter:()=>c,metadata:()=>i,toc:()=>p});const i=JSON.parse('{"id":"RSCG-Examples/Sundew.DiscriminatedUnions","title":"256 - Sundew.DiscriminatedUnions","description":"Generate tagged union","source":"@site/docs/RSCG-Examples/Sundew.DiscriminatedUnions.md","sourceDirName":"RSCG-Examples","slug":"/Sundew.DiscriminatedUnions","permalink":"/RSCG_Examples/v2/docs/Sundew.DiscriminatedUnions","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2560,"frontMatter":{"sidebar_position":2560,"title":"256 - Sundew.DiscriminatedUnions","description":"Generate tagged union","slug":"/Sundew.DiscriminatedUnions"},"sidebar":"tutorialSidebar","previous":{"title":"255 - KnockOff","permalink":"/RSCG_Examples/v2/docs/KnockOff"},"next":{"title":"257 - Pekspro.DataAnnotationValuesExtractor","permalink":"/RSCG_Examples/v2/docs/Pekspro.DataAnnotationValuesExtractor"}}');var t=n(74848),r=n(28453),a=n(11470),l=n(19365),o=n(14252),d=n(18978);const c={sidebar_position:2560,title:"256 - Sundew.DiscriminatedUnions",description:"Generate tagged union",slug:"/Sundew.DiscriminatedUnions"},h="Sundew.DiscriminatedUnions  by Kim Hugener Ohlsen",u={},p=[{value:"NuGet / site data",id:"nuget--site-data",level:2},{value:"Details",id:"details",level:2},{value:"Info",id:"info",level:3},{value:"Author",id:"author",level:3},{value:"Original Readme",id:"original-readme",level:2},{value:"Discriminated Unions",id:"discriminated-unions",level:3},{value:"How it works",id:"how-it-works",level:6},{value:"Sample",id:"sample",level:6},{value:"Generator features",id:"generator-features",level:6},{value:"Supported diagnostics:",id:"supported-diagnostics",level:6},{value:"Issues/Todos",id:"issuestodos",level:6},{value:"About",id:"about",level:3},{value:"How to use",id:"how-to-use",level:2},{value:"Example (source csproj, source files)",id:"example-source-csproj-source-files",level:3},{value:"Generated Files",id:"generated-files",level:3},{value:"Useful",id:"useful",level:2},{value:"Download Example (.NET  C#)",id:"download-example-net--c",level:3},{value:"Share Sundew.DiscriminatedUnions",id:"share-sundewdiscriminatedunions",level:3},...d.RM];function m(e){const s={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h6:"h6",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"sundewdiscriminatedunions--by-kim-hugener-ohlsen",children:"Sundew.DiscriminatedUnions  by Kim Hugener Ohlsen"})}),"\n",(0,t.jsx)(o.A,{toc:p,minHeadingLevel:2,maxHeadingLevel:2}),"\n",(0,t.jsx)(s.h2,{id:"nuget--site-data",children:"NuGet / site data"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.a,{href:"https://www.nuget.org/packages/Sundew.DiscriminatedUnions/",children:(0,t.jsx)(s.img,{src:"https://img.shields.io/nuget/dt/Sundew.DiscriminatedUnions?label=Sundew.DiscriminatedUnions",alt:"Nuget"})}),"\n",(0,t.jsx)(s.a,{href:"https://github.com/sundews/Sundew.DiscriminatedUnions",children:(0,t.jsx)(s.img,{src:"https://img.shields.io/github/last-commit/sundews/Sundew.DiscriminatedUnions?label=updated",alt:"GitHub last commit"})}),"\n",(0,t.jsx)(s.img,{src:"https://img.shields.io/github/stars/sundews/Sundew.DiscriminatedUnions?style=social",alt:"GitHub Repo stars"})]}),"\n",(0,t.jsx)(s.h2,{id:"details",children:"Details"}),"\n",(0,t.jsx)(s.h3,{id:"info",children:"Info"}),"\n",(0,t.jsxs)(s.admonition,{type:"info",children:[(0,t.jsxs)(s.p,{children:["Name: ",(0,t.jsx)(s.strong,{children:"Sundew.DiscriminatedUnions"})]}),(0,t.jsx)(s.p,{children:"Author: Kim Hugener Ohlsen"}),(0,t.jsxs)(s.p,{children:["NuGet:\n",(0,t.jsx)(s.em,{children:(0,t.jsx)(s.a,{href:"https://www.nuget.org/packages/Sundew.DiscriminatedUnions/",children:"https://www.nuget.org/packages/Sundew.DiscriminatedUnions/"})})]}),(0,t.jsxs)(s.p,{children:["You can find more details at ",(0,t.jsx)(s.a,{href:"https://github.com/sundews/Sundew.DiscriminatedUnions",children:"https://github.com/sundews/Sundew.DiscriminatedUnions"})]}),(0,t.jsxs)(s.p,{children:["Source: ",(0,t.jsx)(s.a,{href:"https://github.com/sundews/Sundew.DiscriminatedUnions",children:"https://github.com/sundews/Sundew.DiscriminatedUnions"})]})]}),"\n",(0,t.jsx)(s.h3,{id:"author",children:"Author"}),"\n",(0,t.jsx)(s.admonition,{type:"note",children:(0,t.jsxs)(s.p,{children:["Kim Hugener Ohlsen\n",(0,t.jsx)(s.img,{src:"https://github.com/sundews.png",alt:"Alt text"})]})}),"\n",(0,t.jsx)(s.h2,{id:"original-readme",children:"Original Readme"}),"\n",(0,t.jsxs)(s.admonition,{type:"note",children:[(0,t.jsx)(s.h3,{id:"discriminated-unions",children:"Discriminated Unions"}),(0,t.jsx)(s.p,{children:"Sundew.DiscriminatedUnions implement discriminated unions for C#, until a future version of C# provides it out of the box.\nThe idea is that this package can be deleted once unions are supported in C#, without requiring changes to switch expressions and statements."}),(0,t.jsx)(s.p,{children:"In addition, the project supports dimensional unions through default interface methods (traits).\nA dimensional union is a union where cases can be reused in any number of unions, by supporting interface unions through the possibility of implementing multiple interface and default interface members."}),(0,t.jsx)(s.h6,{id:"how-it-works",children:"How it works"}),(0,t.jsx)(s.p,{children:"A Roslyn analyzer asserts and report errors in case switch statements or switch expression do not handle all cases.\nC# 8 and 9 already comes with great pattern matching support for evaluation."}),(0,t.jsx)(s.p,{children:"In order that the inheritance hierarchy remain closed (All cases in the same assembly), an analyzer ensures that unions are not derived from in referencing assemblies.\nSimilarly all case classes should be sealed."}),(0,t.jsx)(s.p,{children:"Create a union by inheriting from an abstract base (record) class (or interface) marked with the DiscriminatedUnion attribute to build various cases.\nEither specify the partial keyword to the union for a source generator to implement factory methods or use the codefix PDU0001 to generate them."}),(0,t.jsx)(s.h6,{id:"sample",children:"Sample"}),(0,t.jsx)(s.p,{children:"######### Defining a union"}),(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-csharp",children:"[Sundew.DiscriminatedUnions.DiscriminatedUnion]\npublic abstract partial record Result\n{\n    public sealed partial record Success : Result;\n\n    public sealed partial record Warning(string Message) : Result;\n\n    public sealed partial record Error(int Code) : Result;\n}\n"})}),(0,t.jsx)(s.p,{children:"Alternatively, a union can be defined with unnested case classes and interfaces, allowing the possibility of creating dimensional unions (see below)."}),(0,t.jsx)(s.p,{children:"######### Evaluation"}),(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-csharp",children:'var message = result switch\n{\n    Result.Error \\{ Code: > 70 \\} error => $"High Error code: {error.Code}",\n    Result.Error error => $"Error code: {error.Code}",\n    Result.Warning \\{ Message: "Tough warning" \\} => "Not good",\n    Result.Warning warning => warning.Message,\n    Result.Success => "Great",\n};\n'})}),(0,t.jsx)(s.p,{children:"######### Dimensional unions\nTo support dimensional unions, unnested cases help because the cases are no longer defined inside a union. However, for this to work the unions are required to declare a factory method named exactly like the case type and that has the CaseType attribute specifying the actual type.\nSince version 3, factory methods are generated when the union is declared partial. Alternatively, a code fix (PDU0001) is available to generate the factory methods."}),(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-csharp",children:"[Sundew.DiscriminatedUnions.DiscriminatedUnion]\npublic partial interface IExpression;\n\n[Sundew.DiscriminatedUnions.DiscriminatedUnion]\npublic partial interface IArithmeticExpression : IExpression;\n\n[Sundew.DiscriminatedUnions.DiscriminatedUnion]\npublic partial interface ICommutativeExpression : IArithmeticExpression;\n\npublic sealed partial record AdditionExpression(IExpression Lhs, IExpression Rhs) : ICommutativeExpression;\n\npublic sealed partial record SubtractionExpression(IExpression Lhs, IExpression Rhs) : IArithmeticExpression;\n\npublic sealed partial record MultiplicationExpression(IExpression Lhs, IExpression Rhs) : ICommutativeExpression;\n\npublic sealed partial record DivisionExpression(IExpression Lhs, IExpression Rhs) : IArithmeticExpression;\n\npublic sealed partial record ValueExpression(int Value) : IExpression;\n"})}),(0,t.jsx)(s.p,{children:"########## Evaluating dimensional unions\nWith dimensional unions it is possible to handle all cases using a sub union.\nAs seen in the example below, handling the ArithmeticExpression covers Addition-, Subtraction-, Multiplication- and DivisionExpression.\nTypically one would dispatch these to a method handling ArithmeticExpression and where handling all cases would be checked, but it is not required.\nThis makes it convienient to separate handling logic in smaller chucks of code."}),(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-csharp",children:"public int Evaluate(Expression expression)\n{\n    return expression switch\n        {\n            ArithmeticExpression arithmeticExpression => Evaluate(arithmeticExpression),\n            ValueExpression valueExpression => valueExpression.Value,\n        };\n}\n\npublic int Evaluate(ArithmeticExpression arithmeticExpression)\n{\n    return arithmeticExpression switch\n        {\n            AdditionExpression additionExpression => Evaluate(additionExpression.Lhs) + Evaluate(additionExpression.Rhs),\n            SubtractionExpression subtractionExpression => Evaluate(subtractionExpression.Lhs) - Evaluate(subtractionExpression.Rhs),\n            MultiplicationExpression multiplicationExpression => Evaluate(multiplicationExpression.Lhs) * Evaluate(multiplicationExpression.Rhs),\n            DivisionExpression divisionExpression => Evaluate(divisionExpression.Lhs) / Evaluate(divisionExpression.Rhs),\n        };\n}\n"})}),(0,t.jsx)(s.p,{children:"########## Enum evaluation\nAs of version 5.1, regular enums can also use the DiscriminatedUnion attribute causing the analyzer to exhaustively check switch statements and expressions."}),(0,t.jsx)(s.h6,{id:"generator-features",children:"Generator features"}),(0,t.jsx)(s.p,{children:"As mentioned a source generator is automatically activated for generating factory methods when the partial keyword is specified.\nIn addition, the DiscriminatedUnion attribute can specify a flags enum (GeneratorFeatures) to control additional code generation."}),(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Segregate - Generates an extension method for IEnumerable<TUnion> that segregates all items into buckets of the different result."}),"\n"]}),(0,t.jsx)(s.h6,{id:"supported-diagnostics",children:"Supported diagnostics:"}),(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Diagnostic Id"}),(0,t.jsx)(s.th,{children:"Description"}),(0,t.jsx)(s.th,{style:{textAlign:"center"},children:"Code Fix"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"SDU0001"}),(0,t.jsx)(s.td,{children:"Switch does not handled all cases"}),(0,t.jsx)(s.td,{style:{textAlign:"center"},children:"yes"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"SDU0002"}),(0,t.jsx)(s.td,{children:"Switch should not handle default case"}),(0,t.jsx)(s.td,{style:{textAlign:"center"},children:"yes"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"SDU0003"}),(0,t.jsx)(s.td,{children:"Switch has unreachable null case"}),(0,t.jsx)(s.td,{style:{textAlign:"center"},children:"yes"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"SDU0004"}),(0,t.jsx)(s.td,{children:"Class unions must be abstract"}),(0,t.jsx)(s.td,{style:{textAlign:"center"},children:"yes"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"SDU0005"}),(0,t.jsx)(s.td,{children:"Only unions can extended other unions"}),(0,t.jsx)(s.td,{style:{textAlign:"center"},children:"no"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"SDU0006"}),(0,t.jsx)(s.td,{children:"Unions cannot be extended outside their assembly"}),(0,t.jsx)(s.td,{style:{textAlign:"center"},children:"no"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"SDU0007"}),(0,t.jsx)(s.td,{children:"Cases must be declared in the same assembly as their unions"}),(0,t.jsx)(s.td,{style:{textAlign:"center"},children:"no"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"SDU0008"}),(0,t.jsx)(s.td,{children:"Cases should be sealed"}),(0,t.jsx)(s.td,{style:{textAlign:"center"},children:"yes"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"SDU0009"}),(0,t.jsx)(s.td,{children:"Unnested cases should have factory method"}),(0,t.jsx)(s.td,{style:{textAlign:"center"},children:"PDU0001"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"SDU0010"}),(0,t.jsx)(s.td,{children:"Factory method should have correct CaseTypeAttribute"}),(0,t.jsx)(s.td,{style:{textAlign:"center"},children:"yes"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"SDU0011"}),(0,t.jsx)(s.td,{children:"Reported when a case is implemented by throwing NotImplementedException, because CodeCleanup may siliently 'fix' SDU0001."}),(0,t.jsx)(s.td,{style:{textAlign:"center"},children:"yes"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"SDU0012"}),(0,t.jsx)(s.td,{children:"Reported when a case contains type parameters that are not in the union type parameter list."}),(0,t.jsx)(s.td,{style:{textAlign:"center"},children:"yes"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"PDU0001"}),(0,t.jsx)(s.td,{children:"Make union/case partial for code generator"}),(0,t.jsx)(s.td,{style:{textAlign:"center"},children:"yes"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"PDU0002"}),(0,t.jsx)(s.td,{children:"Populate union factory methods"}),(0,t.jsx)(s.td,{style:{textAlign:"center"},children:"yes"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"SDU9999"}),(0,t.jsx)(s.td,{children:"Switch should throw in default case"}),(0,t.jsx)(s.td,{style:{textAlign:"center"},children:"no"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"GDU0001"}),(0,t.jsx)(s.td,{children:"Discriminated union declaration could not be found"}),(0,t.jsx)(s.td,{style:{textAlign:"center"},children:"no"})]})]})]}),(0,t.jsx)(s.h6,{id:"issuestodos",children:"Issues/Todos"}),(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["Switch appears with red squiggly lines in VS: ",(0,t.jsx)(s.a,{href:"https://github.com/dotnet/roslyn/issues/57041",children:"https://github.com/dotnet/roslyn/issues/57041"})]}),"\n",(0,t.jsxs)(s.li,{children:["Nullability is falsely evaluated when the switch hints null is possible: ",(0,t.jsx)(s.a,{href:"https://github.com/dotnet/roslyn/issues/57042",children:"https://github.com/dotnet/roslyn/issues/57042"})]}),"\n"]})]}),"\n",(0,t.jsx)(s.h3,{id:"about",children:"About"}),"\n",(0,t.jsx)(s.admonition,{type:"note",children:(0,t.jsx)(s.p,{children:"Generate tagged union"})}),"\n",(0,t.jsx)(s.h2,{id:"how-to-use",children:"How to use"}),"\n",(0,t.jsx)(s.h3,{id:"example-source-csproj-source-files",children:"Example (source csproj, source files)"}),"\n",(0,t.jsxs)(a.A,{children:[(0,t.jsxs)(l.A,{value:"csproj",label:"CSharp Project",children:[(0,t.jsxs)(s.p,{children:["This is the CSharp Project that references ",(0,t.jsx)(s.strong,{children:"Sundew.DiscriminatedUnions"})]}),(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-xml",metastring:"showLineNumbers {16}",children:'<Project Sdk="Microsoft.NET.Sdk">\n\n  <PropertyGroup>\n    <OutputType>Exe</OutputType>\n    <TargetFramework>net10.0</TargetFramework>\n    <ImplicitUsings>enable</ImplicitUsings>\n    <Nullable>enable</Nullable>\n  </PropertyGroup>\n\n\t<PropertyGroup>\n\t\t<EmitCompilerGeneratedFiles>true</EmitCompilerGeneratedFiles>\n\t\t<CompilerGeneratedFilesOutputPath>$(BaseIntermediateOutputPath)\\GX</CompilerGeneratedFilesOutputPath>\n\t</PropertyGroup>\n\n\t<ItemGroup>\n\t\t<PackageReference Include="Sundew.DiscriminatedUnions" Version="6.0.0" ></PackageReference>\n\t</ItemGroup>\n\n\t\n\n</Project>\n\n'})})]}),(0,t.jsxs)(l.A,{value:"D:\\gth\\RSCG_Examples\\v2\\rscg_examples\\Sundew.DiscriminatedUnions\\src\\UnionTypesDemo\\Program.cs",label:"Program.cs",children:[(0,t.jsxs)(s.p,{children:["This is the use of ",(0,t.jsx)(s.strong,{children:"Sundew.DiscriminatedUnions"})," in ",(0,t.jsx)(s.em,{children:"Program.cs"})]}),(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-csharp",metastring:"showLineNumbers ",children:'using UnionTypesDemo;\n\nConsole.WriteLine("Save or not");\nResultSave data = SaveToDatabase.Save(0);\nvar message= data switch\n{\n    ResultSave.Ok ok => $"Saved {ok.i}",\n    ResultSave.NotFound => "Not found", \n};\nConsole.WriteLine(message);\ndata = SaveToDatabase.Save(1);\nmessage = data switch\n{\n    ResultSave.Ok ok => $"Saved {ok.i}",\n    ResultSave.NotFound => "Not found",\n};\nConsole.WriteLine(message);\n\n'})})]}),(0,t.jsxs)(l.A,{value:"D:\\gth\\RSCG_Examples\\v2\\rscg_examples\\Sundew.DiscriminatedUnions\\src\\UnionTypesDemo\\ResultSave.cs",label:"ResultSave.cs",children:[(0,t.jsxs)(s.p,{children:["This is the use of ",(0,t.jsx)(s.strong,{children:"Sundew.DiscriminatedUnions"})," in ",(0,t.jsx)(s.em,{children:"ResultSave.cs"})]}),(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-csharp",metastring:"showLineNumbers ",children:"\nusing Sundew.DiscriminatedUnions;\n\nnamespace UnionTypesDemo;\n\n\n[DiscriminatedUnion]\npublic abstract partial record ResultSave\n{\n\n    public sealed partial record Ok(int i) : ResultSave;\n\n    public sealed partial record NotFound():ResultSave ;\n    \n}\n\n\n"})})]}),(0,t.jsxs)(l.A,{value:"D:\\gth\\RSCG_Examples\\v2\\rscg_examples\\Sundew.DiscriminatedUnions\\src\\UnionTypesDemo\\SaveToDatabase.cs",label:"SaveToDatabase.cs",children:[(0,t.jsxs)(s.p,{children:["This is the use of ",(0,t.jsx)(s.strong,{children:"Sundew.DiscriminatedUnions"})," in ",(0,t.jsx)(s.em,{children:"SaveToDatabase.cs"})]}),(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-csharp",metastring:"showLineNumbers ",children:"namespace UnionTypesDemo;\n\npublic class SaveToDatabase\n{\n    public static ResultSave Save(int i)\n    {\n\n        if (i == 0)\n        {\n            return ResultSave._NotFound;\n        }\n        return ResultSave._Ok(i); \n    }\n}\n\n\n\n"})})]})]}),"\n",(0,t.jsx)(s.h3,{id:"generated-files",children:"Generated Files"}),"\n",(0,t.jsx)(s.p,{children:"Those are taken from $(BaseIntermediateOutputPath)\\GX"}),"\n",(0,t.jsxs)(a.A,{children:[(0,t.jsx)(l.A,{value:"D:\\gth\\RSCG_Examples\\v2\\rscg_examples\\Sundew.DiscriminatedUnions\\src\\UnionTypesDemo\\obj\\GX\\Sundew.DiscriminatedUnions.Generator\\Sundew.DiscriminatedUnions.Generator.DiscriminatedUnionGenerator\\UnionTypesDemo.ResultSave.generated.cs",label:"UnionTypesDemo.ResultSave.generated.cs",children:(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-csharp",metastring:"showLineNumbers ",children:'#nullable enable\n\nnamespace UnionTypesDemo\n{\n#pragma warning disable SA1601\n    [global::System.Diagnostics.DebuggerNonUserCode]\n    [global::System.CodeDom.Compiler.GeneratedCodeAttribute("Sundew.DiscriminateUnions.Generator", "6.0.0.0")]\n    public partial record ResultSave : global::Sundew.DiscriminatedUnions.IDiscriminatedUnion\n#pragma warning restore SA1601\n    {\n        /// <summary>\n        /// Gets the NotFound case.\n        /// </summary>\n        /// <returns>The NotFound.</returns>\n        [Sundew.DiscriminatedUnions.CaseType(typeof(global::UnionTypesDemo.ResultSave.NotFound))]\n        public static global::UnionTypesDemo.ResultSave _NotFound \\{ get; }\n            = new global::UnionTypesDemo.ResultSave.NotFound();\n\n        /// <summary>\n        /// Factory method for the Ok case.\n        /// </summary>\n        /// <param name="i">The i.</param>\n        /// <returns>A new Ok.</returns>\n        [Sundew.DiscriminatedUnions.CaseType(typeof(global::UnionTypesDemo.ResultSave.Ok))]\n        public static global::UnionTypesDemo.ResultSave _Ok(int i)\n            => new global::UnionTypesDemo.ResultSave.Ok(i);\n\n        /// <summary>\n        /// Gets all cases in the union.\n        /// </summary>\n        /// <returns>A readonly list of types.</returns>\n        public static global::System.Collections.Generic.IReadOnlyList<global::System.Type> Cases \\{ get; }\n            = new global::System.Type[] \\{ typeof(global::UnionTypesDemo.ResultSave.NotFound), typeof(global::UnionTypesDemo.ResultSave.Ok) };\n    }\n}\n\n'})})}),(0,t.jsx)(l.A,{value:"D:\\gth\\RSCG_Examples\\v2\\rscg_examples\\Sundew.DiscriminatedUnions\\src\\UnionTypesDemo\\obj\\GX\\Sundew.DiscriminatedUnions.Generator\\Sundew.DiscriminatedUnions.Generator.DiscriminatedUnionGenerator\\UnionTypesDemo.ResultSave.NotFound.generated.cs",label:"UnionTypesDemo.ResultSave.NotFound.generated.cs",children:(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-csharp",metastring:"showLineNumbers ",children:'#nullable enable\n\nnamespace UnionTypesDemo\n{\n    public partial record ResultSave\n    {\n#pragma warning disable SA1601\n        [global::System.CodeDom.Compiler.GeneratedCodeAttribute("Sundew.DiscriminateUnions.Generator", "6.0.0.0")]\n        public partial record NotFound\n#pragma warning restore SA1601\n        {\n            /// <summary>\n            /// Gets all cases in the union.\n            /// </summary>\n            /// <returns>A readonly list of types.</returns>\n            public new static global::System.Collections.Generic.IReadOnlyList<global::System.Type> Cases \\{ get; }\n                = new global::System.Type[] \\{ typeof(global::UnionTypesDemo.ResultSave.NotFound) };\n        }\n    }\n}\n\n'})})}),(0,t.jsx)(l.A,{value:"D:\\gth\\RSCG_Examples\\v2\\rscg_examples\\Sundew.DiscriminatedUnions\\src\\UnionTypesDemo\\obj\\GX\\Sundew.DiscriminatedUnions.Generator\\Sundew.DiscriminatedUnions.Generator.DiscriminatedUnionGenerator\\UnionTypesDemo.ResultSave.Ok.generated.cs",label:"UnionTypesDemo.ResultSave.Ok.generated.cs",children:(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-csharp",metastring:"showLineNumbers ",children:'#nullable enable\n\nnamespace UnionTypesDemo\n{\n    public partial record ResultSave\n    {\n#pragma warning disable SA1601\n        [global::System.CodeDom.Compiler.GeneratedCodeAttribute("Sundew.DiscriminateUnions.Generator", "6.0.0.0")]\n        public partial record Ok\n#pragma warning restore SA1601\n        {\n            /// <summary>\n            /// Gets all cases in the union.\n            /// </summary>\n            /// <returns>A readonly list of types.</returns>\n            public new static global::System.Collections.Generic.IReadOnlyList<global::System.Type> Cases \\{ get; }\n                = new global::System.Type[] \\{ typeof(global::UnionTypesDemo.ResultSave.Ok) };\n        }\n    }\n}\n\n'})})})]}),"\n",(0,t.jsx)(s.h2,{id:"useful",children:"Useful"}),"\n",(0,t.jsx)(s.h3,{id:"download-example-net--c",children:"Download Example (.NET  C#)"}),"\n",(0,t.jsx)(s.admonition,{type:"tip",children:(0,t.jsx)(s.p,{children:(0,t.jsx)(s.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:n(88152).A+"",children:"Download Example project Sundew.DiscriminatedUnions "})})}),"\n",(0,t.jsx)(s.h3,{id:"share-sundewdiscriminatedunions",children:"Share Sundew.DiscriminatedUnions"}),"\n",(0,t.jsxs)("ul",{children:[(0,t.jsx)("li",{children:(0,t.jsx)("a",{href:"https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FSundew.DiscriminatedUnions&quote=Sundew.DiscriminatedUnions",title:"Share on Facebook",target:"_blank",children:"Share on Facebook"})}),(0,t.jsx)("li",{children:(0,t.jsx)("a",{href:"https://twitter.com/intent/tweet?source=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FSundew.DiscriminatedUnions&text=Sundew.DiscriminatedUnions:%20https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FSundew.DiscriminatedUnions",target:"_blank",title:"Tweet",children:"Share in Twitter"})}),(0,t.jsx)("li",{children:(0,t.jsx)("a",{href:"http://www.reddit.com/submit?url=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FSundew.DiscriminatedUnions&title=Sundew.DiscriminatedUnions",target:"_blank",title:"Submit to Reddit",children:"Share on Reddit"})}),(0,t.jsx)("li",{children:(0,t.jsx)("a",{href:"http://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FSundew.DiscriminatedUnions&title=Sundew.DiscriminatedUnions&summary=&source=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FSundew.DiscriminatedUnions",target:"_blank",title:"Share on LinkedIn",children:"Share on Linkedin"})})]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.a,{href:"https://ignatandrei.github.io/RSCG_Examples/v2/docs/Sundew.DiscriminatedUnions",children:"https://ignatandrei.github.io/RSCG_Examples/v2/docs/Sundew.DiscriminatedUnions"})}),"\n",(0,t.jsx)(d.Ay,{})]})}function g(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(m,{...e})}):m(e)}},88152:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/files/Sundew.DiscriminatedUnions-5a79f741c9c9007219c3107d5a570f6c.zip"}}]);