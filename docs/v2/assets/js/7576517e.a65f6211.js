"use strict";(self.webpackChunkrscg_examples=self.webpackChunkrscg_examples||[]).push([[8616],{7412:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>g,default:()=>b,frontMatter:()=>l,metadata:()=>u,toc:()=>p});var a=r(87462),t=(r(67294),r(3905)),i=r(73992),o=r(18679),s=r(68839);const l={sidebar_position:1030,title:"103 - HangfireRecurringJob",description:"Generating recurring jobs for Hangfire from class attribute",slug:"/HangfireRecurringJob"},g="HangfireRecurringJob  by Ieuan Walker",u={unversionedId:"RSCG-Examples/HangfireRecurringJob",id:"RSCG-Examples/HangfireRecurringJob",title:"103 - HangfireRecurringJob",description:"Generating recurring jobs for Hangfire from class attribute",source:"@site/docs/RSCG-Examples/HangfireRecurringJob.md",sourceDirName:"RSCG-Examples",slug:"/HangfireRecurringJob",permalink:"/RSCG_Examples/v2/docs/HangfireRecurringJob",draft:!1,tags:[],version:"current",sidebarPosition:1030,frontMatter:{sidebar_position:1030,title:"103 - HangfireRecurringJob",description:"Generating recurring jobs for Hangfire from class attribute",slug:"/HangfireRecurringJob"},sidebar:"tutorialSidebar",previous:{title:"102 - Blazorators",permalink:"/RSCG_Examples/v2/docs/Blazorators"},next:{title:"104 - NotNot.AppSettings",permalink:"/RSCG_Examples/v2/docs/NotNot.AppSettings"}},c={},p=[{value:"NuGet / site data",id:"nuget--site-data",level:2},{value:"Details",id:"details",level:2},{value:"Info",id:"info",level:3},{value:"Original Readme",id:"original-readme",level:3},{value:"About",id:"about",level:3},{value:"How to use",id:"how-to-use",level:2},{value:"Example (source csproj, source files)",id:"example-source-csproj-source-files",level:3},{value:"Generated Files",id:"generated-files",level:3},{value:"Useful",id:"useful",level:2},{value:"Download Example (.NET  C# )",id:"download-example-net--c-",level:3},{value:"Share HangfireRecurringJob",id:"share-hangfirerecurringjob",level:3},{value:"In the same category (Hangfire) - 0 other generators",id:"in-the-same-category-hangfire---0-other-generators",level:3}],m={toc:p},d="wrapper";function b(e){let{components:n,...l}=e;return(0,t.kt)(d,(0,a.Z)({},m,l,{components:n,mdxType:"MDXLayout"}),(0,t.kt)("h1",{id:"hangfirerecurringjob--by-ieuan-walker"},"HangfireRecurringJob  by Ieuan Walker"),(0,t.kt)(s.Z,{toc:p,mdxType:"TOCInline"}),(0,t.kt)("h2",{id:"nuget--site-data"},"NuGet / site data"),(0,t.kt)("p",null,(0,t.kt)("a",{parentName:"p",href:"https://www.nuget.org/packages/IeuanWalker.Hangfire.RecurringJob/"},(0,t.kt)("img",{parentName:"a",src:"https://img.shields.io/nuget/dt/IeuanWalker.Hangfire.RecurringJob?label=IeuanWalker.Hangfire.RecurringJob",alt:"Nuget"})),"\n",(0,t.kt)("a",{parentName:"p",href:"https://github.com/IeuanWalker/Hangfire.RecurringJob"},(0,t.kt)("img",{parentName:"a",src:"https://img.shields.io/github/last-commit/IeuanWalker/Hangfire.RecurringJob?label=updated",alt:"GitHub last commit"})),"\n",(0,t.kt)("img",{parentName:"p",src:"https://img.shields.io/github/stars/IeuanWalker/Hangfire.RecurringJob?style=social",alt:"GitHub Repo stars"})),(0,t.kt)("h2",{id:"details"},"Details"),(0,t.kt)("h3",{id:"info"},"Info"),(0,t.kt)("admonition",{type:"info"},(0,t.kt)("p",{parentName:"admonition"},"Name: ",(0,t.kt)("strong",{parentName:"p"},"HangfireRecurringJob")),(0,t.kt)("p",{parentName:"admonition"},"This is a package that automatically generates the hangfire recurring jobs AddOrUpdate code, using source generators."),(0,t.kt)("p",{parentName:"admonition"},"Author: Ieuan Walker"),(0,t.kt)("p",{parentName:"admonition"},"NuGet:\n",(0,t.kt)("em",{parentName:"p"},(0,t.kt)("a",{parentName:"em",href:"https://www.nuget.org/packages/IeuanWalker.Hangfire.RecurringJob/"},"https://www.nuget.org/packages/IeuanWalker.Hangfire.RecurringJob/")),"   "),(0,t.kt)("p",{parentName:"admonition"},"You can find more details at ",(0,t.kt)("a",{parentName:"p",href:"https://github.com/IeuanWalker/Hangfire.RecurringJob"},"https://github.com/IeuanWalker/Hangfire.RecurringJob")),(0,t.kt)("p",{parentName:"admonition"},"Source: ",(0,t.kt)("a",{parentName:"p",href:"https://github.com/IeuanWalker/Hangfire.RecurringJob"},"https://github.com/IeuanWalker/Hangfire.RecurringJob"))),(0,t.kt)("h3",{id:"original-readme"},"Original Readme"),(0,t.kt)("admonition",{type:"note"},(0,t.kt)("h1",{parentName:"admonition",id:"hangfirerecurringjob-nuget-nuget"},"Hangfire.RecurringJob ",(0,t.kt)("a",{parentName:"h1",href:"https://www.nuget.org/packages/IeuanWalker.Hangfire.RecurringJob"},(0,t.kt)("img",{parentName:"a",src:"https://img.shields.io/nuget/v/IeuanWalker.Hangfire.RecurringJob",alt:"Nuget"}))," ",(0,t.kt)("a",{parentName:"h1",href:"https://www.nuget.org/packages/IeuanWalker.Hangfire.RecurringJob"},(0,t.kt)("img",{parentName:"a",src:"https://img.shields.io/nuget/dt/IeuanWalker.Hangfire.RecurringJob",alt:"Nuget"}))),(0,t.kt)("p",{parentName:"admonition"},(0,t.kt)("a",{parentName:"p",href:"https://opensource.org/licenses/MIT"},(0,t.kt)("img",{parentName:"a",src:"https://img.shields.io/badge/License-MIT-green.svg",alt:"License: MIT"})),"\n",(0,t.kt)("a",{parentName:"p",href:"https://github.com/IeuanWalker/Hangfire.RecurringJob/actions/workflows/build.yml"},(0,t.kt)("img",{parentName:"a",src:"https://github.com/IeuanWalker/Hangfire.RecurringJob/actions/workflows/build.yml/badge.svg",alt:"Build"}))),(0,t.kt)("p",{parentName:"admonition"},"Automatically generates the recurring job registration code using source generators"),(0,t.kt)("h2",{parentName:"admonition",id:"how-to-use-it"},"How to use it?"),(0,t.kt)("ol",{parentName:"admonition"},(0,t.kt)("li",{parentName:"ol"},"Install the ",(0,t.kt)("a",{parentName:"li",href:"https://www.nuget.org/packages/IeuanWalker.Hangfire.RecurringJob"},"NuGet package")," into your project.")),(0,t.kt)("pre",{parentName:"admonition"},(0,t.kt)("code",{parentName:"pre"},"Install-Package IeuanWalker.Hangfire.RecurringJob\n")),(0,t.kt)("ol",{parentName:"admonition",start:2},(0,t.kt)("li",{parentName:"ol"},"Add the ",(0,t.kt)("inlineCode",{parentName:"li"},"RecurringJob")," attribute to a class, and create an ",(0,t.kt)("inlineCode",{parentName:"li"},"Execute()")," method.")),(0,t.kt)("pre",{parentName:"admonition"},(0,t.kt)("code",{parentName:"pre",className:"language-csharp"},'[RecurringJob]\npublic class RecurringJob1\n{\n    public Task Execute()\n    {\n        throw new NotImplementedException();\n    }\n}\n\n[RecurringJob("* * * *")]\npublic class RecurringJob2\n{\n    public void Execute()\n    {\n        throw new NotImplementedException();\n    }\n}\n\n[RecurringJob("* * * *", "Priority")]\npublic class RecurringJob3\n{\n    public void Execute()\n    {\n        throw new NotImplementedException();\n    }\n}\n\n[RecurringJob]\n[RecurringJob("*/5 * * * *", "GMT", "Priority", "DataRetention")]\npublic class RecurringJob4\n{\n    public void Execute()\n    {\n        throw new NotImplementedException();\n    }\n}\n')),(0,t.kt)("ol",{parentName:"admonition",start:3},(0,t.kt)("li",{parentName:"ol"},"Register the recurring jobs",(0,t.kt)("blockquote",{parentName:"li"},(0,t.kt)("p",{parentName:"blockquote"},"Once a ",(0,t.kt)("inlineCode",{parentName:"p"},"RecurringJob")," attribute has been added to a class in your project an extension method for ",(0,t.kt)("inlineCode",{parentName:"p"},"IApplicationBuilder")," will automatically be created.\nThe extension method name convention is AddRecurringJobsFrom + your assembly name.")))),(0,t.kt)("pre",{parentName:"admonition"},(0,t.kt)("code",{parentName:"pre",className:"language-csharp"},"app.AddRecurringJobsFromExampleProject();\n")),(0,t.kt)("h2",{parentName:"admonition",id:"example"},"Example"),(0,t.kt)("p",{parentName:"admonition"},"Here is an example of what it looks like in use - "),(0,t.kt)("blockquote",{parentName:"admonition"},(0,t.kt)("p",{parentName:"blockquote"},"Left is the example code, and right is the generated code")),(0,t.kt)("p",{parentName:"admonition"},(0,t.kt)("img",{parentName:"p",src:"https://github.com/IeuanWalker/Hangfire.RecurringJob.Generator/assets/6544051/cef12771-5178-46cf-9264-dbb54654efc6",alt:"image"}))),(0,t.kt)("h3",{id:"about"},"About"),(0,t.kt)("admonition",{type:"note"},(0,t.kt)("p",{parentName:"admonition"},"Generating recurring jobs for Hangfire from class attribute")),(0,t.kt)("h2",{id:"how-to-use"},"How to use"),(0,t.kt)("h3",{id:"example-source-csproj-source-files"},"Example (source csproj, source files)"),(0,t.kt)(i.Z,{mdxType:"Tabs"},(0,t.kt)(o.Z,{value:"csproj",label:"CSharp Project",mdxType:"TabItem"},(0,t.kt)("p",null,"This is the CSharp Project that references ",(0,t.kt)("strong",{parentName:"p"},"HangfireRecurringJob")),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-xml",metastring:"showLineNumbers {16}",showLineNumbers:!0,"{16}":!0},'<Project Sdk="Microsoft.NET.Sdk.Web">\n\n  <PropertyGroup>\n    <TargetFramework>net8.0</TargetFramework>\n    <Nullable>enable</Nullable>\n    <ImplicitUsings>enable</ImplicitUsings>\n    <InvariantGlobalization>true</InvariantGlobalization>\n  </PropertyGroup>\n\n  <ItemGroup>\n    <PackageReference Include="Hangfire.AspNetCore" Version="1.8.9" />\n    <PackageReference Include="Hangfire.Core" Version="1.8.9" />\n    <PackageReference Include="Hangfire.InMemory" Version="0.7.0" />\n    \x3c!--<PackageReference Include="Hangfire.MemoryStorage" Version="1.8.0" />--\x3e\n    <PackageReference Include="Hangfire.SqlServer" Version="1.8.9" />\n    <PackageReference Include="IeuanWalker.Hangfire.RecurringJob" Version="1.0.1" />\n    <PackageReference Include="Microsoft.AspNetCore.OpenApi" Version="8.0.1" />\n    <PackageReference Include="Swashbuckle.AspNetCore" Version="6.5.0" />\n  </ItemGroup>\n    <PropertyGroup>\n        <EmitCompilerGeneratedFiles>true</EmitCompilerGeneratedFiles>\n        <CompilerGeneratedFilesOutputPath>$(BaseIntermediateOutputPath)\\GX</CompilerGeneratedFilesOutputPath>\n    </PropertyGroup>\n</Project>\n\n'))),(0,t.kt)(o.Z,{value:"D:\\gth\\RSCG_Examples\\v2\\rscg_examples\\HangfireRecurringJob\\src\\HangFireRec\\MyNewJob.cs",label:"MyNewJob.cs",mdxType:"TabItem"},(0,t.kt)("p",null,"  This is the use of ",(0,t.kt)("strong",{parentName:"p"},"HangfireRecurringJob")," in ",(0,t.kt)("em",{parentName:"p"},"MyNewJob.cs")),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-csharp",metastring:"showLineNumbers",showLineNumbers:!0},'using IeuanWalker.Hangfire.RecurringJob.Attributes;\n\nnamespace HangFireRec;\n[RecurringJob("*/1 * * * *")]\npublic class MyNewJob\n{\n    public async Task Execute()\n    {\n       await Task.Delay(1000);\n        Console.WriteLine("Hello from recurring job hangfire");\n    }\n}\n\n'))),(0,t.kt)(o.Z,{value:"D:\\gth\\RSCG_Examples\\v2\\rscg_examples\\HangfireRecurringJob\\src\\HangFireRec\\Program.cs",label:"Program.cs",mdxType:"TabItem"},(0,t.kt)("p",null,"  This is the use of ",(0,t.kt)("strong",{parentName:"p"},"HangfireRecurringJob")," in ",(0,t.kt)("em",{parentName:"p"},"Program.cs")),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-csharp",metastring:"showLineNumbers",showLineNumbers:!0},'using Hangfire;\n//using Hangfire.MemoryStorage;\nusing HangFireRec;\nvar builder = WebApplication.CreateBuilder(args);\n\n// Add services to the container.\n// Learn more about configuring Swagger/OpenAPI at https://aka.ms/aspnetcore/swashbuckle\nbuilder.Services.AddEndpointsApiExplorer();\nbuilder.Services.AddSwaggerGen();\nbuilder.Services.AddHangfire(it =>\n{\n    it.UseInMemoryStorage();\n    \n});\nbuilder.Services.AddHangfireServer(opt =>\n{\n    //config.UseMemoryStorage();\n});\n//GlobalConfiguration.Configuration.UseInMemoryStorage();\nvar app = builder.Build();\n\n// Configure the HTTP request pipeline.\nif (app.Environment.IsDevelopment())\n{\n    app.UseSwagger();\n    app.UseSwaggerUI();\n}\n\napp.UseHangfireDashboard();\n//app.UseHangfireServer();\n\nvar summaries = new[]\n{\n    "Freezing", "Bracing", "Chilly", "Cool", "Mild", "Warm", "Balmy", "Hot", "Sweltering", "Scorching"\n};\n\napp.MapGet("/weatherforecast", () =>\n{\n    var forecast = Enumerable.Range(1, 5).Select(index =>\n        new WeatherForecast\n        (\n            DateOnly.FromDateTime(DateTime.Now.AddDays(index)),\n            Random.Shared.Next(-20, 55),\n            summaries[Random.Shared.Next(summaries.Length)]\n        ))\n        .ToArray();\n    return forecast;\n})\n.WithName("GetWeatherForecast")\n.WithOpenApi();\nBackgroundJob.Enqueue(() =>Console.WriteLine("Hello from hangfire"));\nRecurringJob.AddOrUpdate(() => Console.WriteLine("Hello from hangfire"), Cron.Minutely());\napp.AddRecurringJobsFromHangFireRec();\napp.Run();\n\ninternal record WeatherForecast(DateOnly Date, int TemperatureC, string? Summary)\n{\n    public int TemperatureF => 32 + (int)(TemperatureC / 0.5556);\n}\n\n')))),(0,t.kt)("h3",{id:"generated-files"},"Generated Files"),(0,t.kt)("p",null,"Those are taken from $(BaseIntermediateOutputPath)\\GX"),(0,t.kt)(i.Z,{mdxType:"Tabs"},(0,t.kt)(o.Z,{value:"D:\\gth\\RSCG_Examples\\v2\\rscg_examples\\HangfireRecurringJob\\src\\HangFireRec\\obj\\GX\\IeuanWalker.Hangfire.RecurringJob.Generator\\IeuanWalker.Hangfire.RecurringJob.Generator.RecuringJobGenerator\\RecurringJobRegistrationExtensions.g.cs",label:"RecurringJobRegistrationExtensions.g.cs",mdxType:"TabItem"},(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-csharp",metastring:"showLineNumbers",showLineNumbers:!0},'namespace HangFireRec;\n\n// <auto-generated/>\n\nusing Hangfire;\nusing Microsoft.AspNetCore.Builder;\n\npublic static class RecurringJobRegistrationExtensions\n{\n    public static IApplicationBuilder AddRecurringJobsFromHangFireRec(this IApplicationBuilder app)\n    {\n        RecurringJob.AddOrUpdate<HangFireRec.MyNewJob>("MyNewJob", "default", x => x.Execute(), "*/1 * * * *", new RecurringJobOptions\n        {\n            TimeZone = TimeZoneInfo.FindSystemTimeZoneById("UTC")\n        });\n\n        return app;\n    }\n}\n')))),(0,t.kt)("h2",{id:"useful"},"Useful"),(0,t.kt)("h3",{id:"download-example-net--c-"},"Download Example (.NET  C# )"),(0,t.kt)("admonition",{type:"tip"},(0,t.kt)("p",{parentName:"admonition"},(0,t.kt)("a",{target:"_blank",href:r(75169).Z},"Download Example project HangfireRecurringJob "))),(0,t.kt)("h3",{id:"share-hangfirerecurringjob"},"Share HangfireRecurringJob"),(0,t.kt)("ul",null,(0,t.kt)("li",null,(0,t.kt)("a",{href:"https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FHangfireRecurringJob&quote=HangfireRecurringJob",title:"Share on Facebook",target:"_blank"},"Share on Facebook")),(0,t.kt)("li",null,(0,t.kt)("a",{href:"https://twitter.com/intent/tweet?source=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FHangfireRecurringJob&text=HangfireRecurringJob:%20https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FHangfireRecurringJob",target:"_blank",title:"Tweet"},"Share in Twitter")),(0,t.kt)("li",null,(0,t.kt)("a",{href:"http://www.reddit.com/submit?url=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FHangfireRecurringJob&title=HangfireRecurringJob",target:"_blank",title:"Submit to Reddit"},"Share on Reddit")),(0,t.kt)("li",null,(0,t.kt)("a",{href:"http://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FHangfireRecurringJob&title=HangfireRecurringJob&summary=&source=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FHangfireRecurringJob",target:"_blank",title:"Share on LinkedIn"},"Share on Linkedin"))),(0,t.kt)("p",null,(0,t.kt)("a",{parentName:"p",href:"https://ignatandrei.github.io/RSCG_Examples/v2/docs/HangfireRecurringJob"},"https://ignatandrei.github.io/RSCG_Examples/v2/docs/HangfireRecurringJob")),(0,t.kt)("h3",{id:"in-the-same-category-hangfire---0-other-generators"},"In the same category (Hangfire) - 0 other generators"))}b.isMDXComponent=!0},75169:(e,n,r)=>{r.d(n,{Z:()=>a});const a=r.p+"assets/files/HangfireRecurringJob-18113da5802416dd572c40a8dec1cdea.zip"}}]);