"use strict";(self.webpackChunkrscg_examples=self.webpackChunkrscg_examples||[]).push([[9992],{63131:(e,t,r)=>{r.d(t,{A:()=>s});const s=r.p+"assets/files/AutoCtor-8fe96fbbf52ed4bc31252879cee05a62.zip"},76883:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>d,contentTitle:()=>u,default:()=>m,frontMatter:()=>l,metadata:()=>s,toc:()=>h});const s=JSON.parse('{"id":"RSCG-Examples/AutoCtor","title":"14 - AutoCtor","description":"Generate constructor from non-initialized fields","source":"@site/docs/RSCG-Examples/AutoCtor.md","sourceDirName":"RSCG-Examples","slug":"/AutoCtor","permalink":"/RSCG_Examples/v2/docs/AutoCtor","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/RSCG-Examples/AutoCtor.md","tags":[],"version":"current","sidebarPosition":140,"frontMatter":{"sidebar_position":140,"title":"14 - AutoCtor","description":"Generate constructor from non-initialized fields","slug":"/AutoCtor"},"sidebar":"tutorialSidebar","previous":{"title":"13 - QuickConstructor","permalink":"/RSCG_Examples/v2/docs/QuickConstructor"},"next":{"title":"15 - dunet","permalink":"/RSCG_Examples/v2/docs/dunet"}}');var n=r(74848),o=r(28453),i=r(11470),a=r(19365),c=r(14252);const l={sidebar_position:140,title:"14 - AutoCtor",description:"Generate constructor from non-initialized fields",slug:"/AutoCtor"},u="AutoCtor  by Cameron MacFarland",d={},h=[{value:"NuGet / site data",id:"nuget--site-data",level:2},{value:"Details",id:"details",level:2},{value:"Info",id:"info",level:3},{value:"Original Readme",id:"original-readme",level:3},{value:"NuGet packages",id:"nuget-packages",level:2},{value:"Usage",id:"usage",level:2},{value:"Your code",id:"your-code",level:3},{value:"What gets generated",id:"what-gets-generated",level:3},{value:"More examples",id:"more-examples",level:3},{value:"Embedding the attributes in your project",id:"embedding-the-attributes-in-your-project",level:2},{value:"Preserving usage of the <code>[AutoConstruct]</code> attribute",id:"preserving-usage-of-the-autoconstruct-attribute",level:2},{value:"About",id:"about",level:3},{value:"How to use",id:"how-to-use",level:2},{value:"Example (source csproj, source files)",id:"example-source-csproj-source-files",level:3},{value:"Generated Files",id:"generated-files",level:3},{value:"Useful",id:"useful",level:2},{value:"Download Example (.NET  C# )",id:"download-example-net--c-",level:3},{value:"Share AutoCtor",id:"share-autoctor",level:3},{value:"In the same category (Constructor) - 6 other generators",id:"in-the-same-category-constructor---6-other-generators",level:3},{value:"AutoConstructor",id:"autoconstructor",level:4},{value:"AutoDeconstruct",id:"autodeconstruct",level:4},{value:"ConstructorGenerator",id:"constructorgenerator",level:4},{value:"PrimaryParameter",id:"primaryparameter",level:4},{value:"QuickConstructor",id:"quickconstructor",level:4},{value:"sourcedepend",id:"sourcedepend",level:4}];function p(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"autoctor--by-cameron-macfarland",children:"AutoCtor  by Cameron MacFarland"})}),"\n",(0,n.jsx)(c.A,{toc:h}),"\n",(0,n.jsx)(t.h2,{id:"nuget--site-data",children:"NuGet / site data"}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.a,{href:"https://www.nuget.org/packages/AutoCtor/",children:(0,n.jsx)(t.img,{src:"https://img.shields.io/nuget/dt/AutoCtor?label=AutoCtor",alt:"Nuget"})}),"\n",(0,n.jsx)(t.a,{href:"https://github.com/distantcam/AutoCtor",children:(0,n.jsx)(t.img,{src:"https://img.shields.io/github/last-commit/distantcam/AutoCtor?label=updated",alt:"GitHub last commit"})}),"\n",(0,n.jsx)(t.img,{src:"https://img.shields.io/github/stars/distantcam/AutoCtor?style=social",alt:"GitHub Repo stars"})]}),"\n",(0,n.jsx)(t.h2,{id:"details",children:"Details"}),"\n",(0,n.jsx)(t.h3,{id:"info",children:"Info"}),"\n",(0,n.jsxs)(t.admonition,{type:"info",children:[(0,n.jsxs)(t.p,{children:["Name: ",(0,n.jsx)(t.strong,{children:"AutoCtor"})]}),(0,n.jsx)(t.p,{children:"Source Generator to automatically create a constructor with all the readonly fields set."}),(0,n.jsx)(t.p,{children:"Author: Cameron MacFarland"}),(0,n.jsxs)(t.p,{children:["NuGet:\n",(0,n.jsx)(t.em,{children:(0,n.jsx)(t.a,{href:"https://www.nuget.org/packages/AutoCtor/",children:"https://www.nuget.org/packages/AutoCtor/"})})]}),(0,n.jsx)(t.p,{children:"You can find more details at"}),(0,n.jsxs)(t.p,{children:["Source: ",(0,n.jsx)(t.a,{href:"https://github.com/distantcam/AutoCtor",children:"https://github.com/distantcam/AutoCtor"})]})]}),"\n",(0,n.jsx)(t.h3,{id:"original-readme",children:"Original Readme"}),"\n",(0,n.jsxs)(t.admonition,{type:"note",children:[(0,n.jsx)(t.h1,{id:"autoctor",children:"AutoCtor"}),(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.a,{href:"https://github.com/distantcam/AutoCtor/actions/workflows/on-push-run-tests.yml",children:(0,n.jsx)(t.img,{src:"https://img.shields.io/github/actions/workflow/status/distantcam/autoctor/on-push-run-tests.yml?branch=main",alt:"Build Status"})}),"\n",(0,n.jsx)(t.a,{href:"https://www.nuget.org/packages/AutoCtor/",children:(0,n.jsx)(t.img,{src:"https://img.shields.io/nuget/v/AutoCtor.svg",alt:"NuGet Status"})})]}),(0,n.jsx)(t.p,{children:"AutoCtor is a Roslyn Source Generator that will automatically create a constructor for your class for use with constructor Dependency Injection."}),(0,n.jsx)(t.h2,{id:"nuget-packages",children:"NuGet packages"}),(0,n.jsx)(t.p,{children:(0,n.jsx)(t.a,{href:"https://nuget.org/packages/AutoCtor/",children:"https://nuget.org/packages/AutoCtor/"})}),(0,n.jsx)(t.h2,{id:"usage",children:"Usage"}),(0,n.jsx)(t.h3,{id:"your-code",children:"Your code"}),(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-cs",children:"[AutoConstruct]\npublic partial class ExampleClass\n{\n    private readonly ICustomService _customService;\n}\n"})}),(0,n.jsx)(t.h3,{id:"what-gets-generated",children:"What gets generated"}),(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-cs",children:"partial class ExampleClass\n{\n    public ExampleClass(ICustomService customService)\n    {\n        _customService = customService;\n    }\n}\n"})}),(0,n.jsx)(t.h3,{id:"more-examples",children:"More examples"}),(0,n.jsx)(t.p,{children:"You can also initialize readonly fields, and AutoCtor will not include them in the constructor."}),(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-cs",children:"[AutoConstruct]\npublic partial class ClassWithInitializer\n{\n    private readonly ICustomService _customService;\n    private readonly IList<string> _list = new List<string>();\n}\n"})}),(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-cs",children:"partial class ClassWithInitializer\n{\n    public ClassWithInitializer(ICustomService customService)\n    {\n        _customService = customService;\n        // no code to set _list\n    }\n}\n"})}),(0,n.jsx)(t.p,{children:"If there is a single base constructor with parameters, AutoCtor will include that base constructor in the constructor it creates."}),(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-cs",children:"public abstract class BaseClass\n{\n    protected IAnotherService _anotherService;\n\n    public BaseClass(IAnotherService anotherService)\n    {\n        _anotherService = anotherService;\n    }\n}\n\n[AutoConstruct]\npublic partial class ClassWithBase : BaseClass\n{\n    private readonly ICustomService _customService;\n}\n"})}),(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-cs",children:"partial class ClassWithBase\n{\n    public ClassWithBase(IAnotherService anotherService, ICustomService customService) : base(anotherService)\n    {\n        _customService = customService;\n    }\n}\n"})}),(0,n.jsx)(t.h2,{id:"embedding-the-attributes-in-your-project",children:"Embedding the attributes in your project"}),(0,n.jsxs)(t.p,{children:["By default, the ",(0,n.jsx)(t.code,{children:"[AutoConstruct]"})," attributes referenced in your project are contained in an external dll. It is also possible to embed the attributes directly in your project. To do this, you must do two things:"]}),(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["Define the MSBuild constant ",(0,n.jsx)(t.code,{children:"AUTOCTOR_EMBED_ATTRIBUTES"}),". This ensures the attributes are embedded in your project."]}),"\n",(0,n.jsxs)(t.li,{children:["Add ",(0,n.jsx)(t.code,{children:"compile"})," to the list of excluded assets in your ",(0,n.jsx)(t.code,{children:"<PackageReference>"})," element. This ensures the attributes in your project are referenced, insted of the ",(0,n.jsx)(t.em,{children:"AutoCtor.Attributes.dll"})," library."]}),"\n"]}),(0,n.jsx)(t.p,{children:"Your project file should look like this:"}),(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-xml",children:'<Project Sdk="Microsoft.NET.Sdk">\n\n  <PropertyGroup>\n    \x3c!--  Define the MSBuild constant    --\x3e\n    <DefineConstants>AUTOCTOR_EMBED_ATTRIBUTES</DefineConstants>\n  </PropertyGroup>\n\n  \x3c!-- Add the package --\x3e\n  <PackageReference Include="AutoCtor"\n                    PrivateAssets="all"\n                    ExcludeAssets="compile;runtime" />\n\x3c!--                               \u261d Add compile to the list of excluded assets. --\x3e\n\n</Project>\n'})}),(0,n.jsxs)(t.h2,{id:"preserving-usage-of-the-autoconstruct-attribute",children:["Preserving usage of the ",(0,n.jsx)(t.code,{children:"[AutoConstruct]"})," attribute"]}),(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.code,{children:"[AutoConstruct]"})," attributes are decorated with the ",(0,n.jsx)(t.code,{children:"[Conditional]"})," attribute, so their usage will not appear in the build output of your project. If you use reflection at runtime you will not find the ",(0,n.jsx)(t.code,{children:"[AutoConstruct]"})," attributes."]}),(0,n.jsxs)(t.p,{children:["If you wish to preserve these attributes in the build output, you can define the ",(0,n.jsx)(t.code,{children:"AUTOCTOR_USAGES"})," MSBuild variable."]}),(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-xml",children:'<Project Sdk="Microsoft.NET.Sdk">\n\n  <PropertyGroup>\n    \x3c!--  Define the MSBuild constant    --\x3e\n    <DefineConstants>AUTOCTOR_USAGES</DefineConstants>\n  </PropertyGroup>\n\n  \x3c!-- Add the package --\x3e\n  <PackageReference Include="AutoCtor" PrivateAssets="all" />\n\n</Project>\n'})})]}),"\n",(0,n.jsx)(t.h3,{id:"about",children:"About"}),"\n",(0,n.jsx)(t.admonition,{type:"note",children:(0,n.jsx)(t.p,{children:"Generate constructor from non-initialized fields"})}),"\n",(0,n.jsx)(t.h2,{id:"how-to-use",children:"How to use"}),"\n",(0,n.jsx)(t.h3,{id:"example-source-csproj-source-files",children:"Example (source csproj, source files)"}),"\n",(0,n.jsxs)(i.A,{children:[(0,n.jsxs)(a.A,{value:"csproj",label:"CSharp Project",children:[(0,n.jsxs)(t.p,{children:["This is the CSharp Project that references ",(0,n.jsx)(t.strong,{children:"AutoCtor"})]}),(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-xml",metastring:"showLineNumbers {14}",children:'<Project Sdk="Microsoft.NET.Sdk">\n\n  <PropertyGroup>\n    <OutputType>Exe</OutputType>\n    <TargetFramework>net7.0</TargetFramework>\n    <ImplicitUsings>enable</ImplicitUsings>\n    <Nullable>enable</Nullable>\n  </PropertyGroup>\n\t<PropertyGroup>\n\t\t<EmitCompilerGeneratedFiles>true</EmitCompilerGeneratedFiles>\n\t\t<CompilerGeneratedFilesOutputPath>$(BaseIntermediateOutputPath)\\GX</CompilerGeneratedFilesOutputPath>\n\t</PropertyGroup>\n\t<ItemGroup>\n\t  <PackageReference Include="AutoCtor" Version="1.0.0" />\n\t</ItemGroup>\n</Project>\n\n'})})]}),(0,n.jsxs)(a.A,{value:"D:\\gth\\RSCG_Examples\\v2\\rscg_examples\\AutoCtor\\src\\AutoCtorDemo\\Program.cs",label:"Program.cs",children:[(0,n.jsxs)(t.p,{children:["This is the use of ",(0,n.jsx)(t.strong,{children:"AutoCtor"})," in ",(0,n.jsx)(t.em,{children:"Program.cs"})]}),(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-csharp",metastring:"showLineNumbers ",children:'// See https://aka.ms/new-console-template for more information\nusing AutoCtorDemo;\n\nConsole.WriteLine("Hello, World!");\n\nvar p = new Person("Andrei", "Ignat");\n\n'})})]}),(0,n.jsxs)(a.A,{value:"D:\\gth\\RSCG_Examples\\v2\\rscg_examples\\AutoCtor\\src\\AutoCtorDemo\\Person.cs",label:"Person.cs",children:[(0,n.jsxs)(t.p,{children:["This is the use of ",(0,n.jsx)(t.strong,{children:"AutoCtor"})," in ",(0,n.jsx)(t.em,{children:"Person.cs"})]}),(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-csharp",metastring:"showLineNumbers ",children:"using AutoCtor;\n\nnamespace AutoCtorDemo;\n\n[AutoConstruct]\ninternal partial class Person\n{\n    private readonly string FirstName;\n    private readonly string? LastName;\n\n}\n\n"})})]})]}),"\n",(0,n.jsx)(t.h3,{id:"generated-files",children:"Generated Files"}),"\n",(0,n.jsx)(t.p,{children:"Those are taken from $(BaseIntermediateOutputPath)\\GX"}),"\n",(0,n.jsxs)(i.A,{children:[(0,n.jsx)(a.A,{value:"D:\\gth\\RSCG_Examples\\v2\\rscg_examples\\AutoCtor\\src\\AutoCtorDemo\\obj\\GX\\AutoCtor\\AutoCtor.AutoConstructAttributeGenerator\\AutoConstructAttribute.g.cs",label:"AutoConstructAttribute.g.cs",children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-csharp",metastring:"showLineNumbers ",children:'//------------------------------------------------------------------------------\n// <auto-generated>\n//     This code was generated by https://github.com/distantcam/AutoCtor\n//\n//     Changes to this file may cause incorrect behavior and will be lost if\n//     the code is regenerated.\n// </auto-generated>\n//------------------------------------------------------------------------------\n\n#if AUTOCTOR_EMBED_ATTRIBUTES\nnamespace AutoCtor\n{\n    [System.Runtime.CompilerServices.CompilerGenerated]\n    [System.AttributeUsage(AttributeTargets.Class | AttributeTargets.Struct, AllowMultiple = false, Inherited = false)]\n    [System.Diagnostics.Conditional("AUTOCTOR_USAGES")]\n    internal sealed class AutoConstructAttribute : System.Attribute\n    {\n        [System.Runtime.CompilerServices.CompilerGenerated]\n        public AutoConstructAttribute()\n        {\n        }\n    }\n}\n#endif\n'})})}),(0,n.jsx)(a.A,{value:"D:\\gth\\RSCG_Examples\\v2\\rscg_examples\\AutoCtor\\src\\AutoCtorDemo\\obj\\GX\\AutoCtor\\AutoCtor.AutoConstructSourceGenerator\\AutoCtorDemo.Person.g.cs",label:"AutoCtorDemo.Person.g.cs",children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-csharp",metastring:"showLineNumbers ",children:"//------------------------------------------------------------------------------\n// <auto-generated>\n//     This code was generated by https://github.com/distantcam/AutoCtor\n//\n//     Changes to this file may cause incorrect behavior and will be lost if\n//     the code is regenerated.\n// </auto-generated>\n//------------------------------------------------------------------------------\n\nnamespace AutoCtorDemo\n{\n\tpartial class Person\n\t{\n\t\tpublic Person(string FirstName, string LastName)\n\t\t{\n\t\t\tthis.FirstName = FirstName;\n\t\t\tthis.LastName = LastName;\n\t\t}\n\t}\n}\n\n"})})})]}),"\n",(0,n.jsx)(t.h2,{id:"useful",children:"Useful"}),"\n",(0,n.jsx)(t.h3,{id:"download-example-net--c-",children:"Download Example (.NET  C# )"}),"\n",(0,n.jsx)(t.admonition,{type:"tip",children:(0,n.jsx)(t.p,{children:(0,n.jsx)(t.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:r(63131).A+"",children:"Download Example project AutoCtor "})})}),"\n",(0,n.jsx)(t.h3,{id:"share-autoctor",children:"Share AutoCtor"}),"\n",(0,n.jsxs)("ul",{children:[(0,n.jsx)("li",{children:(0,n.jsx)("a",{href:"https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FAutoCtor&quote=AutoCtor",title:"Share on Facebook",target:"_blank",children:"Share on Facebook"})}),(0,n.jsx)("li",{children:(0,n.jsx)("a",{href:"https://twitter.com/intent/tweet?source=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FAutoCtor&text=AutoCtor:%20https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FAutoCtor",target:"_blank",title:"Tweet",children:"Share in Twitter"})}),(0,n.jsx)("li",{children:(0,n.jsx)("a",{href:"http://www.reddit.com/submit?url=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FAutoCtor&title=AutoCtor",target:"_blank",title:"Submit to Reddit",children:"Share on Reddit"})}),(0,n.jsx)("li",{children:(0,n.jsx)("a",{href:"http://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FAutoCtor&title=AutoCtor&summary=&source=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FAutoCtor",target:"_blank",title:"Share on LinkedIn",children:"Share on Linkedin"})})]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.a,{href:"https://ignatandrei.github.io/RSCG_Examples/v2/docs/AutoCtor",children:"https://ignatandrei.github.io/RSCG_Examples/v2/docs/AutoCtor"})}),"\n",(0,n.jsx)(t.h3,{id:"in-the-same-category-constructor---6-other-generators",children:"In the same category (Constructor) - 6 other generators"}),"\n",(0,n.jsx)(t.h4,{id:"autoconstructor",children:(0,n.jsx)(t.a,{href:"/docs/AutoConstructor",children:"AutoConstructor"})}),"\n",(0,n.jsx)(t.h4,{id:"autodeconstruct",children:(0,n.jsx)(t.a,{href:"/docs/AutoDeconstruct",children:"AutoDeconstruct"})}),"\n",(0,n.jsx)(t.h4,{id:"constructorgenerator",children:(0,n.jsx)(t.a,{href:"/docs/ConstructorGenerator",children:"ConstructorGenerator"})}),"\n",(0,n.jsx)(t.h4,{id:"primaryparameter",children:(0,n.jsx)(t.a,{href:"/docs/PrimaryParameter",children:"PrimaryParameter"})}),"\n",(0,n.jsx)(t.h4,{id:"quickconstructor",children:(0,n.jsx)(t.a,{href:"/docs/QuickConstructor",children:"QuickConstructor"})}),"\n",(0,n.jsx)(t.h4,{id:"sourcedepend",children:(0,n.jsx)(t.a,{href:"/docs/sourcedepend",children:"sourcedepend"})})]})}function m(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(p,{...e})}):p(e)}}}]);