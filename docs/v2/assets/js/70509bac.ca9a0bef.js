"use strict";(self.webpackChunkrscg_examples=self.webpackChunkrscg_examples||[]).push([[94016],{91709:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/files/RSCG_idempotency-f2035dbd0e7d98a0a36f590b01f5d953.zip"},99885:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>m,contentTitle:()=>p,default:()=>x,frontMatter:()=>h,metadata:()=>i,toc:()=>u});const i=JSON.parse('{"id":"RSCG-Examples/RSCG_idempotency","title":"252 - RSCG_idempotency","description":"Generating code for idempotency","source":"@site/docs/RSCG-Examples/RSCG_idempotency.md","sourceDirName":"RSCG-Examples","slug":"/RSCG_idempotency","permalink":"/RSCG_Examples/v2/docs/RSCG_idempotency","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2520,"frontMatter":{"sidebar_position":2520,"title":"252 - RSCG_idempotency","description":"Generating code for idempotency","slug":"/RSCG_idempotency"},"sidebar":"tutorialSidebar","previous":{"title":"251 - OrderedBuildersGenerator","permalink":"/RSCG_Examples/v2/docs/OrderedBuildersGenerator"},"next":{"title":"v1","permalink":"/RSCG_Examples/v2/docs/v1"}}');var r=t(74848),s=t(28453),a=t(11470),o=t(19365),c=t(14252);function d(e){const n={a:"a",h3:"h3",img:"img",p:"p",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h3,{id:"category-idempotency-has-the-following-generators",children:'Category "Idempotency" has the following generators:'}),"\n",(0,r.jsxs)(n.p,{children:["1 ",(0,r.jsx)(n.a,{href:"/docs/RSCG_idempotency",children:"RSCG_idempotency"})," ",(0,r.jsx)(n.a,{href:"https://www.nuget.org/packages/RSCG_idempotency/",children:(0,r.jsx)(n.img,{src:"https://img.shields.io/nuget/dt/RSCG_idempotency?label=RSCG_idempotency",alt:"Nuget"})})," ",(0,r.jsx)(n.img,{src:"https://img.shields.io/github/stars/ignatandrei/RSCG_idempotency?style=social",alt:"GitHub Repo stars"})," 2026-01-28"]}),"\n",(0,r.jsx)(n.h3,{id:"see-category",children:"See category"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"/docs/Categories/Idempotency",children:"Idempotency"})})]})}function l(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}const h={sidebar_position:2520,title:"252 - RSCG_idempotency",description:"Generating code for idempotency",slug:"/RSCG_idempotency"},p="RSCG_idempotency  by Ignat Andrei",m={},u=[{value:"NuGet / site data",id:"nuget--site-data",level:2},{value:"Details",id:"details",level:2},{value:"Info",id:"info",level:3},{value:"Author",id:"author",level:3},{value:"Original Readme",id:"original-readme",level:3},{value:"Installation",id:"installation",level:2},{value:"Overview",id:"overview",level:2},{value:"Key Concepts",id:"key-concepts",level:2},{value:"What is Idempotency?",id:"what-is-idempotency",level:3},{value:"Generated Components",id:"generated-components",level:3},{value:"Usage",id:"usage",level:2},{value:"Step 1: Mark Parameters with <code>[Idempotent]</code>",id:"step-1-mark-parameters-with-idempotent",level:3},{value:"Step 2: Generated Helper Methods",id:"step-2-generated-helper-methods",level:3},{value:"Check for Duplicates",id:"check-for-duplicates",level:4},{value:"Clean Up Old Entries",id:"clean-up-old-entries",level:4},{value:"Generated Infrastructure Details",id:"generated-infrastructure-details",level:2},{value:"Caching Mechanism",id:"caching-mechanism",level:3},{value:"Thread Safety",id:"thread-safety",level:3},{value:"Complete Example",id:"complete-example",level:2},{value:"Original Method Definition",id:"original-method-definition",level:3},{value:"Generated Code (Auto-created by RSCG)",id:"generated-code-auto-created-by-rscg",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Use Partial Classes",id:"1-use-partial-classes",level:3},{value:"2. Check for Duplicates Early",id:"2-check-for-duplicates-early",level:3},{value:"3. Implement Cache Cleanup",id:"3-implement-cache-cleanup",level:3},{value:"4. Multiple Parameters",id:"4-multiple-parameters",level:3},{value:"5. Memory Considerations",id:"5-memory-considerations",level:3},{value:"Time Provider",id:"time-provider",level:2},{value:"Summary",id:"summary",level:2},{value:"About",id:"about",level:3},{value:"How to use",id:"how-to-use",level:2},{value:"Example (source csproj, source files)",id:"example-source-csproj-source-files",level:3},{value:"Generated Files",id:"generated-files",level:3},{value:"Useful",id:"useful",level:2},{value:"Download Example (.NET  C#)",id:"download-example-net--c",level:3},{value:"Share RSCG_idempotency",id:"share-rscg_idempotency",level:3},{value:"Category &quot;Idempotency&quot; has the following generators:",id:"category-idempotency-has-the-following-generators",level:3},{value:"See category",id:"see-category",level:3}];function g(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"rscg_idempotency--by-ignat-andrei",children:"RSCG_idempotency  by Ignat Andrei"})}),"\n",(0,r.jsx)(c.A,{toc:u,minHeadingLevel:2,maxHeadingLevel:2}),"\n",(0,r.jsx)(n.h2,{id:"nuget--site-data",children:"NuGet / site data"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://www.nuget.org/packages/RSCG_idempotency/",children:(0,r.jsx)(n.img,{src:"https://img.shields.io/nuget/dt/RSCG_idempotency?label=RSCG_idempotency",alt:"Nuget"})}),"\n",(0,r.jsx)(n.a,{href:"https://github.com/ignatandrei/RSCG_idempotency",children:(0,r.jsx)(n.img,{src:"https://img.shields.io/github/last-commit/ignatandrei/RSCG_idempotency?label=updated",alt:"GitHub last commit"})}),"\n",(0,r.jsx)(n.img,{src:"https://img.shields.io/github/stars/ignatandrei/RSCG_idempotency?style=social",alt:"GitHub Repo stars"})]}),"\n",(0,r.jsx)(n.h2,{id:"details",children:"Details"}),"\n",(0,r.jsx)(n.h3,{id:"info",children:"Info"}),"\n",(0,r.jsxs)(n.admonition,{type:"info",children:[(0,r.jsxs)(n.p,{children:["Name: ",(0,r.jsx)(n.strong,{children:"RSCG_idempotency"})]}),(0,r.jsx)(n.p,{children:"Automatic generating Idempotency for function parameters"}),(0,r.jsx)(n.p,{children:"Author: Ignat Andrei"}),(0,r.jsxs)(n.p,{children:["NuGet:\n",(0,r.jsx)(n.em,{children:(0,r.jsx)(n.a,{href:"https://www.nuget.org/packages/RSCG_idempotency/",children:"https://www.nuget.org/packages/RSCG_idempotency/"})})]}),(0,r.jsxs)(n.p,{children:["You can find more details at ",(0,r.jsx)(n.a,{href:"https://github.com/ignatandrei/RSCG_idempotency",children:"https://github.com/ignatandrei/RSCG_idempotency"})]}),(0,r.jsxs)(n.p,{children:["Source: ",(0,r.jsx)(n.a,{href:"https://github.com/ignatandrei/RSCG_idempotency",children:"https://github.com/ignatandrei/RSCG_idempotency"})]})]}),"\n",(0,r.jsx)(n.h3,{id:"author",children:"Author"}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["Ignat Andrei\n",(0,r.jsx)(n.img,{src:"https://github.com/ignatandrei.png",alt:"Alt text"})]})}),"\n",(0,r.jsx)(n.h3,{id:"original-readme",children:"Original Readme"}),"\n",(0,r.jsxs)(n.admonition,{type:"note",children:[(0,r.jsx)(n.h1,{id:"rscg-idempotency-generator---usage-guide",children:"RSCG Idempotency Generator - Usage Guide"}),(0,r.jsx)(n.h2,{id:"installation",children:"Installation"}),(0,r.jsxs)(n.p,{children:["Install the package RSCG_Idempotency\n",(0,r.jsx)(n.a,{href:"https://www.nuget.org/packages/RSCG_Idempotency/",children:(0,r.jsx)(n.img,{src:"https://img.shields.io/nuget/v/RSCG_Idempotency.svg",alt:"NuGet"})}),"\nfrom nuget ."]}),(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),(0,r.jsxs)(n.p,{children:["The RSCG (Roslyn Source Code Generator) Idempotency module provides automatic duplicate detection and prevention for method parameters. It uses the ",(0,r.jsx)(n.code,{children:"[Idempotent]"})," attribute to mark parameters that should be tracked, generating helper infrastructure to ensure idempotent behavior."]}),(0,r.jsx)(n.h2,{id:"key-concepts",children:"Key Concepts"}),(0,r.jsx)(n.h3,{id:"what-is-idempotency",children:"What is Idempotency?"}),(0,r.jsx)(n.p,{children:"Idempotency means that performing the same operation multiple times with identical inputs produces the same result as performing it once. This generator helps enforce this by:"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Tracking which parameter values have been processed before"}),"\n",(0,r.jsx)(n.li,{children:"Providing methods to check for duplicates"}),"\n",(0,r.jsx)(n.li,{children:"Cleaning up old cached entries automatically"}),"\n"]}),(0,r.jsx)(n.h3,{id:"generated-components",children:"Generated Components"}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"IdempotentAttribute"})," - Marks parameters for tracking"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"TimeProvider"})," - Supplies UTC timestamps for cache entries"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Helper Methods"})," - Generated per method to manage the duplicate tracking"]}),"\n"]}),(0,r.jsx)(n.h2,{id:"usage",children:"Usage"}),(0,r.jsxs)(n.h3,{id:"step-1-mark-parameters-with-idempotent",children:["Step 1: Mark Parameters with ",(0,r.jsx)(n.code,{children:"[Idempotent]"})]}),(0,r.jsxs)(n.p,{children:["In your C# method, apply the ",(0,r.jsx)(n.code,{children:"[Idempotent]"})," attribute to parameters you want to track:"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"using RSCG_IdemPotency;\n\npublic partial class YourClass\n{\n    public void ProcessData([Idempotent] string input, int retry)\n    {\n        // Your implementation here\n        // The generator will create tracking infrastructure for 'input'\n    }\n}\n"})}),(0,r.jsx)(n.h3,{id:"step-2-generated-helper-methods",children:"Step 2: Generated Helper Methods"}),(0,r.jsxs)(n.p,{children:["For each method with ",(0,r.jsx)(n.code,{children:"[Idempotent]"})," parameters, the generator creates:"]}),(0,r.jsx)(n.h4,{id:"check-for-duplicates",children:"Check for Duplicates"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"private bool MethodName_ExistsBefore(T parameter)\n{\n    // Returns true if the parameter was processed before\n    // Returns false if it's the first occurrence\n}\n"})}),(0,r.jsx)(n.p,{children:"Example:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:'public void ProcessData([Idempotent] string input, int retry)\n{\n    if (ProcessData_ExistsBefore(input))\n    {\n        // This input was already processed\n        Console.WriteLine("Duplicate detected, skipping");\n        return;\n    }\n    \n    // Process new input\n    Console.WriteLine($"Processing: {input}");\n}\n'})}),(0,r.jsx)(n.h4,{id:"clean-up-old-entries",children:"Clean Up Old Entries"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"private void MethodName_DeletePreviousData(DateTimeOffset dt)\n{\n    // Removes cached entries older than the specified date\n}\n"})}),(0,r.jsx)(n.p,{children:"Example:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:'public void CleanupCache()\n{\n    var oneHourAgo = DateTimeOffset.UtcNow.AddHours(-1);\n    ProcessData_DeletePreviousData(oneHourAgo);\n    Console.WriteLine("Cleaned up entries older than 1 hour");\n}\n'})}),(0,r.jsx)(n.h2,{id:"generated-infrastructure-details",children:"Generated Infrastructure Details"}),(0,r.jsx)(n.h3,{id:"caching-mechanism",children:"Caching Mechanism"}),(0,r.jsxs)(n.p,{children:["For each method, a static ",(0,r.jsx)(n.code,{children:"ConcurrentDictionary"})," is created:"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"static ConcurrentDictionary<ParameterType, DateTimeOffset> MethodName_Dict = [];\n"})}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Key"}),": The parameter value being tracked (e.g., string, int)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Value"}),": UTC timestamp when first encountered"]}),"\n"]}),(0,r.jsx)(n.h3,{id:"thread-safety",children:"Thread Safety"}),(0,r.jsxs)(n.p,{children:["The generator uses ",(0,r.jsx)(n.code,{children:"ConcurrentDictionary"})," to ensure thread-safe operations in multi-threaded scenarios."]}),(0,r.jsx)(n.h2,{id:"complete-example",children:"Complete Example"}),(0,r.jsx)(n.h3,{id:"original-method-definition",children:"Original Method Definition"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:'using RSCG_IdemPotency;\n\npublic partial class PaymentProcessor\n{\n    public void ProcessPayment([Idempotent] string transactionId, int maxRetries)\n    {\n        if (ProcessPayment_ExistsBefore(transactionId))\n        {\n            Console.WriteLine($"Transaction {transactionId} already processed");\n            return;\n        }\n        \n        // Process new transaction\n        Console.WriteLine($"Processing payment for transaction: {transactionId}");\n        // ... payment logic ...\n    }\n    \n    public void MaintenanceCleanup()\n    {\n        // Remove transactions processed more than 30 days ago\n        var thirtyDaysAgo = DateTimeOffset.UtcNow.AddDays(-30);\n        ProcessPayment_DeletePreviousData(thirtyDaysAgo);\n    }\n}\n'})}),(0,r.jsx)(n.h3,{id:"generated-code-auto-created-by-rscg",children:"Generated Code (Auto-created by RSCG)"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"partial class PaymentProcessor\n{\n    static ConcurrentDictionary<string, DateTimeOffset> ProcessPayment_Dict = [];\n    \n    private bool ProcessPayment_ExistsBefore(string transactionId)\n    {\n        var tp = IdemPotentTimeProvider.timeProv;\n        var utcDate = tp.GetUtcNow();\n        var existing = ProcessPayment_Dict.GetOrAdd(transactionId, utcDate);\n        if (utcDate == existing) return false; // First time\n        return true; // Seen before\n    }\n    \n    private void ProcessPayment_DeletePreviousData(DateTimeOffset dt)\n    {\n        var values = ProcessPayment_Dict.Where(it => it.Value < dt).ToArray();\n        if (values.Length == 0) return;\n        foreach (var item in values)\n        {\n            ProcessPayment_Dict.TryRemove(item.Key, out _);\n        }\n    }\n}\n"})}),(0,r.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),(0,r.jsx)(n.h3,{id:"1-use-partial-classes",children:"1. Use Partial Classes"}),(0,r.jsxs)(n.p,{children:["The generated code modifies partial classes, so declare your class as ",(0,r.jsx)(n.code,{children:"partial"}),":"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"public partial class MyService\n{\n    public void MyMethod([Idempotent] string input, int retry)\n    {\n        // Implementation\n    }\n}\n"})}),(0,r.jsx)(n.h3,{id:"2-check-for-duplicates-early",children:"2. Check for Duplicates Early"}),(0,r.jsxs)(n.p,{children:["Always call the ",(0,r.jsx)(n.code,{children:"*_ExistsBefore()"})," method at the start of your logic:"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"public void ProcessRequest([Idempotent] string requestId)\n{\n    if (ProcessRequest_ExistsBefore(requestId))\n        return; // Skip duplicate\n    \n    // Main logic\n}\n"})}),(0,r.jsx)(n.h3,{id:"3-implement-cache-cleanup",children:"3. Implement Cache Cleanup"}),(0,r.jsx)(n.p,{children:"For long-running applications, periodically clean old entries:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"public void PeriodicMaintenance()\n{\n    var oneDayAgo = DateTimeOffset.UtcNow.AddDays(-1);\n    MyMethod_DeletePreviousData(oneDayAgo);\n}\n"})}),(0,r.jsx)(n.h3,{id:"4-multiple-parameters",children:"4. Multiple Parameters"}),(0,r.jsxs)(n.p,{children:["If multiple parameters need tracking, apply ",(0,r.jsx)(n.code,{children:"[Idempotent]"})," to each:"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"public void Transfer([Idempotent] string sourceAccount, [Idempotent] string destAccount, decimal amount)\n{\n    if (Transfer_ExistsBefore(sourceAccount) || Transfer_ExistsBefore(destAccount))\n        return;\n    // Process transfer\n}\n"})}),(0,r.jsx)(n.h3,{id:"5-memory-considerations",children:"5. Memory Considerations"}),(0,r.jsx)(n.p,{children:"The tracking dictionary persists for the lifetime of the application. For high-volume scenarios:"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Implement aggressive cleanup schedules"}),"\n",(0,r.jsx)(n.li,{children:"Consider application restart strategies"}),"\n",(0,r.jsx)(n.li,{children:"Monitor cache size in production"}),"\n"]}),(0,r.jsx)(n.h2,{id:"time-provider",children:"Time Provider"}),(0,r.jsxs)(n.p,{children:["The generator uses ",(0,r.jsx)(n.code,{children:"IdemPotentTimeProvider.timeProv"})," (set to ",(0,r.jsx)(n.code,{children:"TimeProvider.System"})," by default) for UTC timestamps. This enables:"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Accurate timestamp recording"}),"\n",(0,r.jsx)(n.li,{children:"Testability (can be mocked in tests)"}),"\n",(0,r.jsx)(n.li,{children:"System-independent time handling"}),"\n"]}),(0,r.jsx)(n.h2,{id:"summary",children:"Summary"}),(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Component"}),(0,r.jsx)(n.th,{children:"Purpose"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"[Idempotent]"})," attribute"]}),(0,r.jsx)(n.td,{children:"Marks parameters for duplicate tracking"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"*_ExistsBefore()"})," method"]}),(0,r.jsx)(n.td,{children:"Checks if a parameter was previously processed"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"*_DeletePreviousData()"})," method"]}),(0,r.jsx)(n.td,{children:"Cleans up old cache entries"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"*_Dict"})," static dictionary"]}),(0,r.jsx)(n.td,{children:"Stores tracked parameter values and timestamps"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"IdemPotentTimeProvider"})}),(0,r.jsx)(n.td,{children:"Supplies UTC timestamps"})]})]})]}),(0,r.jsx)(n.p,{children:"This generator simplifies idempotent operation implementation, reducing the boilerplate needed for duplicate detection and prevention."})]}),"\n",(0,r.jsx)(n.h3,{id:"about",children:"About"}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsx)(n.p,{children:"Generating code for idempotency"})}),"\n",(0,r.jsx)(n.h2,{id:"how-to-use",children:"How to use"}),"\n",(0,r.jsx)(n.h3,{id:"example-source-csproj-source-files",children:"Example (source csproj, source files)"}),"\n",(0,r.jsxs)(a.A,{children:[(0,r.jsxs)(o.A,{value:"csproj",label:"CSharp Project",children:[(0,r.jsxs)(n.p,{children:["This is the CSharp Project that references ",(0,r.jsx)(n.strong,{children:"RSCG_idempotency"})]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",metastring:"showLineNumbers {12}",children:'<Project Sdk="Microsoft.NET.Sdk">\n\n  <PropertyGroup>\n    <OutputType>Exe</OutputType>\n    <TargetFramework>net10.0</TargetFramework>\n    <ImplicitUsings>enable</ImplicitUsings>\n    <Nullable>enable</Nullable>\n  </PropertyGroup>\n\n  <ItemGroup>\n    <PackageReference Include="Microsoft.Extensions.Caching.Memory" Version="10.0.2" />\n    <PackageReference Include="RSCG_idempotency" Version="10.2026.127.2000" />\n  </ItemGroup>\n\t<PropertyGroup>\n\t\t<EmitCompilerGeneratedFiles>true</EmitCompilerGeneratedFiles>\n\t\t<CompilerGeneratedFilesOutputPath>$(BaseIntermediateOutputPath)\\GX</CompilerGeneratedFilesOutputPath>\n\t</PropertyGroup>\n\n</Project>\n\n'})})]}),(0,r.jsxs)(o.A,{value:"D:\\gth\\RSCG_Examples\\v2\\rscg_examples\\RSCG_idempotency\\src\\IdempotencyDemo\\Program.cs",label:"Program.cs",children:[(0,r.jsxs)(n.p,{children:["This is the use of ",(0,r.jsx)(n.strong,{children:"RSCG_idempotency"})," in ",(0,r.jsx)(n.em,{children:"Program.cs"})]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",metastring:"showLineNumbers ",children:'// See https://aka.ms/new-console-template for more information\nusing IdempotencyDemo;\n\nConsole.WriteLine("Hello, World!");\nPurchase p=  new Purchase();\nvar uniq = Guid.NewGuid().ToString("D");\nvar s= p.PurchaseNow(uniq, "Book1", 20);\nConsole.WriteLine(s);\ns = p.PurchaseNow(uniq, "Book1", 20);\nConsole.WriteLine(s);\n'})})]}),(0,r.jsxs)(o.A,{value:"D:\\gth\\RSCG_Examples\\v2\\rscg_examples\\RSCG_idempotency\\src\\IdempotencyDemo\\Purchase.cs",label:"Purchase.cs",children:[(0,r.jsxs)(n.p,{children:["This is the use of ",(0,r.jsx)(n.strong,{children:"RSCG_idempotency"})," in ",(0,r.jsx)(n.em,{children:"Purchase.cs"})]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",metastring:"showLineNumbers ",children:'using System;\nusing System.Collections.Generic;\nusing System.Text;\n\nnamespace IdempotencyDemo;\n\ninternal partial class Purchase\n{\n    public bool PurchaseNow([RSCG_IdemPotency.Idempotent]string UniqueId, string idProduct,int quantity)\n    {\n        if(PurchaseNow_ExistsBefore(UniqueId))\n            return false;\n\n        Console.WriteLine($"bought ! ");\n        return true;\n    }\n}\n\n'})})]})]}),"\n",(0,r.jsx)(n.h3,{id:"generated-files",children:"Generated Files"}),"\n",(0,r.jsx)(n.p,{children:"Those are taken from $(BaseIntermediateOutputPath)\\GX"}),"\n",(0,r.jsxs)(a.A,{children:[(0,r.jsx)(o.A,{value:"D:\\gth\\RSCG_Examples\\v2\\rscg_examples\\RSCG_idempotency\\src\\IdempotencyDemo\\obj\\GX\\RSCG_idempotency\\RSCG_idempotency.IPGen\\IdempotencyDemo_Purchase_PurchaseNow_UniqueId.cs",label:"IdempotencyDemo_Purchase_PurchaseNow_UniqueId.cs",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",metastring:"showLineNumbers ",children:'\n//------------------------------------------------------------------------------\n// <auto-generated>\n//     This code was generated by a tool. Name: https://github.com/ignatandrei/RSCG_idempotency\n//     Runtime Version: 2026-01-27T18:12:56.0000000\n//     ( name : Ivo Andric is feeling cut in Vientiane )\n//\n//     Changes to this file may cause incorrect behavior and will be lost if\n//     the code is regenerated.\n//\n//</auto-generated>\n//------------------------------------------------------------------------------\nusing System.Linq;\nusing Microsoft.Extensions.Caching.Memory;\nusing System.Collections.Concurrent;\nnamespace IdempotencyDemo {\npartial class Purchase {\n\n    \n    static ConcurrentDictionary<string , DateTimeOffset> PurchaseNow_Dict=[];\n    /// <summary>\n    /// Verify if the argument was before\n    ///</summary>\n    ///<param name="input">the data</param>\n    /// <returns>true if exists before;false if encountered first time</returns>\n    [global::System.CodeDom.Compiler.GeneratedCode("RSCG_idempotency", "2026.10127.11812")]\n    private bool PurchaseNow_ExistsBefore( \n        string UniqueId) {\n        \n        var tp=IdemPotentTimeProvider.timeProv;\n        var utcDate = tp.GetUtcNow();\n        var existing = PurchaseNow_Dict.GetOrAdd(UniqueId,utcDate);\n        if(utcDate == existing) return false;//it was inserted now\n        return true;\n    \n    }\n    /// <summary>\n    /// clear the data before a date\n    ///</summary>\n    ///<param name="dt">date to remove previous</param>\n    private void PurchaseNow_DeletePreviousData(DateTimeOffset dt)\n    {\n        var values = PurchaseNow_Dict.Where(it => it.Value < dt).ToArray();\n        if (values.Length == 0) return;\n        foreach (var item in values)\n        {\n            PurchaseNow_Dict.TryRemove(item.Key,out _);\n        }\n    }\n\n}\n\n}\n\n'})})}),(0,r.jsx)(o.A,{value:"D:\\gth\\RSCG_Examples\\v2\\rscg_examples\\RSCG_idempotency\\src\\IdempotencyDemo\\obj\\GX\\RSCG_idempotency\\RSCG_idempotency.IPGen\\IdempotentAttribute.gen.cs",label:"IdempotentAttribute.gen.cs",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",metastring:"showLineNumbers ",children:"\nnamespace RSCG_IdemPotency\n{\n    //TODO : Add versioning info in the attribute\n    [global::Microsoft.CodeAnalysis.EmbeddedAttribute]\n    [System.AttributeUsage(System.AttributeTargets.Parameter, AllowMultiple = false)]\n    internal class IdempotentAttribute : global::System.Attribute\n    {\n    }\n}\n\n"})})}),(0,r.jsx)(o.A,{value:"D:\\gth\\RSCG_Examples\\v2\\rscg_examples\\RSCG_idempotency\\src\\IdempotencyDemo\\obj\\GX\\RSCG_idempotency\\RSCG_idempotency.IPGen\\Microsoft.CodeAnalysis.EmbeddedAttribute.cs",label:"Microsoft.CodeAnalysis.EmbeddedAttribute.cs",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",metastring:"showLineNumbers ",children:"// <auto-generated/>\nnamespace Microsoft.CodeAnalysis\n{\n    internal sealed partial class EmbeddedAttribute : global::System.Attribute\n    {\n    }\n}\n"})})}),(0,r.jsx)(o.A,{value:"D:\\gth\\RSCG_Examples\\v2\\rscg_examples\\RSCG_idempotency\\src\\IdempotencyDemo\\obj\\GX\\RSCG_idempotency\\RSCG_idempotency.IPGen\\TimeProvider.gen.cs",label:"TimeProvider.gen.cs",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",metastring:"showLineNumbers ",children:"\nclass IdemPotentTimeProvider{\n    internal static TimeProvider timeProv= TimeProvider.System;\n}\n\n"})})})]}),"\n",(0,r.jsx)(n.h2,{id:"useful",children:"Useful"}),"\n",(0,r.jsx)(n.h3,{id:"download-example-net--c",children:"Download Example (.NET  C#)"}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:t(91709).A+"",children:"Download Example project RSCG_idempotency "})})}),"\n",(0,r.jsx)(n.h3,{id:"share-rscg_idempotency",children:"Share RSCG_idempotency"}),"\n",(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{children:(0,r.jsx)("a",{href:"https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FRSCG_idempotency&quote=RSCG_idempotency",title:"Share on Facebook",target:"_blank",children:"Share on Facebook"})}),(0,r.jsx)("li",{children:(0,r.jsx)("a",{href:"https://twitter.com/intent/tweet?source=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FRSCG_idempotency&text=RSCG_idempotency:%20https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FRSCG_idempotency",target:"_blank",title:"Tweet",children:"Share in Twitter"})}),(0,r.jsx)("li",{children:(0,r.jsx)("a",{href:"http://www.reddit.com/submit?url=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FRSCG_idempotency&title=RSCG_idempotency",target:"_blank",title:"Submit to Reddit",children:"Share on Reddit"})}),(0,r.jsx)("li",{children:(0,r.jsx)("a",{href:"http://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FRSCG_idempotency&title=RSCG_idempotency&summary=&source=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FRSCG_idempotency",target:"_blank",title:"Share on LinkedIn",children:"Share on Linkedin"})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://ignatandrei.github.io/RSCG_Examples/v2/docs/RSCG_idempotency",children:"https://ignatandrei.github.io/RSCG_Examples/v2/docs/RSCG_idempotency"})}),"\n",(0,r.jsx)(l,{})]})}function x(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(g,{...e})}):g(e)}}}]);