"use strict";(self.webpackChunkrscg_examples=self.webpackChunkrscg_examples||[]).push([[2322],{3427:(e,n,r)=>{r.d(n,{A:()=>t});const t=r.p+"assets/files/corecraft-20fe4bb2da3d21453acf2bdf7538caaf.zip"},93492:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>h,contentTitle:()=>c,default:()=>p,frontMatter:()=>d,metadata:()=>t,toc:()=>u});const t=JSON.parse('{"id":"RSCG-Examples/corecraft","title":"114 - corecraft","description":"Decomposing properties and class into Domain Models. Seems however too complicated to use","source":"@site/docs/RSCG-Examples/corecraft.md","sourceDirName":"RSCG-Examples","slug":"/corecraft","permalink":"/RSCG_Examples/v2/docs/corecraft","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/RSCG-Examples/corecraft.md","tags":[],"version":"current","sidebarPosition":1140,"frontMatter":{"sidebar_position":1140,"title":"114 - corecraft","description":"Decomposing properties and class into Domain Models. Seems however too complicated to use","slug":"/corecraft"},"sidebar":"tutorialSidebar","previous":{"title":"113 - sourcedepend","permalink":"/RSCG_Examples/v2/docs/sourcedepend"},"next":{"title":"115 - UnionsGenerator","permalink":"/RSCG_Examples/v2/docs/UnionsGenerator"}}');var s=r(74848),o=r(28453),a=r(11470),i=r(19365),l=r(14252);const d={sidebar_position:1140,title:"114 - corecraft",description:"Decomposing properties and class into Domain Models. Seems however too complicated to use",slug:"/corecraft"},c="corecraft  by",h={},u=[{value:"NuGet / site data",id:"nuget--site-data",level:2},{value:"Details",id:"details",level:2},{value:"Info",id:"info",level:3},{value:"Original Readme",id:"original-readme",level:3},{value:"Introduction",id:"introduction",level:2},{value:"Main Features",id:"main-features",level:2},{value:"NuGet Packages",id:"nuget-packages",level:2},{value:"Basic usage",id:"basic-usage",level:2},{value:"License",id:"license",level:2},{value:"About",id:"about",level:3},{value:"How to use",id:"how-to-use",level:2},{value:"Example (source csproj, source files)",id:"example-source-csproj-source-files",level:3},{value:"Generated Files",id:"generated-files",level:3},{value:"Useful",id:"useful",level:2},{value:"Download Example (.NET  C# )",id:"download-example-net--c-",level:3},{value:"Share corecraft",id:"share-corecraft",level:3},{value:"In the same category (FilesToCode) - 13 other generators",id:"in-the-same-category-filestocode---13-other-generators",level:3},{value:"Chorn.EmbeddedResourceAccessGenerator",id:"chornembeddedresourceaccessgenerator",level:4},{value:"Datacute.EmbeddedResourcePropertyGenerator",id:"datacuteembeddedresourcepropertygenerator",level:4},{value:"DotnetYang",id:"dotnetyang",level:4},{value:"EmbedResourceCSharp",id:"embedresourcecsharp",level:4},{value:"LingoGen",id:"lingogen",level:4},{value:"NotNotAppSettings",id:"notnotappsettings",level:4},{value:"Podimo.ConstEmbed",id:"podimoconstembed",level:4},{value:"ResXGenerator",id:"resxgenerator",level:4},{value:"RSCG_JSON2Class",id:"rscg_json2class",level:4},{value:"RSCG_Utils",id:"rscg_utils",level:4},{value:"ThisAssembly_Resources",id:"thisassembly_resources",level:4},{value:"ThisAssembly.Strings",id:"thisassemblystrings",level:4},{value:"Weave",id:"weave",level:4}];function m(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"corecraft--by",children:"corecraft  by"})}),"\n",(0,s.jsx)(l.A,{toc:u}),"\n",(0,s.jsx)(n.h2,{id:"nuget--site-data",children:"NuGet / site data"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://www.nuget.org/packages/corecraft/",children:(0,s.jsx)(n.img,{src:"https://img.shields.io/nuget/dt/corecraft?label=corecraft",alt:"Nuget"})}),"\n",(0,s.jsx)(n.a,{href:"https://github.com/AlexNav73/CoreCraft",children:(0,s.jsx)(n.img,{src:"https://img.shields.io/github/last-commit/AlexNav73/CoreCraft?label=updated",alt:"GitHub last commit"})}),"\n",(0,s.jsx)(n.img,{src:"https://img.shields.io/github/stars/AlexNav73/CoreCraft?style=social",alt:"GitHub Repo stars"})]}),"\n",(0,s.jsx)(n.h2,{id:"details",children:"Details"}),"\n",(0,s.jsx)(n.h3,{id:"info",children:"Info"}),"\n",(0,s.jsxs)(n.admonition,{type:"info",children:[(0,s.jsxs)(n.p,{children:["Name: ",(0,s.jsx)(n.strong,{children:"corecraft"})]}),(0,s.jsx)(n.p,{children:"A core library to build cross-platform and highly customizable domain models"}),(0,s.jsx)(n.p,{children:"Author:"}),(0,s.jsxs)(n.p,{children:["NuGet:\n",(0,s.jsx)(n.em,{children:(0,s.jsx)(n.a,{href:"https://www.nuget.org/packages/corecraft/",children:"https://www.nuget.org/packages/corecraft/"})})]}),(0,s.jsxs)(n.p,{children:["You can find more details at ",(0,s.jsx)(n.a,{href:"https://github.com/AlexNav73/CoreCraft",children:"https://github.com/AlexNav73/CoreCraft"})]}),(0,s.jsxs)(n.p,{children:["Source: ",(0,s.jsx)(n.a,{href:"https://github.com/AlexNav73/CoreCraft",children:"https://github.com/AlexNav73/CoreCraft"})]})]}),"\n",(0,s.jsx)(n.h3,{id:"original-readme",children:"Original Readme"}),"\n",(0,s.jsxs)(n.admonition,{type:"note",children:[(0,s.jsx)("p",{align:"center",children:(0,s.jsx)("img",{src:"images/logo.png",width:"15%"})}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://github.com/AlexNav73/CoreCraft/actions",children:(0,s.jsx)(n.img,{src:"https://github.com/AlexNav73/CoreCraft/workflows/releasing/badge.svg",alt:"build"})}),"\n",(0,s.jsx)(n.a,{href:"https://codecov.io/gh/AlexNav73/CoreCraft",children:(0,s.jsx)(n.img,{src:"https://codecov.io/gh/AlexNav73/CoreCraft/branch/master/graph/badge.svg?token=Q6ZY0WHL9J",alt:"codecov"})})," ",(0,s.jsx)(n.img,{src:"https://img.shields.io/nuget/dt/CoreCraft",alt:"Nuget"})," ",(0,s.jsx)(n.img,{src:"https://img.shields.io/github/license/AlexNav73/CoreCraft",alt:"GitHub"})," ",(0,s.jsx)(n.img,{src:"https://img.shields.io/tokei/lines/github/AlexNav73/CoreCraft",alt:"Lines of code"})]}),(0,s.jsx)(n.h2,{id:"introduction",children:"Introduction"}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"CoreCraft"})," is a comprehensive toolkit designed to simplify domain modeling and data management in .NET applications. It offers a range of powerful features and functionalities that enable developers to build robust and scalable domain models."]}),(0,s.jsx)(n.h2,{id:"main-features",children:"Main Features"}),(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"CoreCraft"})," provides a wealth of features, including:"]}),(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Automatic Domain Model Generation with Roslyn Source Generators"}),": ",(0,s.jsx)(n.code,{children:"CoreCraft"})," leverages Roslyn Source Generators to automatically generate domain models based on your schema. This automated process eliminates the need for manual coding, saving you time and effort. The generated models are accurate, consistent, and reflect the structure of your schema."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Change Tracking"}),": ",(0,s.jsx)(n.code,{children:"CoreCraft"})," incorporates change tracking mechanisms that allow you to monitor modifications to your domain model. By tracking changes at a granular level, ",(0,s.jsx)(n.code,{children:"CoreCraft"})," notifies you of specific modifications, enabling you to respond effectively. This feature eliminates the need for manual change detection and parsing of the entire model."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Undo/Redo Support"}),": ",(0,s.jsx)(n.code,{children:"CoreCraft"})," simplifies the implementation of undo and redo operations in your application. It provides built-in support for managing and reverting changes, giving users the ability to undo actions and redo them as needed."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Data integrity"}),": ",(0,s.jsx)(n.code,{children:"CoreCraft"})," follows a command-based execution approach, where the domain model is read-only by default, and modifications are made through commands. When a command executes, it operates on a snapshot of the model, ensuring data integrity in case of exceptions during command execution."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Persistence Options"}),": ",(0,s.jsx)(n.code,{children:"CoreCraft"})," offers seamless support for persisting your generated domain model. With ",(0,s.jsx)(n.code,{children:"CoreCraft"}),", there's no need for additional code to handle persistence. It supports saving and loading the model's state to a ",(0,s.jsx)(n.strong,{children:"SQLite"})," database and ",(0,s.jsx)(n.strong,{children:"JSON"})," files. The toolkit takes care of the storage and retrieval process, making it convenient and hassle-free. Additionally, ",(0,s.jsx)(n.code,{children:"CoreCraft"})," allows for easy implementation of additional storage options, making it flexible to adapt to your specific requirements."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Plugin Architecture Support"}),": ",(0,s.jsx)(n.code,{children:"CoreCraft"})," is well-suited for use in a plugin architecture. It provides the necessary abstractions and features to support modular development, allowing different plugins to contribute to the overall application state."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Reactive Extensions (Rx.NET) Integration"}),": ",(0,s.jsx)(n.code,{children:"CoreCraft"})," incorporates Reactive Extensions (",(0,s.jsx)(n.a,{href:"https://github.com/dotnet/reactive",children:"Rx.NET"}),") to provide a flexible subscription mechanism. It utilizes the ",(0,s.jsx)(n.code,{children:"IObservable"})," and ",(0,s.jsx)(n.code,{children:"IObserver"})," interfaces, allowing you to leverage the power of Rx.NET for event-driven programming and reactive data processing. This integration enables you to easily subscribe to change events and apply custom logic using the extensive set of operators provided by ",(0,s.jsx)(n.code,{children:"Rx.NET"}),"."]}),"\n"]}),"\n"]}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"CoreCraft"})," empowers developers to create robust and scalable domain models with ease. With automatic model generation, change tracking, persistence options, and support for undo/redo operations, ",(0,s.jsx)(n.code,{children:"CoreCraft"})," simplifies application state management and enhances the user experience."]}),(0,s.jsx)(n.h2,{id:"nuget-packages",children:"NuGet Packages"}),(0,s.jsx)(n.p,{children:"CoreCraft is distributed as NuGet packages."}),(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"Package"}),(0,s.jsx)(n.th,{style:{textAlign:"center"},children:"Status"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"CoreCraft"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:(0,s.jsx)(n.a,{href:"https://www.nuget.org/packages/CoreCraft",children:(0,s.jsx)(n.img,{src:"https://img.shields.io/nuget/vpre/CoreCraft?color=blue",alt:"Nuget (with prereleases)"})})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"CoreCraft.Generators"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:(0,s.jsx)(n.a,{href:"https://www.nuget.org/packages/CoreCraft.Generators",children:(0,s.jsx)(n.img,{src:"https://img.shields.io/nuget/vpre/CoreCraft.Generators?color=blue",alt:"Nuget (with prereleases)"})})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"CoreCraft.Storage.SQLite"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:(0,s.jsx)(n.a,{href:"https://www.nuget.org/packages/CoreCraft.Storage.SQLite",children:(0,s.jsx)(n.img,{src:"https://img.shields.io/nuget/vpre/CoreCraft.Storage.SQLite?color=blue",alt:"Nuget (with prereleases)"})})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"CoreCraft.Storage.Json"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:(0,s.jsx)(n.a,{href:"https://www.nuget.org/packages/CoreCraft.Storage.Json",children:(0,s.jsx)(n.img,{src:"https://img.shields.io/nuget/vpre/CoreCraft.Storage.Json?color=blue",alt:"Nuget (with prereleases)"})})})]})]})]}),(0,s.jsx)(n.h2,{id:"basic-usage",children:"Basic usage"}),(0,s.jsxs)(n.p,{children:["The only thing is needed to start using the ",(0,s.jsx)(n.code,{children:"CoreCraft"})," toolkit is to define the schema for the domain model. Create a ",(0,s.jsx)(n.code,{children:"*.model.json"})," file that describes your entities, properties and their relations. Here's an example:"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "shards": [\n    {\n      "name": "ToDo",\n      "entities": [\n        {\n          "name": "ToDoItem",\n          "properties": [\n            { "name": "Name", "type": "string", "defaultValue": "string.Empty" }\n          ]\n        }\n      ],\n      "collections": [\n        { "name": "Items", "entityType": "ToDoItem" }\n      ],\n      "relations": []\n    }\n  ]\n}\n'})}),(0,s.jsx)(n.p,{children:"And add the additional files entry to the project file:"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'<ItemGroup>\n  <AdditionalFiles Include="Model.model.json" />\n</ItemGroup>\n'})}),(0,s.jsxs)(n.p,{children:["The model schema is the only piece needed to define data of your domain model. Everything else will be automatically generated by the ",(0,s.jsx)(n.code,{children:"CoreCraft.Generators"})," package."]}),(0,s.jsxs)(n.p,{children:["Now, an instance of the domain model can be created using an instance of generated ",(0,s.jsx)(n.code,{children:"ToDoModelShard"})," class:"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cs",children:"// Create an instance of the domain model\nvar model = new DomainModel(new[] { new ToDoModelShard() });\n"})}),(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note:"})," instead of using ",(0,s.jsx)(n.code,{children:"DomainModel"})," class directly, you can use build-in classes (",(0,s.jsx)(n.code,{children:"AutoSaveDomainModel"}),", ",(0,s.jsx)(n.code,{children:"UndoRedoDomainModel"}),") or inherit from it and implement custom logic"]}),"\n"]}),(0,s.jsx)(n.p,{children:"Then we need to subscribe to the model changes by providing an event handler method to handle the collection changes.:"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cs",children:'// Subscribe to Items collection change events \nusing var subscription = model.For<IToDoChangesFrame>()\n    .With(x => x.Items)\n    .Subscribe(OnItemChanged);\n\n// Observe changes\nvoid OnItemChanged(Change<ICollectionChangeSet<ToDoItem, ToDoItemProperties>> changes)\n{\n    foreach (var c in changes.Hunk)\n    {\n        Console.WriteLine($"Entity [{c.Entity}] has been {c.Action}ed.");\n        Console.WriteLine($"   Old data: {c.OldData}");\n        Console.WriteLine($"   New data: {c.NewData}");\n    }\n}\n'})}),(0,s.jsx)(n.p,{children:"When subscription is done, let's execute a command to modify the model:"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cs",children:'// Adds new item to the collection\nmodel.Run<IMutableToDoModelShard>(\n    (shard, _) => shard.Items.Add(new() { Name = "test" }));\n'})}),(0,s.jsx)(n.p,{children:"Save the domain model to an SQLite database file."}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cs",children:'var storage = new SqliteStorage(Array.Empty<IMigration>());\n\nmodel.Save(storage, "my_data.db");\n'})}),(0,s.jsxs)(n.p,{children:["Please refer to the ",(0,s.jsx)(n.a,{href:"https://github.com/AlexNav73/CoreCraft/wiki/Getting-Started",children:"documentation"})," for comprehensive information on using the ",(0,s.jsx)(n.code,{children:"CoreCraft"})," toolkit and its features."]}),(0,s.jsx)(n.h2,{id:"license",children:"License"}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://github.com/AlexNav73/CoreCraft/LICENSE",children:"MIT"}),"."]})]}),"\n",(0,s.jsx)(n.h3,{id:"about",children:"About"}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsx)(n.p,{children:"Decomposing properties and class into Domain Models. Seems however too complicated to use"})}),"\n",(0,s.jsx)(n.h2,{id:"how-to-use",children:"How to use"}),"\n",(0,s.jsx)(n.h3,{id:"example-source-csproj-source-files",children:"Example (source csproj, source files)"}),"\n",(0,s.jsxs)(a.A,{children:[(0,s.jsxs)(i.A,{value:"csproj",label:"CSharp Project",children:[(0,s.jsxs)(n.p,{children:["This is the CSharp Project that references ",(0,s.jsx)(n.strong,{children:"corecraft"})]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",metastring:"showLineNumbers {22}",children:'<Project Sdk="Microsoft.NET.Sdk">\n\n  <PropertyGroup>\n    <OutputType>Exe</OutputType>\n    <TargetFramework>net8.0</TargetFramework>\n    <ImplicitUsings>enable</ImplicitUsings>\n    <Nullable>enable</Nullable>\n  </PropertyGroup>\n\t<PropertyGroup>\n\t\t<EmitCompilerGeneratedFiles>true</EmitCompilerGeneratedFiles>\n\t\t<CompilerGeneratedFilesOutputPath>$(BaseIntermediateOutputPath)\\GX</CompilerGeneratedFilesOutputPath>\n\t</PropertyGroup>\n\t<ItemGroup>\n\t  <None Remove="Person.model.json" />\n\t</ItemGroup>\n\t<ItemGroup>\n\t  <AdditionalFiles Include="Person.model.json">\n\t    <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>\n\t  </AdditionalFiles>\n\t</ItemGroup>\n\t<ItemGroup>\n\t  <PackageReference Include="CoreCraft" Version="0.6.0" />\n\t  <PackageReference Include="CoreCraft.Generators" Version="0.6.0">\n\t    <PrivateAssets>all</PrivateAssets>\n\t    <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>\n\t  </PackageReference>\n\t</ItemGroup>\n</Project>\n\n'})})]}),(0,s.jsxs)(i.A,{value:"D:\\gth\\RSCG_Examples\\v2\\rscg_examples\\corecraft\\src\\Json2Code\\Json2Code.csproj",label:"Json2Code.csproj",children:[(0,s.jsxs)(n.p,{children:["This is the use of ",(0,s.jsx)(n.strong,{children:"corecraft"})," in ",(0,s.jsx)(n.em,{children:"Json2Code.csproj"})]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",metastring:"showLineNumbers ",children:'<Project Sdk="Microsoft.NET.Sdk">\n\n  <PropertyGroup>\n    <OutputType>Exe</OutputType>\n    <TargetFramework>net8.0</TargetFramework>\n    <ImplicitUsings>enable</ImplicitUsings>\n    <Nullable>enable</Nullable>\n  </PropertyGroup>\n\t<PropertyGroup>\n\t\t<EmitCompilerGeneratedFiles>true</EmitCompilerGeneratedFiles>\n\t\t<CompilerGeneratedFilesOutputPath>$(BaseIntermediateOutputPath)\\GX</CompilerGeneratedFilesOutputPath>\n\t</PropertyGroup>\n\t<ItemGroup>\n\t  <None Remove="Person.model.json" />\n\t</ItemGroup>\n\t<ItemGroup>\n\t  <AdditionalFiles Include="Person.model.json">\n\t    <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>\n\t  </AdditionalFiles>\n\t</ItemGroup>\n\t<ItemGroup>\n\t  <PackageReference Include="CoreCraft" Version="0.6.0" />\n\t  <PackageReference Include="CoreCraft.Generators" Version="0.6.0">\n\t    <PrivateAssets>all</PrivateAssets>\n\t    <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>\n\t  </PackageReference>\n\t</ItemGroup>\n</Project>\n\n'})})]}),(0,s.jsxs)(i.A,{value:"D:\\gth\\RSCG_Examples\\v2\\rscg_examples\\corecraft\\src\\Json2Code\\Program.cs",label:"Program.cs",children:[(0,s.jsxs)(n.p,{children:["This is the use of ",(0,s.jsx)(n.strong,{children:"corecraft"})," in ",(0,s.jsx)(n.em,{children:"Program.cs"})]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",metastring:"showLineNumbers ",children:'using CoreCraft;\nusing CoreCraft.ChangesTracking;\nusing CoreCraft.Subscription;\nusing Json2Code.Person;\nusing Json2Code.Person.Entities;\nvar model = new DomainModel(new[] { new Json2Code.Person.PersonShardModelShard() });\n\n// Subscribe to Items collection change events \nusing var subscription = model.For<IPersonShardChangesFrame>()\n    .With(x => x.Persons)\n    .Subscribe(OnItemChanged);\n\n// Observe changes\nvoid OnItemChanged(Change<ICollectionChangeSet<Person, PersonProperties>> changes)\n{\n    foreach (var c in changes.Hunk)\n    {\n        Console.WriteLine($"Entity [{c.Entity}] has been {c.Action}ed.");\n        Console.WriteLine($"   Old data: {c.OldData}");\n        Console.WriteLine($"   New data: {c.NewData}");\n    }\n}\n\n\nawait model.Run<IMutablePersonShardModelShard> (\n    (shard, _) =>\n    {\n        shard.Persons.Add(new() { FirstName = "A", LastName = "B" });\n        //shard.Persons.Remove(shard.Persons.First());\n    });\nawait model.Run<IMutablePersonShardModelShard>(\n    (shard, _) =>\n    {        \n        shard.Persons.Modify(shard.Persons.First(), p => p with { FirstName = "C" });\n    });\n\nawait model.Run<IMutablePersonShardModelShard>(\n    (shard, _) =>\n    {\n        shard.Persons.Remove(shard.Persons.First());\n    });\n\n\n\nConsole.WriteLine("Press any key to exit...");\nConsole.ReadKey();\n\n'})})]}),(0,s.jsxs)(i.A,{value:"D:\\gth\\RSCG_Examples\\v2\\rscg_examples\\corecraft\\src\\Json2Code\\Person.model.json",label:"Person.model.json",children:[(0,s.jsxs)(n.p,{children:["This is the use of ",(0,s.jsx)(n.strong,{children:"corecraft"})," in ",(0,s.jsx)(n.em,{children:"Person.model.json"})]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",metastring:"showLineNumbers ",children:'{\n  "shards": [\n    {\n      "name": "PersonShard",\n      "entities": [\n        {\n          "name": "Person",\n          "properties": [\n            {\n              "name": "FirstName",\n              "type": "string",\n              "defaultValue": "\\"Andrei\\""\n            },\n            {\n              "name": "LastName",\n              "type": "string",\n              "defaultValue": "\\"Ignat\\""\n            }\n          ]\n        }\n      ],\n      "collections": [\n        {\n          "name": "Persons",\n          "entityType": "Person"\n        }\n      ],\n      "relations": []\n    }\n  ]\n}\n'})})]})]}),"\n",(0,s.jsx)(n.h3,{id:"generated-files",children:"Generated Files"}),"\n",(0,s.jsx)(n.p,{children:"Those are taken from $(BaseIntermediateOutputPath)\\GX"}),"\n",(0,s.jsx)(a.A,{children:(0,s.jsx)(i.A,{value:"D:\\gth\\RSCG_Examples\\v2\\rscg_examples\\corecraft\\src\\Json2Code\\obj\\GX\\CoreCraft.Generators\\CoreCraft.Generators.ApplicationModelGenerator\\Person.g.cs",label:"Person.g.cs",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",metastring:"showLineNumbers ",children:'\n//------------------------------------------------------------------------------\n// <auto-generated>\n//     This code was generated by the tool.\n//\n//     Changes to this file may cause incorrect behavior and will be lost if\n//     the code is regenerated.\n// </auto-generated>\n//------------------------------------------------------------------------------\n\n#nullable enable\n\nnamespace Json2Code.Person\n{\n    using CoreCraft.Core;\n    using CoreCraft.ChangesTracking;\n    using CoreCraft.Persistence;\n    using Json2Code.Person.Entities;\n\n    [global::System.CodeDom.Compiler.GeneratedCodeAttribute("C# Source Generator", "1.0.0.0")]\n    [global::System.Runtime.CompilerServices.CompilerGeneratedAttribute()]\n    public interface IPersonShardModelShard : IModelShard\n    {\n        ICollection<Person, PersonProperties> Persons { get; }\n\n    }\n\n    [global::System.CodeDom.Compiler.GeneratedCodeAttribute("C# Source Generator", "1.0.0.0")]\n    [global::System.Runtime.CompilerServices.CompilerGeneratedAttribute()]\n    public interface IMutablePersonShardModelShard : IModelShard\n    {\n        IMutableCollection<Person, PersonProperties> Persons { get; }\n\n    }\n\n    [global::System.CodeDom.Compiler.GeneratedCodeAttribute("C# Source Generator", "1.0.0.0")]\n    [global::System.Runtime.CompilerServices.CompilerGeneratedAttribute()]\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute()]\n    [global::System.Diagnostics.CodeAnalysis.ExcludeFromCodeCoverageAttribute()]\n    internal static class PersonShardModelShardInfo\n    {\n        public static readonly CollectionInfo PersonsInfo = new("PersonShard", "Persons", new PropertyInfo[] { new("FirstName", typeof(string), false), new("LastName", typeof(string), false) });\n\n    }\n\n    [global::System.CodeDom.Compiler.GeneratedCodeAttribute("C# Source Generator", "1.0.0.0")]\n    [global::System.Runtime.CompilerServices.CompilerGeneratedAttribute()]\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute()]\n    [global::System.Diagnostics.CodeAnalysis.ExcludeFromCodeCoverageAttribute()]\n    internal sealed partial class PersonShardModelShard : IPersonShardModelShard\n    {\n        public const string PersonsId = "Json2Code.Person.PersonShard.Persons";\n\n        public PersonShardModelShard()\n        {\n            Persons = new Collection<Person, PersonProperties>(\n                PersonsId,\n                static id => new Person(id),\n                static () => new PersonProperties());\n\n        }\n\n        internal PersonShardModelShard(IMutablePersonShardModelShard mutable)\n        {\n            Persons = ((IMutableState<ICollection<Person, PersonProperties>>)mutable.Persons).AsReadOnly();\n\n        }\n\n        public ICollection<Person, PersonProperties> Persons { get; init; } = null!;\n\n    }\n\n    internal sealed partial class PersonShardModelShard : IReadOnlyState<IMutablePersonShardModelShard>\n    {\n        public IMutablePersonShardModelShard AsMutable(global::System.Collections.Generic.IEnumerable<IFeature> features)\n        {\n            var persons = (IMutableCollection<Person, PersonProperties>)Persons;\n\n\n            foreach (var feature in features)\n            {\n                persons = feature.Decorate(this, persons);\n\n            }\n\n            return new MutablePersonShardModelShard()\n            {\n                Persons = persons,\n\n            };\n        }\n    }\n\n    internal sealed partial class PersonShardModelShard : ICanBeSaved\n    {\n        public void Save(IRepository repository)\n        {\n            repository.Save(PersonShardModelShardInfo.PersonsInfo, Persons);\n\n        }\n    }\n\n    internal sealed partial class PersonShardModelShard : IFeatureContext\n    {\n        IChangesFrame IFeatureContext.GetOrAddFrame(IMutableModelChanges modelChanges)\n        {\n            return modelChanges.Register(static () => new PersonShardChangesFrame());\n        }\n    }\n\n    [global::System.CodeDom.Compiler.GeneratedCodeAttribute("C# Source Generator", "1.0.0.0")]\n    [global::System.Runtime.CompilerServices.CompilerGeneratedAttribute()]\n    public interface IPersonShardChangesFrame : IChangesFrame\n    {\n        ICollectionChangeSet<Person, PersonProperties> Persons { get; }\n\n    }\n\n    [global::System.CodeDom.Compiler.GeneratedCodeAttribute("C# Source Generator", "1.0.0.0")]\n    [global::System.Runtime.CompilerServices.CompilerGeneratedAttribute()]\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute()]\n    [global::System.Diagnostics.CodeAnalysis.ExcludeFromCodeCoverageAttribute()]\n    internal sealed class PersonShardChangesFrame : IPersonShardChangesFrame, IChangesFrameEx, ICanBeSaved\n    {\n        public PersonShardChangesFrame()\n        {\n            Persons = new CollectionChangeSet<Person, PersonProperties>(PersonShardModelShard.PersonsId);\n\n        }\n\n        public ICollectionChangeSet<Person, PersonProperties> Persons { get; private set; }\n\n\n        ICollectionChangeSet<TEntity, TProperty>? IChangesFrame.Get<TEntity, TProperty>(ICollection<TEntity, TProperty> collection)\n        {\n            if (Persons.Id == collection.Id) return Persons as ICollectionChangeSet<TEntity, TProperty>;\n\n            throw new System.InvalidOperationException("Unable to find collection\'s changes set");\n        }\n\n        IRelationChangeSet<TParent, TChild>? IChangesFrame.Get<TParent, TChild>(IRelation<TParent, TChild> relation)\n        {\n\n            throw new System.InvalidOperationException($"Unable to find relation\'s change set");\n        }\n\n        IChangesFrame IChangesFrame.Invert()\n        {\n            return new PersonShardChangesFrame()\n            {\n                Persons = Persons.Invert(),\n\n            };\n        }\n\n        public void Apply(IModel model)\n        {\n            var modelShard = model.Shard<IMutablePersonShardModelShard>();\n\n            Persons.Apply(modelShard.Persons);\n        }\n\n        public bool HasChanges()\n        {\n            return Persons.HasChanges();\n        }\n\n        public IChangesFrame Merge(IChangesFrame frame)\n        {\n            var typedFrame = (PersonShardChangesFrame)frame;\n\n            return new PersonShardChangesFrame()\n            {\n                Persons = Persons.Merge(typedFrame.Persons),\n\n            };\n        }\n\n        public void Save(IRepository repository)\n        {\n            repository.Save(PersonShardModelShardInfo.PersonsInfo, Persons);\n\n        }\n\n    }\n\n    [global::System.CodeDom.Compiler.GeneratedCodeAttribute("C# Source Generator", "1.0.0.0")]\n    [global::System.Runtime.CompilerServices.CompilerGeneratedAttribute()]\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute()]\n    [global::System.Diagnostics.CodeAnalysis.ExcludeFromCodeCoverageAttribute()]\n    internal sealed class MutablePersonShardModelShard : IMutablePersonShardModelShard, IMutableState<IPersonShardModelShard>, ICanBeLoaded\n    {\n        public IMutableCollection<Person, PersonProperties> Persons { get; init; } = null!;\n\n\n        public IPersonShardModelShard AsReadOnly()\n        {\n            return new PersonShardModelShard(this);\n        }\n\n        public void Load(IRepository repository)\n        {\n            repository.Load(PersonShardModelShardInfo.PersonsInfo, Persons);\n\n        }\n    }\n\n}\n\nnamespace Json2Code.Person.Entities\n{\n    using CoreCraft.Core;\n\n    [global::System.CodeDom.Compiler.GeneratedCodeAttribute("C# Source Generator", "1.0.0.0")]\n    [global::System.Runtime.CompilerServices.CompilerGeneratedAttribute()]\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute()]\n    [global::System.Diagnostics.CodeAnalysis.ExcludeFromCodeCoverageAttribute()]\n    public sealed record Person(global::System.Guid Id) : Entity(Id)\n    {\n        internal Person() : this(global::System.Guid.NewGuid())\n        {\n        }\n    }\n\n    [global::System.CodeDom.Compiler.GeneratedCodeAttribute("C# Source Generator", "1.0.0.0")]\n    [global::System.Runtime.CompilerServices.CompilerGeneratedAttribute()]\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute()]\n    [global::System.Diagnostics.CodeAnalysis.ExcludeFromCodeCoverageAttribute()]\n    public sealed partial record PersonProperties : Properties\n    {\n        public PersonProperties()\n        {\n            FirstName = "Andrei";\n            LastName = "Ignat";\n        }\n\n        public string FirstName { get; init; }\n        public string LastName { get; init; }\n\n#if NET5_0_OR_GREATER\n        public override PersonProperties ReadFrom(IPropertiesBag bag)\n#else\n        public override Properties ReadFrom(IPropertiesBag bag)\n#endif\n        {\n            return new PersonProperties()\n            {\n                FirstName = bag.Read<string>("FirstName"),\n                LastName = bag.Read<string>("LastName"),\n            };\n        }\n\n        public override void WriteTo(IPropertiesBag bag)\n        {\n            bag.Write("FirstName", FirstName);\n            bag.Write("LastName", LastName);\n        }\n\n    }\n\n\n}\n\n'})})})}),"\n",(0,s.jsx)(n.h2,{id:"useful",children:"Useful"}),"\n",(0,s.jsx)(n.h3,{id:"download-example-net--c-",children:"Download Example (.NET  C# )"}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:r(3427).A+"",children:"Download Example project corecraft "})})}),"\n",(0,s.jsx)(n.h3,{id:"share-corecraft",children:"Share corecraft"}),"\n",(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2Fcorecraft&quote=corecraft",title:"Share on Facebook",target:"_blank",children:"Share on Facebook"})}),(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"https://twitter.com/intent/tweet?source=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2Fcorecraft&text=corecraft:%20https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2Fcorecraft",target:"_blank",title:"Tweet",children:"Share in Twitter"})}),(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"http://www.reddit.com/submit?url=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2Fcorecraft&title=corecraft",target:"_blank",title:"Submit to Reddit",children:"Share on Reddit"})}),(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"http://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2Fcorecraft&title=corecraft&summary=&source=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2Fcorecraft",target:"_blank",title:"Share on LinkedIn",children:"Share on Linkedin"})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://ignatandrei.github.io/RSCG_Examples/v2/docs/corecraft",children:"https://ignatandrei.github.io/RSCG_Examples/v2/docs/corecraft"})}),"\n",(0,s.jsx)(n.h3,{id:"in-the-same-category-filestocode---13-other-generators",children:"In the same category (FilesToCode) - 13 other generators"}),"\n",(0,s.jsx)(n.h4,{id:"chornembeddedresourceaccessgenerator",children:(0,s.jsx)(n.a,{href:"/docs/Chorn.EmbeddedResourceAccessGenerator",children:"Chorn.EmbeddedResourceAccessGenerator"})}),"\n",(0,s.jsx)(n.h4,{id:"datacuteembeddedresourcepropertygenerator",children:(0,s.jsx)(n.a,{href:"/docs/Datacute.EmbeddedResourcePropertyGenerator",children:"Datacute.EmbeddedResourcePropertyGenerator"})}),"\n",(0,s.jsx)(n.h4,{id:"dotnetyang",children:(0,s.jsx)(n.a,{href:"/docs/DotnetYang",children:"DotnetYang"})}),"\n",(0,s.jsx)(n.h4,{id:"embedresourcecsharp",children:(0,s.jsx)(n.a,{href:"/docs/EmbedResourceCSharp",children:"EmbedResourceCSharp"})}),"\n",(0,s.jsx)(n.h4,{id:"lingogen",children:(0,s.jsx)(n.a,{href:"/docs/LingoGen",children:"LingoGen"})}),"\n",(0,s.jsx)(n.h4,{id:"notnotappsettings",children:(0,s.jsx)(n.a,{href:"/docs/NotNotAppSettings",children:"NotNotAppSettings"})}),"\n",(0,s.jsx)(n.h4,{id:"podimoconstembed",children:(0,s.jsx)(n.a,{href:"/docs/Podimo.ConstEmbed",children:"Podimo.ConstEmbed"})}),"\n",(0,s.jsx)(n.h4,{id:"resxgenerator",children:(0,s.jsx)(n.a,{href:"/docs/ResXGenerator",children:"ResXGenerator"})}),"\n",(0,s.jsx)(n.h4,{id:"rscg_json2class",children:(0,s.jsx)(n.a,{href:"/docs/RSCG_JSON2Class",children:"RSCG_JSON2Class"})}),"\n",(0,s.jsx)(n.h4,{id:"rscg_utils",children:(0,s.jsx)(n.a,{href:"/docs/RSCG_Utils",children:"RSCG_Utils"})}),"\n",(0,s.jsx)(n.h4,{id:"thisassembly_resources",children:(0,s.jsx)(n.a,{href:"/docs/ThisAssembly_Resources",children:"ThisAssembly_Resources"})}),"\n",(0,s.jsx)(n.h4,{id:"thisassemblystrings",children:(0,s.jsx)(n.a,{href:"/docs/ThisAssembly.Strings",children:"ThisAssembly.Strings"})}),"\n",(0,s.jsx)(n.h4,{id:"weave",children:(0,s.jsx)(n.a,{href:"/docs/Weave",children:"Weave"})})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(m,{...e})}):m(e)}}}]);