"use strict";(self.webpackChunkrscg_examples=self.webpackChunkrscg_examples||[]).push([[7135],{3537:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>h,contentTitle:()=>d,default:()=>g,frontMatter:()=>p,metadata:()=>s,toc:()=>u});const s=JSON.parse('{"id":"RSCG-Examples/AspectGenerator","title":"94 - AspectGenerator","description":"AOP for methods in the same project. Uses interceptors","source":"@site/docs/RSCG-Examples/AspectGenerator.md","sourceDirName":"RSCG-Examples","slug":"/AspectGenerator","permalink":"/RSCG_Examples/v2/docs/AspectGenerator","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":940,"frontMatter":{"sidebar_position":940,"title":"94 - AspectGenerator","description":"AOP for methods in the same project. Uses interceptors","slug":"/AspectGenerator"},"sidebar":"tutorialSidebar","previous":{"title":"93 - mocklis","permalink":"/RSCG_Examples/v2/docs/mocklis"},"next":{"title":"95 - CopyCat","permalink":"/RSCG_Examples/v2/docs/CopyCat"}}');var r=n(74848),i=n(28453),a=n(11470),c=n(19365),o=n(14252),l=n(82304);const p={sidebar_position:940,title:"94 - AspectGenerator",description:"AOP for methods in the same project. Uses interceptors",slug:"/AspectGenerator"},d="AspectGenerator  by Igor Tkachev",h={},u=[{value:"NuGet / site data",id:"nuget--site-data",level:2},{value:"Details",id:"details",level:2},{value:"Info",id:"info",level:3},{value:"Original Readme",id:"original-readme",level:3},{value:"Download and Install",id:"download-and-install",level:2},{value:"Read documentation",id:"read-documentation",level:2},{value:"OpenTelemetry Aspect example",id:"opentelemetry-aspect-example",level:2},{value:"About",id:"about",level:3},{value:"How to use",id:"how-to-use",level:2},{value:"Example (source csproj, source files)",id:"example-source-csproj-source-files",level:3},{value:"Generated Files",id:"generated-files",level:3},{value:"Useful",id:"useful",level:2},{value:"Download Example (.NET  C#)",id:"download-example-net--c",level:3},{value:"Share AspectGenerator",id:"share-aspectgenerator",level:3},...l.RM];function m(e){const t={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"aspectgenerator--by-igor-tkachev",children:"AspectGenerator  by Igor Tkachev"})}),"\n",(0,r.jsx)(o.A,{toc:u}),"\n",(0,r.jsx)(t.h2,{id:"nuget--site-data",children:"NuGet / site data"}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.a,{href:"https://www.nuget.org/packages/AspectGenerator/",children:(0,r.jsx)(t.img,{src:"https://img.shields.io/nuget/dt/AspectGenerator?label=AspectGenerator",alt:"Nuget"})}),"\n",(0,r.jsx)(t.a,{href:"https://github.com/igor-tkachev/AspectGenerator",children:(0,r.jsx)(t.img,{src:"https://img.shields.io/github/last-commit/igor-tkachev/AspectGenerator?label=updated",alt:"GitHub last commit"})}),"\n",(0,r.jsx)(t.img,{src:"https://img.shields.io/github/stars/igor-tkachev/AspectGenerator?style=social",alt:"GitHub Repo stars"})]}),"\n",(0,r.jsx)(t.h2,{id:"details",children:"Details"}),"\n",(0,r.jsx)(t.h3,{id:"info",children:"Info"}),"\n",(0,r.jsxs)(t.admonition,{type:"info",children:[(0,r.jsxs)(t.p,{children:["Name: ",(0,r.jsx)(t.strong,{children:"AspectGenerator"})]}),(0,r.jsx)(t.p,{children:"The Aspect Generator can help you easily create your own aspects."}),(0,r.jsx)(t.p,{children:"Author: Igor Tkachev"}),(0,r.jsxs)(t.p,{children:["NuGet:\n",(0,r.jsx)(t.em,{children:(0,r.jsx)(t.a,{href:"https://www.nuget.org/packages/AspectGenerator/",children:"https://www.nuget.org/packages/AspectGenerator/"})})]}),(0,r.jsxs)(t.p,{children:["You can find more details at ",(0,r.jsx)(t.a,{href:"https://github.com/igor-tkachev/AspectGenerator",children:"https://github.com/igor-tkachev/AspectGenerator"})]}),(0,r.jsxs)(t.p,{children:["Source: ",(0,r.jsx)(t.a,{href:"https://github.com/igor-tkachev/AspectGenerator",children:"https://github.com/igor-tkachev/AspectGenerator"})]})]}),"\n",(0,r.jsx)(t.h3,{id:"original-readme",children:"Original Readme"}),"\n",(0,r.jsxs)(t.admonition,{type:"note",children:[(0,r.jsx)(t.h1,{id:"aspect-generator",children:"Aspect Generator"}),(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.a,{href:"https://github.com/igor-tkachev/AspectGenerator/actions?workflow=.NET",children:(0,r.jsx)(t.img,{src:"https://img.shields.io/github/actions/workflow/status/igor-tkachev/AspectGenerator/dotnet.yml?branch=master&label=test&logo=github&style=flat-square",alt:"Test workflow"})})," ",(0,r.jsx)(t.a,{href:"https://www.nuget.org/packages/AspectGenerator",children:(0,r.jsx)(t.img,{src:"https://buildstats.info/nuget/AspectGenerator?includePreReleases=true",alt:"NuGet Version and Downloads count"})})]}),(0,r.jsx)(t.p,{children:"The Aspect Generator can help you easily create your own aspects."}),(0,r.jsxs)(t.blockquote,{children:["\n",(0,r.jsxs)(t.p,{children:["[!WARNING]\n",(0,r.jsx)(t.a,{href:"https://github.com/dotnet/roslyn/blob/d71ec683082104e9122a4937abc768710c5f7782/docs/features/interceptors.md",children:"Interceptors"})," are an experimental compiler feature planned to ship in .NET 8 (with support for C# only).\nThe feature may be subject to breaking changes or removal in a future release."]}),"\n"]}),(0,r.jsxs)(t.blockquote,{children:["\n",(0,r.jsx)(t.p,{children:"[!NOTE]\nThe community still has doubts about the usefulness of this feature. On the one hand, it looks like not kosher fake AOP. On the other hand, it works just fine. This project can help you to try it and share your own opinion."}),"\n"]}),(0,r.jsx)(t.h2,{id:"download-and-install",children:"Download and Install"}),(0,r.jsx)(t.p,{children:"Install nuget"}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"> dotnet add package AspectGenerator\n"})}),(0,r.jsx)(t.p,{children:"Modify your project file"}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-xml",children:"<PropertyGroup>\n    ...\n    <LangVersion>preview</LangVersion>\n    <InterceptorsPreviewNamespaces>$(InterceptorsPreviewNamespaces);AspectGenerator</InterceptorsPreviewNamespaces>\n\n    \x3c!-- Add these settings to specify generated files output path --\x3e\n    <EmitCompilerGeneratedFiles>true</EmitCompilerGeneratedFiles>\n    <CompilerGeneratedFilesOutputPath>$(BaseIntermediateOutputPath)\\GeneratedFiles</CompilerGeneratedFilesOutputPath>\n</PropertyGroup>\n"})}),(0,r.jsx)(t.h2,{id:"read-documentation",children:"Read documentation"}),(0,r.jsx)(t.p,{children:(0,r.jsx)(t.a,{href:"https://github.com/igor-tkachev/AspectGenerator/wiki#how-it-works",children:"How it works"})}),(0,r.jsx)(t.p,{children:(0,r.jsx)(t.a,{href:"https://github.com/igor-tkachev/AspectGenerator/wiki#creating-your-own-aspect",children:"Creating your own aspect"})}),(0,r.jsx)(t.h2,{id:"opentelemetry-aspect-example",children:"OpenTelemetry Aspect example"}),(0,r.jsx)(t.p,{children:"Create OpenTelemetryFactory and Metrics aspect:"}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-c#",children:'using System;\nusing System.Diagnostics;\n\nusing OpenTelemetry;\nusing OpenTelemetry.Resources;\nusing OpenTelemetry.Trace;\n\nnamespace AspectGenerator\n{\n    /// <summary>\n    /// Initializes OpenTelemetry.\n    /// </summary>\n    static class OpenTelemetryFactory\n    {\n        public static TracerProvider? Create()\n        {\n            return Sdk.CreateTracerProviderBuilder()\n                .SetResourceBuilder(ResourceBuilder.CreateDefault().AddService("MySample"))\n                .AddSource("Sample.Aspect")\n                .AddConsoleExporter()\n                .Build();\n        }\n    }\n\n    /// <summary>\n    /// Metrics aspect.\n    /// </summary>\n    [Aspect(\n        // Specify the name of the method used in the \'using\' statement\n        // that returns an IDisposable object.\n        OnUsing = nameof(OnUsing)\n        )]\n    [AttributeUsage(AttributeTargets.Method, Inherited = false, AllowMultiple = false)]\n    sealed class MetricsAttribute : Attribute\n    {\n        static readonly ActivitySource _activitySource = new("Sample.Aspect");\n\n        public static Activity? OnUsing(InterceptInfo info)\n        {\n            return _activitySource.StartActivity(info.MemberInfo.Name);\n        }\n    }\n}\n'})}),(0,r.jsx)(t.p,{children:"Use it:"}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-c#",children:"using System;\nusing System.Threading;\n\nusing Aspects;\n\nnamespace OpenTelemetryAspect\n{\n    static class Program\n    {\n        static void Main()\n        {\n            using var _ = OpenTelemetryFactory.Create();\n\n            Method1();\n            Method2();\n            Method1();\n        }\n\n        [Metrics]\n        public static void Method1()\n        {\n            Thread.Sleep(100);\n        }\n\n        [Metrics]\n        public static void Method2()\n        {\n            Thread.Sleep(200);\n        }\n    }\n}\n"})}),(0,r.jsx)(t.p,{children:"Application output:"}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"Activity.TraceId:            d47417e726824c7b39055efb4685a9dd\nActivity.SpanId:             12fbf29f5b622e13\nActivity.TraceFlags:         Recorded\nActivity.ActivitySourceName: Sample.Aspect\nActivity.DisplayName:        Method1\nActivity.Kind:               Internal\nActivity.StartTime:          2023-11-22T00:50:15.9079068Z\nActivity.Duration:           00:00:00.1016180\nResource associated with Activity:\n    service.name: MySample\n    service.instance.id: 86dbd377-c850-42a3-b878-be07de30faf1\n    telemetry.sdk.name: opentelemetry\n    telemetry.sdk.language: dotnet\n    telemetry.sdk.version: 1.6.0\n\nActivity.TraceId:            b90735bfb52cb0b52a504d02bc5ead2e\nActivity.SpanId:             75109ef3af25a3e9\nActivity.TraceFlags:         Recorded\nActivity.ActivitySourceName: Sample.Aspect\nActivity.DisplayName:        Method2\nActivity.Kind:               Internal\nActivity.StartTime:          2023-11-22T00:50:16.0360160Z\nActivity.Duration:           00:00:00.2058166\nResource associated with Activity:\n    service.name: MySample\n    service.instance.id: 86dbd377-c850-42a3-b878-be07de30faf1\n    telemetry.sdk.name: opentelemetry\n    telemetry.sdk.language: dotnet\n    telemetry.sdk.version: 1.6.0\n\nActivity.TraceId:            e9653008f381b6330a8e538e02b7a61d\nActivity.SpanId:             be3d7cd1d4376bd7\nActivity.TraceFlags:         Recorded\nActivity.ActivitySourceName: Sample.Aspect\nActivity.DisplayName:        Method1\nActivity.Kind:               Internal\nActivity.StartTime:          2023-11-22T00:50:16.2517480Z\nActivity.Duration:           00:00:00.1135186\nResource associated with Activity:\n    service.name: MySample\n    service.instance.id: 86dbd377-c850-42a3-b878-be07de30faf1\n    telemetry.sdk.name: opentelemetry\n    telemetry.sdk.language: dotnet\n    telemetry.sdk.version: 1.6.0\n"})}),(0,r.jsx)(t.p,{children:"Generated code:"}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-c#",children:'// <auto-generated/>\n#pragma warning disable\n#nullable enable\n\nusing System;\n\nusing SR  = System.Reflection;\nusing SLE = System.Linq.Expressions;\nusing SCG = System.Collections.Generic;\n\nnamespace Aspects\n{\n    static partial class Interceptors\n    {\n        static SR.MethodInfo GetMethodInfo(SLE.Expression expr)\n        {\n            return expr switch\n            {\n                SLE.MethodCallExpression mc => mc.Method,\n                _                           => throw new InvalidOperationException()\n            };\n        }\n\n        static SR.MethodInfo MethodOf<T>(SLE.Expression<Func<T>> func) => GetMethodInfo(func.Body);\n        static SR.MethodInfo MethodOf   (SLE.Expression<Action>  func) => GetMethodInfo(func.Body);\n\n        static SR. MemberInfo                 Method1_Interceptor_MemberInfo        = MethodOf(() => OpenTelemetryAspect.Program.Method1());\n        static SCG.Dictionary<string,object?> Method1_Interceptor_AspectArguments_0 = new ()\n        {\n        };\n        //\n        /// <summary>\n        /// Intercepts OpenTelemetryAspect.Program.Method1().\n        /// </summary>\n        //\n        // Intercepts Method1().\n        [System.Runtime.CompilerServices.InterceptsLocation(@"P:\\AspectGenerator\\Examples\\OpenTelemetryAspect\\Program.cs", line: 14, character: 4)]\n        //\n        // Intercepts Method1().\n        [System.Runtime.CompilerServices.InterceptsLocation(@"P:\\AspectGenerator\\Examples\\OpenTelemetryAspect\\Program.cs", line: 16, character: 4)]\n        //\n        [System.Runtime.CompilerServices.CompilerGenerated]\n        //[System.Diagnostics.DebuggerStepThrough]\n        public static void Method1_Interceptor()\n        {\n            // Aspects.MetricsAttribute\n            //\n            var __info__0 = new Aspects.InterceptInfo<Void>\n            {\n                MemberInfo      = Method1_Interceptor_MemberInfo,\n                AspectType      = typeof(Aspects.MetricsAttribute),\n                AspectArguments = Method1_Interceptor_AspectArguments_0,\n            };\n\n            using (Aspects.MetricsAttribute.OnUsing(__info__0))\n            {\n                OpenTelemetryAspect.Program.Method1();\n            }\n        }\n\n        static SR. MemberInfo                 Method2_Interceptor_MemberInfo        = MethodOf(() => OpenTelemetryAspect.Program.Method2());\n        static SCG.Dictionary<string,object?> Method2_Interceptor_AspectArguments_0 = new ()\n        {\n        };\n        //\n        /// <summary>\n        /// Intercepts OpenTelemetryAspect.Program.Method2().\n        /// </summary>\n        //\n        // Intercepts Method2().\n        [System.Runtime.CompilerServices.InterceptsLocation(@"P:\\AspectGenerator\\Examples\\OpenTelemetryAspect\\Program.cs", line: 15, character: 4)]\n        //\n        [System.Runtime.CompilerServices.CompilerGenerated]\n        //[System.Diagnostics.DebuggerStepThrough]\n        public static void Method2_Interceptor()\n        {\n            // Aspects.MetricsAttribute\n            //\n            var __info__0 = new Aspects.InterceptInfo<Void>\n            {\n                MemberInfo      = Method2_Interceptor_MemberInfo,\n                AspectType      = typeof(Aspects.MetricsAttribute),\n                AspectArguments = Method2_Interceptor_AspectArguments_0,\n            };\n\n            using (Aspects.MetricsAttribute.OnUsing(__info__0))\n            {\n                OpenTelemetryAspect.Program.Method2();\n            }\n        }\n    }\n}\n'})}),(0,r.jsxs)(t.p,{children:["More advanced version of the Metrics aspect can also set activity status and support ",(0,r.jsx)(t.code,{children:"await using"}),"."]}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-c#",children:'[Aspect(\n    OnUsing      = nameof(OnUsing),\n    OnAsyncUsing = nameof(OnAsyncUsing),\n    OnFinally    = nameof(OnFinally)\n    )]\n[AttributeUsage(AttributeTargets.Method, Inherited = false, AllowMultiple = false)]\nsealed class MetricsAttribute : Attribute\n{\n    static readonly ActivitySource _activitySource = new("Sample.Aspect");\n\n    public static Activity? OnUsing(InterceptInfo info)\n    {\n        var activity = _activitySource.StartActivity(info.MemberInfo.Name);\n\n        info.Tag = activity;\n\n        return activity;\n    }\n\n    class AsyncActivity(Activity activity) : IAsyncDisposable\n    {\n        public readonly Activity Activity = activity;\n\n        public ValueTask DisposeAsync()\n        {\n            Activity.Dispose();\n            return ValueTask.CompletedTask;\n        }\n    }\n\n    public static IAsyncDisposable? OnAsyncUsing(InterceptInfo info)\n    {\n        var activity = _activitySource.StartActivity(info.MemberInfo.Name);\n\n        if (activity == null)\n            return null;\n\n        var asyncActivity = new AsyncActivity(activity);\n\n        info.Tag = asyncActivity;\n\n        return asyncActivity;\n    }\n\n    public static void OnFinally(InterceptInfo info)\n    {\n        switch (info)\n        {\n            case { Tag: Activity activity, Exception: var ex } : SetStatus(activity,    ex); break;\n            case { Tag: AsyncActivity aa,  Exception: var ex } : SetStatus(aa.Activity, ex); break;\n        }\n\n        static void SetStatus(Activity activity, Exception? ex) =>\n            activity.SetStatus(ex is null ? ActivityStatusCode.Ok : ActivityStatusCode.Error);\n    }\n}\n'})})]}),"\n",(0,r.jsx)(t.h3,{id:"about",children:"About"}),"\n",(0,r.jsx)(t.admonition,{type:"note",children:(0,r.jsx)(t.p,{children:"AOP for methods in the same project. Uses interceptors"})}),"\n",(0,r.jsx)(t.h2,{id:"how-to-use",children:"How to use"}),"\n",(0,r.jsx)(t.h3,{id:"example-source-csproj-source-files",children:"Example (source csproj, source files)"}),"\n",(0,r.jsxs)(a.A,{children:[(0,r.jsxs)(c.A,{value:"csproj",label:"CSharp Project",children:[(0,r.jsxs)(t.p,{children:["This is the CSharp Project that references ",(0,r.jsx)(t.strong,{children:"AspectGenerator"})]}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-xml",metastring:"showLineNumbers {11}",children:'<Project Sdk="Microsoft.NET.Sdk">\n\n  <PropertyGroup>\n    <OutputType>Exe</OutputType>\n    <TargetFramework>net8.0</TargetFramework>\n    <ImplicitUsings>enable</ImplicitUsings>\n    <Nullable>enable</Nullable>\n  </PropertyGroup>\n\n  <ItemGroup>\n    <PackageReference Include="AspectGenerator" Version="0.0.9-preview" OutputItemType="Analyzer"  />\n  </ItemGroup>\n<PropertyGroup>\n    \n    <InterceptorsPreviewNamespaces>$(InterceptorsPreviewNamespaces);AspectGenerator</InterceptorsPreviewNamespaces>\n\n    <EmitCompilerGeneratedFiles>true</EmitCompilerGeneratedFiles>\n    <CompilerGeneratedFilesOutputPath>$(BaseIntermediateOutputPath)\\GX</CompilerGeneratedFilesOutputPath>\n</PropertyGroup>\n</Project>\n\n'})})]}),(0,r.jsxs)(c.A,{value:"D:\\gth\\RSCG_Examples\\v2\\rscg_examples\\AspectGenerator\\src\\AG\\Program.cs",label:"Program.cs",children:[(0,r.jsxs)(t.p,{children:["This is the use of ",(0,r.jsx)(t.strong,{children:"AspectGenerator"})," in ",(0,r.jsx)(t.em,{children:"Program.cs"})]}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-csharp",metastring:"showLineNumbers ",children:'using AG;\n\nvar p=new Person { FirstName="Ignat", LastName="Andrei" };\nvar x= p.FullName();\nConsole.WriteLine(x);   \n'})})]}),(0,r.jsxs)(c.A,{value:"D:\\gth\\RSCG_Examples\\v2\\rscg_examples\\AspectGenerator\\src\\AG\\Person.cs",label:"Person.cs",children:[(0,r.jsxs)(t.p,{children:["This is the use of ",(0,r.jsx)(t.strong,{children:"AspectGenerator"})," in ",(0,r.jsx)(t.em,{children:"Person.cs"})]}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-csharp",metastring:"showLineNumbers ",children:'namespace AG;\n\ninternal class Person\n{\n    public string? FirstName { get; set; }\n    public string? LastName { get; set; }\n    [Metrics]\n    public string FullName()\n    {\n        return $"{FirstName} {LastName}";\n    }\n}\n'})})]}),(0,r.jsxs)(c.A,{value:"D:\\gth\\RSCG_Examples\\v2\\rscg_examples\\AspectGenerator\\src\\AG\\AG.cs",label:"AG.cs",children:[(0,r.jsxs)(t.p,{children:["This is the use of ",(0,r.jsx)(t.strong,{children:"AspectGenerator"})," in ",(0,r.jsx)(t.em,{children:"AG.cs"})]}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-csharp",metastring:"showLineNumbers ",children:'using System.Diagnostics;\nusing AspectGenerator;\nnamespace AG;\n\n[Aspect(\n       // Specify the name of the method used in the \'using\' statement\n       // that returns an IDisposable object.\n       OnUsing = nameof(OnUsing)\n       )]\n[AttributeUsage(AttributeTargets.Method, Inherited = false, AllowMultiple = false)]\nsealed class MetricsAttribute : Attribute\n{\n    //static readonly ActivitySource _activitySource = new("Sample.Aspect");\n\n    public static Activity? OnUsing(InterceptInfo info)\n    {\n        Console.WriteLine($"Entering {info.MemberInfo.Name}");\n        return null;\n        //var data=_activitySource.StartActivity(info.MemberInfo.Name);\n        //return data;\n    }\n}\n'})})]})]}),"\n",(0,r.jsx)(t.h3,{id:"generated-files",children:"Generated Files"}),"\n",(0,r.jsx)(t.p,{children:"Those are taken from $(BaseIntermediateOutputPath)\\GX"}),"\n",(0,r.jsxs)(a.A,{children:[(0,r.jsx)(c.A,{value:"D:\\gth\\RSCG_Examples\\v2\\rscg_examples\\AspectGenerator\\src\\AG\\obj\\GX\\AspectGenerator\\AspectGenerator.AspectSourceGenerator\\AspectAttribute.g.cs",label:"AspectAttribute.g.cs",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-csharp",metastring:"showLineNumbers ",children:"// <auto-generated/>\n#pragma warning disable\n#nullable enable\n\nusing System;\n\n#if AG_GENERATE_API || !AG_NOT_GENERATE_API\n\nnamespace AspectGenerator\n{\n\t/// <summary>\n\t/// <para>Defines an aspect.</para>\n\t/// <para>Create a new attribute decorated with this attribute to define an aspect.</para>\n\t/// </summary>\n\t[AttributeUsage(AttributeTargets.Class, Inherited = false, AllowMultiple = false)]\n#if AG_PUBLIC_API\n\tpublic\n#endif\n\tsealed class AspectAttribute : Attribute\n\t{\n\t\tpublic string?   OnInit            { get; set; }\n\t\tpublic string?   OnUsing           { get; set; }\n\t\tpublic string?   OnUsingAsync      { get; set; }\n\t\tpublic string?   OnBeforeCall      { get; set; }\n\t\tpublic string?   OnBeforeCallAsync { get; set; }\n\t\tpublic string?   OnCall            { get; set; }\n\t\tpublic string?   OnAfterCall       { get; set; }\n\t\tpublic string?   OnAfterCallAsync  { get; set; }\n\t\tpublic string?   OnCatch           { get; set; }\n\t\tpublic string?   OnCatchAsync      { get; set; }\n\t\tpublic string?   OnFinally         { get; set; }\n\t\tpublic string?   OnFinallyAsync    { get; set; }\n\t\tpublic string[]? InterceptMethods  { get; set; }\n\t\tpublic bool      UseInterceptType  { get; set; }\n\t\tpublic bool      PassArguments     { get; set; }\n\t\tpublic bool      UseInterceptData  { get; set; }\n\t}\n\n#if AG_PUBLIC_API\n\tpublic\n#endif\n\tenum InterceptType\n\t{\n\t\tOnInit,\n\t\tOnUsing,\n\t\tOnBeforeCall,\n\t\tOnAfterCall,\n\t\tOnCatch,\n\t\tOnFinally\n\t}\n\n#if AG_PUBLIC_API\n\tpublic\n#endif\n\tenum InterceptResult\n\t{\n\t\tContinue,\n\t\tReturn,\n\t\tReThrow     = Continue,\n\t\tIgnoreThrow = Return\n\t}\n\n#if AG_PUBLIC_API\n\tpublic\n#endif\n\tstruct Void\n\t{\n\t}\n\n#if AG_PUBLIC_API\n\tpublic\n#endif\n\tpartial class InterceptInfo\n\t{\n\t\tpublic object?         Tag;\n\t\tpublic InterceptType   InterceptType;\n\t\tpublic InterceptResult InterceptResult;\n\t\tpublic Exception?      Exception;\n\n\t\tpublic InterceptInfo?                                        PreviousInfo;\n\t\tpublic System.Reflection.MemberInfo                          MemberInfo;\n\t\tpublic object?[]?                                            MethodArguments;\n\t\tpublic Type                                                  AspectType;\n\t\tpublic System.Collections.Generic.Dictionary<string,object?> AspectArguments;\n\t}\n\n#if AG_PUBLIC_API\n\tpublic\n#endif\n\tpartial class InterceptInfo<T> : InterceptInfo\n\t{\n\t\tpublic T ReturnValue;\n\t}\n\n#if AG_PUBLIC_API\n\tpublic\n#endif\n\tpartial struct InterceptData<T>\n\t{\n\t\tpublic object?         Tag;\n\t\tpublic InterceptType   InterceptType;\n\t\tpublic InterceptResult InterceptResult;\n\t\tpublic Exception?      Exception;\n\n\t\tpublic InterceptInfo<T>?                                     PreviousInfo;\n\t\tpublic System.Reflection.MemberInfo                          MemberInfo;\n\t\tpublic object?[]?                                            MethodArguments;\n\t\tpublic Type                                                  AspectType;\n\t\tpublic System.Collections.Generic.Dictionary<string,object?> AspectArguments;\n\n\t\tpublic T ReturnValue;\n\t}\n}\n\n#endif\n\n#if AG_GENERATE_InterceptsLocationAttribute || !AG_NOT_GENERATE_InterceptsLocationAttribute\n\nnamespace System.Runtime.CompilerServices\n{\n\t[AttributeUsage(AttributeTargets.Method, AllowMultiple = true)]\n\tsealed class InterceptsLocationAttribute(string filePath, int line, int character) : Attribute\n\t{\n\t}\n}\n\n#endif\n\n"})})}),(0,r.jsx)(c.A,{value:"D:\\gth\\RSCG_Examples\\v2\\rscg_examples\\AspectGenerator\\src\\AG\\obj\\GX\\AspectGenerator\\AspectGenerator.AspectSourceGenerator\\Interceptors.g.cs",label:"Interceptors.g.cs",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-csharp",metastring:"showLineNumbers ",children:'// <auto-generated/>\n#pragma warning disable\n#nullable enable\n\nusing System;\n\nusing SR  = System.Reflection;\nusing SLE = System.Linq.Expressions;\nusing SCG = System.Collections.Generic;\n\nnamespace AspectGenerator\n{\n\tusing AspectGenerator = AspectGenerator;\n\n\tstatic partial class Interceptors\n\t{\n\t\tstatic SR.MethodInfo GetMethodInfo(SLE.Expression expr)\n\t\t{\n\t\t\treturn expr switch\n\t\t\t{\n\t\t\t\tSLE.MethodCallExpression mc => mc.Method,\n\t\t\t\t_                           => throw new InvalidOperationException()\n\t\t\t};\n\t\t}\n\n\t\tstatic SR.MethodInfo MethodOf<T>(SLE.Expression<Func<T>> func) => GetMethodInfo(func.Body);\n\t\tstatic SR.MethodInfo MethodOf   (SLE.Expression<Action>  func) => GetMethodInfo(func.Body);\n\n\t\tstatic SR. MemberInfo                 FullName_Interceptor_MemberInfo        = MethodOf(() => default(AG.Person).FullName());\n\t\tstatic SCG.Dictionary<string,object?> FullName_Interceptor_AspectArguments_0 = new()\n\t\t{\n\t\t};\n\t\t//\n\t\t/// <summary>\n\t\t/// Intercepts AG.Person.FullName().\n\t\t/// </summary>\n\t\t//\n\t\t// Intercepts p.FullName().\n\t\t[System.Runtime.CompilerServices.InterceptsLocation(@"D:\\eu\\GitHub\\RSCG_Examples\\v2\\rscg_examples\\AspectGenerator\\src\\AG\\Program.cs", line: 4, character: 10)]\n\t\t//\n\t\t[System.Runtime.CompilerServices.CompilerGenerated]\n\t\t//[System.Diagnostics.DebuggerStepThrough]\n\t\tpublic static string FullName_Interceptor(this AG.Person __this__)\n\t\t{\n\t\t\t// AG.MetricsAttribute\n\t\t\t//\n\t\t\tvar __info__0 = new AspectGenerator.InterceptInfo<string>\n\t\t\t{\n\t\t\t\tMemberInfo      = FullName_Interceptor_MemberInfo,\n\t\t\t\tAspectType      = typeof(AG.MetricsAttribute),\n\t\t\t\tAspectArguments = FullName_Interceptor_AspectArguments_0,\n\t\t\t};\n\n\t\t\tusing (AG.MetricsAttribute.OnUsing(__info__0))\n\t\t\t{\n\t\t\t\t__info__0.ReturnValue = __this__.FullName();\n\t\t\t}\n\n\t\t\treturn __info__0.ReturnValue;\n\t\t}\n\t}\n}\n\n'})})})]}),"\n",(0,r.jsx)(t.h2,{id:"useful",children:"Useful"}),"\n",(0,r.jsx)(t.h3,{id:"download-example-net--c",children:"Download Example (.NET  C#)"}),"\n",(0,r.jsx)(t.admonition,{type:"tip",children:(0,r.jsx)(t.p,{children:(0,r.jsx)(t.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:n(56997).A+"",children:"Download Example project AspectGenerator "})})}),"\n",(0,r.jsx)(t.h3,{id:"share-aspectgenerator",children:"Share AspectGenerator"}),"\n",(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{children:(0,r.jsx)("a",{href:"https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FAspectGenerator&quote=AspectGenerator",title:"Share on Facebook",target:"_blank",children:"Share on Facebook"})}),(0,r.jsx)("li",{children:(0,r.jsx)("a",{href:"https://twitter.com/intent/tweet?source=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FAspectGenerator&text=AspectGenerator:%20https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FAspectGenerator",target:"_blank",title:"Tweet",children:"Share in Twitter"})}),(0,r.jsx)("li",{children:(0,r.jsx)("a",{href:"http://www.reddit.com/submit?url=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FAspectGenerator&title=AspectGenerator",target:"_blank",title:"Submit to Reddit",children:"Share on Reddit"})}),(0,r.jsx)("li",{children:(0,r.jsx)("a",{href:"http://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FAspectGenerator&title=AspectGenerator&summary=&source=https%3A%2F%2Fignatandrei.github.io%2FRSCG_Examples%2Fv2%2Fdocs%2FAspectGenerator",target:"_blank",title:"Share on LinkedIn",children:"Share on Linkedin"})})]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.a,{href:"https://ignatandrei.github.io/RSCG_Examples/v2/docs/AspectGenerator",children:"https://ignatandrei.github.io/RSCG_Examples/v2/docs/AspectGenerator"})}),"\n",(0,r.jsx)(t.p,{children:"aaa"}),"\n",(0,r.jsx)(l.Ay,{})]})}function g(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(m,{...e})}):m(e)}},56997:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/files/AspectGenerator-6f068f4e2f2096da51dd4fe1a2d85b62.zip"},82304:(e,t,n)=>{n.d(t,{Ay:()=>c,RM:()=>i});var s=n(74848),r=n(28453);const i=[{value:"Category &quot;EnhancementClass&quot; has the following generators:",id:"category-enhancementclass-has-the-following-generators",level:3},{value:"See category",id:"see-category",level:3}];function a(e){const t={a:"a",h3:"h3",p:"p",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h3,{id:"category-enhancementclass-has-the-following-generators",children:'Category "EnhancementClass" has the following generators:'}),"\n",(0,s.jsxs)(t.p,{children:["1 ",(0,s.jsx)(t.a,{href:"/docs/ApparatusAOT",children:"ApparatusAOT"})]}),"\n",(0,s.jsxs)(t.p,{children:["2 ",(0,s.jsx)(t.a,{href:"/docs/AspectGenerator",children:"AspectGenerator"})]}),"\n",(0,s.jsxs)(t.p,{children:["3 ",(0,s.jsx)(t.a,{href:"/docs/CommonCodeGenerator",children:"CommonCodeGenerator"})]}),"\n",(0,s.jsxs)(t.p,{children:["4 ",(0,s.jsx)(t.a,{href:"/docs/Comparison",children:"Comparison"})]}),"\n",(0,s.jsxs)(t.p,{children:["5 ",(0,s.jsx)(t.a,{href:"/docs/DudNet",children:"DudNet"})]}),"\n",(0,s.jsxs)(t.p,{children:["6 ",(0,s.jsx)(t.a,{href:"/docs/Enhanced.GetTypes",children:"Enhanced.GetTypes"})]}),"\n",(0,s.jsxs)(t.p,{children:["7 ",(0,s.jsx)(t.a,{href:"/docs/FastGenericNew",children:"FastGenericNew"})]}),"\n",(0,s.jsxs)(t.p,{children:["8 ",(0,s.jsx)(t.a,{href:"/docs/Immutype",children:"Immutype"})]}),"\n",(0,s.jsxs)(t.p,{children:["9 ",(0,s.jsx)(t.a,{href:"/docs/Ling.Audit",children:"Ling.Audit"})]}),"\n",(0,s.jsxs)(t.p,{children:["10 ",(0,s.jsx)(t.a,{href:"/docs/Lombok.NET",children:"Lombok.NET"})]}),"\n",(0,s.jsxs)(t.p,{children:["11 ",(0,s.jsx)(t.a,{href:"/docs/M31.FluentAPI",children:"M31.FluentAPI"})]}),"\n",(0,s.jsxs)(t.p,{children:["12 ",(0,s.jsx)(t.a,{href:"/docs/MemberAccessor",children:"MemberAccessor"})]}),"\n",(0,s.jsxs)(t.p,{children:["13 ",(0,s.jsx)(t.a,{href:"/docs/MemoryPack",children:"MemoryPack"})]}),"\n",(0,s.jsxs)(t.p,{children:["14 ",(0,s.jsx)(t.a,{href:"/docs/Meziantou.Polyfill",children:"Meziantou.Polyfill"})]}),"\n",(0,s.jsxs)(t.p,{children:["15 ",(0,s.jsx)(t.a,{href:"/docs/Microsoft.Extensions.Logging",children:"Microsoft.Extensions.Logging"})]}),"\n",(0,s.jsxs)(t.p,{children:["16 ",(0,s.jsx)(t.a,{href:"/docs/Microsoft.Extensions.Options.Generators.OptionsValidatorGenerator",children:"Microsoft.Extensions.Options.Generators.OptionsValidatorGenerator"})]}),"\n",(0,s.jsxs)(t.p,{children:["17 ",(0,s.jsx)(t.a,{href:"/docs/Microsoft.Interop.JavaScript.JSImportGenerator",children:"Microsoft.Interop.JavaScript.JSImportGenerator"})]}),"\n",(0,s.jsxs)(t.p,{children:["18 ",(0,s.jsx)(t.a,{href:"/docs/OptionToStringGenerator",children:"OptionToStringGenerator"})]}),"\n",(0,s.jsxs)(t.p,{children:["19 ",(0,s.jsx)(t.a,{href:"/docs/QueryStringGenerator",children:"QueryStringGenerator"})]}),"\n",(0,s.jsxs)(t.p,{children:["20 ",(0,s.jsx)(t.a,{href:"/docs/RSCG_Decorator",children:"RSCG_Decorator"})]}),"\n",(0,s.jsxs)(t.p,{children:["21 ",(0,s.jsx)(t.a,{href:"/docs/RSCG_UtilityTypes",children:"RSCG_UtilityTypes"})]}),"\n",(0,s.jsxs)(t.p,{children:["22 ",(0,s.jsx)(t.a,{href:"/docs/StaticReflection",children:"StaticReflection"})]}),"\n",(0,s.jsxs)(t.p,{children:["23 ",(0,s.jsx)(t.a,{href:"/docs/SyncMethodGenerator",children:"SyncMethodGenerator"})]}),"\n",(0,s.jsxs)(t.p,{children:["24 ",(0,s.jsx)(t.a,{href:"/docs/System.Runtime.InteropServices",children:"System.Runtime.InteropServices"})]}),"\n",(0,s.jsxs)(t.p,{children:["25 ",(0,s.jsx)(t.a,{href:"/docs/System.Text.RegularExpressions",children:"System.Text.RegularExpressions"})]}),"\n",(0,s.jsxs)(t.p,{children:["26 ",(0,s.jsx)(t.a,{href:"/docs/TelemetryLogging",children:"TelemetryLogging"})]}),"\n",(0,s.jsxs)(t.p,{children:["27 ",(0,s.jsx)(t.a,{href:"/docs/ThisClass",children:"ThisClass"})]}),"\n",(0,s.jsx)(t.h3,{id:"see-category",children:"See category"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.a,{href:"/docs/Categories/EnhancementClass",children:"EnhancementClass"})})]})}function c(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}}}]);